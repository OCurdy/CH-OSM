<table class="panel-switcher-opts dropright">
  <tbody>
  <tr style="clear: both;">
    <a id="menu-toggle" (click)="setPanelToShow('layerTree')" href="#" class="btn btn-primary btn-panel-switcher toggle">
      <svg *ngIf="isPanelOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
        <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
      </svg>
      <svg *ngIf="!isPanelOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-left-fill" viewBox="0 0 16 16">
        <path d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/>
      </svg>
    </a>
  </tr>
  <tr>
    <td>
      <div class="btn-group dropleft">
        <button #dropdownButton class="btn btn-primary dropleft" data-toggle="dropdown" (click)="closeMapControllerCollapse()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-translate" viewBox="0 0 16 16">
            <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/>
            <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z"/>
          </svg>
        </button>
        <div class="dropdown-menu dropdown-menu-right transparent-dropdown" #dropdownMenu>
          <button class="dropdown-item" type="button" (click)="useLanguage('de')" data-lang="de">Deutsch</button>
          <button class="dropdown-item" type="button" (click)="useLanguage('fr')" data-lang="fr">Fran√ßais</button>
          <button class="dropdown-item" type="button" (click)="useLanguage('it')" data-lang="it">Italiano</button>
          <button class="dropdown-item" type="button" (click)="useLanguage('rm')" data-lang="rm">Rumantsch</button>
          <button class="dropdown-item" type="button" (click)="useLanguage('en')" data-lang="en">English</button>
        </div>
      </div>
    </td>
  </tr>
  <tr>
    <td>
      <div class="btn-group dropleft">
        <button #toggleButton class="btn btn-primary" type="button" aria-expanded="false" (click)="toggleCollapse($event)">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stack" viewBox="0 0 16 16">
          <path d="m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"/>
          <path d="m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"/>
          </svg>
        </button>
        <div #mapControllerCollapse class="collapse" [class.show]="!isMapControllerCollapsed" id="mapControllerCollapse">
          <app-map-controller #appMapController [userContext]="userContext"></app-map-controller>
        </div>        
      </div>
    </td>
  </tr>
  <tr>
    <a 
      [hidden]="!mapService.legendUrls || !(mapService.legendUrls.length>0)"
      id="legende-toggle" (click)="setPanelToShow('legende')" href="#" class="btn btn-primary btn-panel-switcher toggle"
    >
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-stars" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5"/>
      <path d="M2.242 2.194a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.256-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53z"/>
    </svg>
    </a>
  </tr>
</tbody></table>
<div 
  class="card row" id="panel-switcher-wrapper" style="overflow-y:auto;overflow-x:hidden;"
  
  data-container="body"
  data-toggle="popover"
  data-html="true"
  translate="true"
  data-placement="right"
>
  <div class="panel-switcher-nav" role="tab">
    <app-layer-tree [hidden]="panelToShow != 'layerTree'" [userContext]="userContext" id="layerTree"></app-layer-tree>
    <app-legend
      *ngIf="panelToShow === 'legende'"
      [legendUrls]="mapService.legendUrls" [legendSubTitles]="mapService.legendSubTitles" [legendTitle]="mapService.legendTitle"
      [currentScale]="mapService.currentScale" id="accordionLegend"
    >
    </app-legend>
  </div>
</div>
