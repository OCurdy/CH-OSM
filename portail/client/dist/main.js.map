{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/apiadresse/apiadresse.component.css","webpack:///./src/app/apiadresse/apiadresse.component.html","webpack:///./src/app/apiadresse/apiadresse.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app/app.component.css","webpack:///./src/app/app/app.component.html","webpack:///./src/app/app/app.component.ts","webpack:///./src/app/changes/change-details/change-details.component.css","webpack:///./src/app/changes/change-details/change-details.component.html","webpack:///./src/app/changes/change-details/change-details.component.ts","webpack:///./src/app/changes/changes-config-panel/changes-config-panel.component.css","webpack:///./src/app/changes/changes-config-panel/changes-config-panel.component.html","webpack:///./src/app/changes/changes-config-panel/changes-config-panel.component.ts","webpack:///./src/app/changes/changes-detailled-map/changes-detailled-map.component.css","webpack:///./src/app/changes/changes-detailled-map/changes-detailled-map.component.html","webpack:///./src/app/changes/changes-detailled-map/changes-detailled-map.component.ts","webpack:///./src/app/changes/changes-main/changes-main.component.css","webpack:///./src/app/changes/changes-main/changes-main.component.html","webpack:///./src/app/changes/changes-main/changes-main.component.ts","webpack:///./src/app/changes/changes-map/changes-map.component.css","webpack:///./src/app/changes/changes-map/changes-map.component.html","webpack:///./src/app/changes/changes-map/changes-map.component.ts","webpack:///./src/app/common/directive/draggable.directive.ts","webpack:///./src/app/feature-panel-components/feature-main-info/feature-main-info.component.css","webpack:///./src/app/feature-panel-components/feature-main-info/feature-main-info.component.html","webpack:///./src/app/feature-panel-components/feature-main-info/feature-main-info.component.ts","webpack:///./src/app/feature-panel/feature-panel.component.css","webpack:///./src/app/feature-panel/feature-panel.component.html","webpack:///./src/app/feature-panel/feature-panel.component.ts","webpack:///./src/app/header/header.component.css","webpack:///./src/app/header/header.component.html","webpack:///./src/app/header/header.component.ts","webpack:///./src/app/help-components/help-subsection/help-subsection.component.css","webpack:///./src/app/help-components/help-subsection/help-subsection.component.html","webpack:///./src/app/help-components/help-subsection/help-subsection.component.ts","webpack:///./src/app/help-components/help/help.component.css","webpack:///./src/app/help-components/help/help.component.html","webpack:///./src/app/help-components/help/help.component.ts","webpack:///./src/app/layer-attribute-table/layer-attribute-table.component.css","webpack:///./src/app/layer-attribute-table/layer-attribute-table.component.html","webpack:///./src/app/layer-attribute-table/layer-attribute-table.component.ts","webpack:///./src/app/main/main.component.css","webpack:///./src/app/main/main.component.html","webpack:///./src/app/main/main.component.ts","webpack:///./src/app/map-panel-switcher-components/layer-tree/layer-tree.component.css","webpack:///./src/app/map-panel-switcher-components/layer-tree/layer-tree.component.html","webpack:///./src/app/map-panel-switcher-components/layer-tree/layer-tree.component.ts","webpack:///./src/app/map-panel-switcher-components/legend/legend.component.css","webpack:///./src/app/map-panel-switcher-components/legend/legend.component.html","webpack:///./src/app/map-panel-switcher-components/legend/legend.component.ts","webpack:///./src/app/map-panel-switcher-components/map-controller/map-controller.component.css","webpack:///./src/app/map-panel-switcher-components/map-controller/map-controller.component.html","webpack:///./src/app/map-panel-switcher-components/map-controller/map-controller.component.ts","webpack:///./src/app/map-panel-switcher/map-panel-switcher.component.css","webpack:///./src/app/map-panel-switcher/map-panel-switcher.component.html","webpack:///./src/app/map-panel-switcher/map-panel-switcher.component.ts","webpack:///./src/app/map/map.component.css","webpack:///./src/app/map/map.component.html","webpack:///./src/app/map/map.component.ts","webpack:///./src/app/model/ChangesClasses/Change.ts","webpack:///./src/app/model/ChangesClasses/ChangeType.ts","webpack:///./src/app/model/ChangesClasses/ChangesRequest.ts","webpack:///./src/app/model/ChangesClasses/Color.ts","webpack:///./src/app/model/ChangesClasses/FeatureChangesRequest.ts","webpack:///./src/app/model/ChangesClasses/Tag.ts","webpack:///./src/app/model/FeatureMainInfoClasses/FeatureImportantTags.ts","webpack:///./src/app/model/FeatureMainInfoClasses/FeatureImportantTagsList.ts","webpack:///./src/app/model/FeatureMainInfoClasses/KeyLabelObject.ts","webpack:///./src/app/model/FeatureMainInfoClasses/KeyLabelObjectList.ts","webpack:///./src/app/model/Layer.ts","webpack:///./src/app/model/LayerAndCategory.ts","webpack:///./src/app/model/NearbyFeaturesClasses/NearbyFeaturesBelongingToOneLayer.ts","webpack:///./src/app/model/NearbyFeaturesClasses/NearbyFeaturesList.ts","webpack:///./src/app/model/UserContext.ts","webpack:///./src/app/model/WFSRequest.ts","webpack:///./src/app/orderbypipe/orderbypipe.component.ts","webpack:///./src/app/permalink/permalink.component.css","webpack:///./src/app/permalink/permalink.component.html","webpack:///./src/app/permalink/permalink.component.ts","webpack:///./src/app/service/api-request.service.ts","webpack:///./src/app/service/config.service.ts","webpack:///./src/app/service/layer-change.service.ts","webpack:///./src/app/service/map.service.ts","webpack:///./src/app/service/nearbyFeatures.service.ts","webpack:///./src/app/service/pagination.service.ts","webpack:///./src/app/service/slider.service.ts","webpack:///./src/app/service/user-context.service.ts","webpack:///./src/app/utils/load-spinner/load-spinner.component.css","webpack:///./src/app/utils/load-spinner/load-spinner.component.html","webpack:///./src/app/utils/load-spinner/load-spinner.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \".apiadresse-input{\\n    max-width: 180px;\\n}\"","module.exports = \"<!-- doc utile dans https://www.npmjs.com/package/ng2-auto-complete -->\\n<input class=\\\"apiadresse-input\\\" placeholder=\\\" {{ 'apiadresse.location' | translate }}\\\" ngui-auto-complete [(ngModel)]=\\\"selected\\\" loading-text=\\\"Chargement...\\\" [list-formatter]=\\\"myListFormatter\\\"\\n  [value-formatter]=\\\"myValueFormatter\\\" (valueChanged)=\\\"onSelect($event)\\\" [source]=\\\"observableSource.bind(this)\\\" no-match-found-text=\\\"Pas de rsultat\\\" />\\n\\n<!--\\n    <br/>selected model: {{selected | json}}<br/><br/>\\n-->\"","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from \"@angular/platform-browser\";\nimport { Observable } from 'rxjs';\nimport {  URLSearchParams, Response } from '@angular/http';\nimport { HttpClient,HttpParams } from '@angular/common/http';\nimport { Headers, RequestOptions } from '@angular/http';\nimport 'rxjs/add/observable/of';\nimport { map } from 'rxjs/operators';\n\ndeclare var _paq: any;\n\n@Component({\n  selector: 'app-apiadresse',\n  templateUrl: './apiadresse.component.html',\n  styleUrls: ['./apiadresse.component.css']\n})\nexport class ApiAdresseComponent implements OnInit {\n\n  values = [];\n  value = '';\n  selected: any;\n  longitude = null;\n  latitude = null;\n\n  @Output()\n  public citySelected = new EventEmitter();\n\n  constructor( public http: HttpClient, private _sanitizer: DomSanitizer) { }\n\n  observableSource = (keyword: any): Observable<any[]> => {\n\n    let url: string =\n      'https://api3.geo.admin.ch/rest/services/api/SearchServer?'\n    if (keyword) {\n      var parametres = new HttpParams();\n      parametres=parametres.set('searchText', keyword);\n      parametres=parametres.set('type','locations');\n      if (this.latitude && this.longitude) {\n        parametres=parametres.set('lat', this.latitude);\n        parametres=parametres.set('lon', this.longitude);\n      }\n    \n      return this.http.get(url,\n        { params: parametres })\n        .pipe(map(res => {\n          return res['results'];\n        }))\n    } else {\n      return Observable.of([]);\n    }\n  }\n\n  myListFormatter = (data: any) => {\n    let html = `<div style=\"line-height: 100%; font-size: small\"><b>${data[\"attrs\"][\"label\"]}</b></div>`;\n    return this._sanitizer.bypassSecurityTrustHtml(html);\n  }\n\n  myValueFormatter(data: any): string {\n    return `${data[\"attrs\"][\"detail\"]}`;\n  }\n\n  ngOnInit() {\n  }\n\n  onSelect(event) {\n    this.citySelected.emit(this.selected);    \n    _paq.push(['trackEvent', 'api_adresse', true])\n  }\n\n\n}\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpModule } from '@angular/http';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\r\nimport { NguiAutoCompleteModule } from '@ngui/auto-complete';\r\nimport { ApiAdresseComponent } from './apiadresse/apiadresse.component';\r\nimport { AppComponent } from './app/app.component';\r\nimport { FeaturePanelComponent } from './feature-panel/feature-panel.component';\r\nimport { MainComponent } from './main/main.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { MapComponent } from './map/map.component';\r\nimport { MapPanelSwitcherComponent } from './map-panel-switcher/map-panel-switcher.component';\r\nimport { LegendComponent } from './map-panel-switcher-components/legend/legend.component';\r\nimport { MapControllerComponent } from './map-panel-switcher-components/map-controller/map-controller.component';\r\nimport { LayerTreeComponent } from './map-panel-switcher-components/layer-tree/layer-tree.component';\r\nimport { OrderByPipeComponent } from './orderbypipe/orderbypipe.component';\r\nimport { LayerChangeService } from './service/layer-change.service';\r\nimport { MapService } from './service/map.service';\r\nimport { PermalinkComponent } from './permalink/permalink.component';\r\nimport { UserContextService } from './service/user-context.service';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FeatureMainInfoComponent } from './feature-panel-components/feature-main-info/feature-main-info.component';\r\nimport { ChangesMainComponent } from './changes/changes-main/changes-main.component';\r\nimport { ChangesDetailledMapComponent } from './changes/changes-detailled-map/changes-detailled-map.component';\r\nimport { ChangeDetailsComponent } from './changes/change-details/change-details.component';\r\nimport { ChangesConfigPanelComponent } from './changes/changes-config-panel/changes-config-panel.component';\r\nimport { ChangesMapComponent } from './changes/changes-map/changes-map.component';\r\nimport { MyDateRangePickerModule } from 'mydaterangepicker';\r\nimport { ConfigService } from './service/config.service';\r\nimport { HelpComponent } from './help-components/help/help.component';\r\nimport { HelpChangeTypeComponent } from './help-components/help-subsection/help-subsection.component';\r\nimport { Ng5SliderModule } from 'ng5-slider';\r\nimport { LoadSpinnerComponent } from './utils/load-spinner/load-spinner.component';\r\nimport { LayerAttributeTableComponent } from './layer-attribute-table/layer-attribute-table.component';\r\n\r\nimport { DraggableDirective } from './common/directive/draggable.directive';\r\n\r\nimport {TranslateModule, TranslateLoader} from '@ngx-translate/core';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n\r\n\r\n\r\n// Define the routes\r\nconst ROUTES: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: '/carte',\r\n    pathMatch: 'full',\r\n  },\r\n  { \r\n    path : 'changements-aide',\r\n    component : HelpComponent,\r\n    data : {title : 'Aide au suivi de changement'}\r\n  },\r\n  {\r\n    path: 'carte',\r\n    component: MainComponent,\r\n    data: { title: 'Portail' }\r\n  },\r\n  {\r\n    path: 'changements',\r\n    component: ChangesMainComponent,\r\n    data: { title: 'Suivi de changement' }\r\n  },\r\n  { path: '**', redirectTo: '/carte' },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ApiAdresseComponent,\r\n    AppComponent,\r\n    FeaturePanelComponent,\r\n    MainComponent,\r\n    HeaderComponent,\r\n    MapComponent,\r\n    MapPanelSwitcherComponent,\r\n    LegendComponent,\r\n    MapControllerComponent,\r\n    LayerTreeComponent,\r\n    OrderByPipeComponent,\r\n    PermalinkComponent,\r\n    FeatureMainInfoComponent,\r\n    ChangesMainComponent,\r\n    ChangesDetailledMapComponent,\r\n    ChangeDetailsComponent,\r\n    ChangesConfigPanelComponent,\r\n    ChangesMapComponent,\r\n    HelpComponent,\r\n    HelpChangeTypeComponent,\r\n    LoadSpinnerComponent,\r\n    LayerAttributeTableComponent,\r\n    DraggableDirective,\r\n   \r\n  ],\r\n  imports: [ \r\n    NguiAutoCompleteModule,\r\n    BrowserModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    HttpClientModule,\r\n    RouterModule.forRoot(\r\n      // [\r\n      //   {\r\n      //     path: 'carte',\r\n      //     component: MainComponent\r\n      //   }\r\n      // ]\r\n      ROUTES\r\n      ),\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n          provide: TranslateLoader,\r\n          useFactory: HttpLoaderFactory,\r\n          deps: [HttpClient]\r\n      }\r\n    }),\r\n    RouterModule.forRoot(ROUTES),\r\n    MyDateRangePickerModule,\r\n    Ng5SliderModule\r\n  ],\r\n  providers: [\r\n    ConfigService,\r\n    MapService,\r\n    LayerChangeService, \r\n    UserContextService,\r\n    {provide: LocationStrategy, useClass: HashLocationStrategy}\r\n  ],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule { }\r\n\r\n\r\n// required for AOT compilation\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}","module.exports = \"\"","module.exports = \"<router-outlet></router-outlet>\\n\"","import { Component } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\n\nimport {TranslateService} from '@ngx-translate/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n\n  /*\n  * From CH-OSM-website : app.component.ts\n   */\n\n  /*\n  * FROM https://stackoverflow.com/questions/38644314/changing-the-page-title-using-the-angular-2-new-router\n   */\n  constructor(titleService:Title, router:Router, activatedRoute:ActivatedRoute, private translate: TranslateService) {\n    translate.setDefaultLang('fr');\n    router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        const title = this.getTitle(router.routerState, router.routerState.root).join('-');\n        titleService.setTitle(title);\n      }\n    });\n  }\n\n  // collect that title data properties from all child routes\n  // there might be a better way but this worked for me\n  getTitle(state, parent) {\n    const data = [];\n    if (parent && parent.snapshot.data && parent.snapshot.data.title) {\n      data.push(parent.snapshot.data.title);\n    }\n\n    if (state && parent) {\n      data.push(... this.getTitle(state, state.firstChild(parent)));\n    }\n    return data;\n  }\n\n  //use language selected\n  useLanguage(language: string) {\n    this.translate.use(language);\n}\n\n}\n","module.exports = \"#detailspanel-close.toggle {\\n    position:absolute;\\n    right:0px;\\n    margin: 5px 5px 0 0;\\n    line-height: .5;\\n}\\n\\n/* The panel is hidden when the close button is pushed */\\n\\n#detailspanel {\\n    margin-right: -600px;\\n    right: 0;\\n    top: 0vw;\\n    width: 600px;\\n    position: fixed;\\n    height: 100%;\\n    overflow: auto;\\n    z-index: 1000;\\n    transition: all 0.5s ease-in 0s;\\n    -webkit-transition: all 0.5s ease-in 0s;\\n    -moz-transition: all 0.5s ease-in 0s;\\n    -ms-transition: all 0.5s ease-in 0s;\\n    -o-transition: all 0.5s ease-in 0s;\\n    background-color: rgba(255, 255, 255, 0.8);\\n  }\\n\\n#detailspanel.active {\\n    right: 600px;\\n    width: 600px;\\n    transition: all 0.5s ease-out 0s;\\n    -webkit-transition: all 0.5s ease-out 0s;\\n    -moz-transition: all 0.5s ease-out 0s;\\n    -ms-transition: all 0.5s ease-out 0s;\\n    -o-transition: all 0.5s ease-out 0s;\\n  }\\n\\n#changeType, #dropdownMenuButton{\\n  text-align:center;\\n  /* right:2%; */\\n  position:relative;\\n  margin-left:auto;\\n  margin-right:auto;\\n  width:97%;\\n}\\n\\n.dropdown-menu{\\n  width:97%;\\n  /* text-align:center; */\\n}\\n\\n.cercle {\\n\\twidth: 12px;\\n\\theight: 12px;\\n\\tborder-radius: 50%;\\n\\tmargin : 5px 20px auto 5px;\\n  }\\n\\n.metadata-circle {\\n  cursor:pointer;\\n  display: inline-block;\\n  width: 16px;\\n  height: 16px;\\n  border-radius: 50%;\\n  font-size: 10px;\\n  color: #fff;\\n  line-height: 12px;\\n  text-align: center;\\n  background: #CC1517;\\n}\\n\\ntable th{\\n  vertical-align: middle;\\n\\n}\\n\\ntable#tags thead .th{\\n  text-align:center;\\n}\\n\\n.logo{\\n  padding-left: 5px;\\n  padding-right: 5px;\\n}\\n\\ntable#tags{\\n  width:97%;\\n  line-height:0.8em;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-bottom:1px;\\n  word-break: break-word;\\n  -webkit-hyphens:auto;\\n      -ms-hyphens:auto;\\n          hyphens:auto;\\n}\\n\\na[href]{\\n  padding-left:2px;\\n  padding-right:2px;\\n}\\n\\n/* slider */\\n\\n.custom-slider .ng5-slider .ng5-slider-tick {\\n       z-index: 1000;\\n   }\\n\\n.custom-slider .ng5-slider .ng5-slider-selection {\\n     background: orange;\\n   }\\n\\n/* \\n We need to use ::ng-deep to overcome view encapsulation\\n::ng-deep {\\n  .custom-slider .ng5-slider .ng5-slider-bar {\\n    background:#ffe4d1;\\n    height: 2px;\\n    opacity: 0.1;\\n  }*/\\n\\n/* ::ng-slider .custom-slider .ng5-slider .ng5-slider-selection {\\n     background: orange;\\n   }\\n    */\\n\\n::ng-deep .custom-slider .ng5-slider .ng5-slider-pointer {\\n    width: 8px;\\n    height: 25px;\\n    top: auto; /*to remove the default positioning*/\\n    bottom: -10px;\\n    background-color: #333;\\n    border-top-left-radius: 3px;\\n    border-top-right-radius: 3px;\\n  }\\n\\n::ng-deep .custom-slider .ng5-slider .ng5-slider-pointer:after {\\n    display: none;\\n  }\\n\\n::ng-deep .custom-slider .ng5-slider .ng5-slider-bubble {\\n    bottom: 14px;\\n  }\\n\\n::ng-deep .custom-slider .ng5-slider .ng5-slider-tick-legend{\\n    max-width: none;\\n    font-size : 0.7em;\\n  }\\n\\n/* ::ng-deep .custom-slider .ng5-slider .ng5-slider-limit {\\n     font-weight: bold;\\n     color: orange;\\n   } */\\n\\n::ng-deep .custom-slider .ng5-slider .ng5-slider-tick {\\n    width: 2px;\\n    height: 20px;\\n    margin-left: 4px;\\n    border-radius: 0;\\n    top: -1px;\\n    background-color : black !important;\\n    left:10px;\\n  }\\n\\n/* ::ng-deep .custom-slider .ng5-slider .ng5-slider-ticks .ng5-slider-tick.ng5-slider-selected {\\n     background-color: blue !important;\\n   } */\\n\\napp-load-spinner{\\n  display: table;\\n  margin: 0 auto;\\n}\\n\"","module.exports = \"<div class=\\\"card row active\\\" id=\\\"detailspanel\\\">\\n    <div id=\\\"details-panel-nav\\\" style=\\\"width:100%;\\\">\\n        <a id=\\\"detailspanel-close\\\" href=\\\"#/changements\\\" class=\\\"btn btn-outline-secondary btn-sm toggle\\\">\\n            <b class=\\\"glyphicon glyphicon-remove\\\">X</b>\\n        </a>\\n        <!-- Title -->\\n        <div class=\\\"card-header p-2 text-center\\\" role=\\\"tab\\\" id=\\\"headingDetailsPanel\\\" style=\\\"word-wrap: break-word;\\\">\\n            <b>{{ 'change.info' | translate }}</b>\\n        </div>\\n        <app-load-spinner *ngIf=\\\"displayLoadSpinner\\\"></app-load-spinner>\\n        <div *ngIf=\\\"selectedFeatures.length>1\\\" id=\\\"featuresNearbyArray\\\">\\n            <div class=\\\"dropdown\\\">\\n                <button class=\\\"btn btn-secondary btn-lg btn-block btn-sm dropdown-toggle\\\" type=\\\"button\\\" id=\\\"dropdownMenuButton\\\" \\n                data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" style=\\\"font-size:0.8em;\\\">\\n                    <a>{{selectedFeatures.length-1}} {{ 'change.elements' | translate }}</a> <!-- -1 because the selectedFeature is in the selectedFeatureS -->\\n                </button>\\n                <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenuButton\\\">\\n                    <ng-container *ngFor=\\\"let feature of selectedFeatures\\\">\\n                        <button *ngIf=\\\"feature != selectedFeature\\\" class=\\\"dropdown-item\\\" (click)=\\\"onSelect(feature)\\\">\\n                            <span style=\\\"text-align:left;float:left; text-transform : capitalize;\\\">{{this.mapService.getOsmTypeOfFeature(feature.get('osmId'), feature.get('geom_type'))}} {{feature.get('osmId') > 0 ? feature.get('osmId') : feature.get('osmId')*(-1) }}</span>\\n                            <div style=\\\"text-align:right;float:right;\\\" class=\\\"cercle\\\" [ngStyle]=\\\"{'background-color' : getColor(feature.get('changeType'))}\\\"></div>\\n                        </button>\\n                        <!-- [ngStyle]=\\\"{'background-color': changeTypesList.filter(x => x.id === feature.get('changeType'))[0].relatedColor.getRGBA()}\\\" -->\\n                    </ng-container>\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n        <div id=\\\"detailsContainer\\\" *ngIf=\\\"mainChange\\\" style=\\\"position:relative;\\\">\\n        <div style=\\\"text-transform : capitalize;\\\">\\n            <p style=\\\"text-align: left; width:50%; display: inline-block;\\\">\\n                <a style=\\\"font-size:1.5rem;margin-left:10px;margin-right:5px;\\\"><b>{{osmType}} {{osmId}}</b></a>\\n                <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmDotOrg_obj')\\\" title=\\\"Voir l'objet sur openstreetmap.org\\\" target=\\\"_blank\\\" href=\\\"https://www.openstreetmap.org/{{osmType}}/{{osmId}}\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a>\\n            </p>\\n\\n            <p style=\\\"text-align: right; width:50%;  display: inline-block;\\\">\\n                <a (click)=\\\"onExternalOSMToolSelected('osmHistBrowser')\\\" title=\\\"Comparer les diffrentes versions sur OSM History Browser\\\" target=\\\"_blank\\\" href=\\\"http://osm.virtuelle-loipe.de/history/?type={{osmType}}&ref={{osmId}}\\\"><span class=\\\"badge badge-info\\\">History Browser</span></a>\\n                <a (click)=\\\"onExternalOSMToolSelected('osmHistViewer')\\\" title=\\\"Comparer et visualiser les diffrentes versions sur OSM History Viewer\\\" target=\\\"_blank\\\" href=\\\"https://pewu.github.io/osm-history/#/{{osmType}}/{{osmId}}\\\"><span class=\\\"badge badge-info\\\">History Viewer</span></a>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"custom-slider\\\" style=\\\"width:90%;margin: 0px auto 5px auto\\\">\\n            <ng5-slider [hidden]=\\\"!displaySlider\\\" \\n                [(value)]=\\\"minValue\\\"\\n                [(highValue)]=\\\"maxValue\\\"\\n                [options]=\\\"options\\\"\\n                (userChangeEnd)=\\\"onUserChangeEnd($event)\\\"\\n                [manualRefresh]=\\\"manualRefresh\\\"\\n                style=\\\"margin-bottom:30px;\\\">\\n            </ng5-slider>\\n        </div>\\n        \\n\\n            <div id=\\\"top_infos\\\" style=\\\"background-color: rgba(255,255,255,0.3);\\\">\\n\\n                <div id=\\\"changeType\\\">\\n                    <div *ngIf=\\\"noChangeInInterval; else badge\\\" class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n                        {{ 'change.interval' | translate }}\\n                    </div>\\n                    <ng-template #badge>\\n                        <h4><span class=\\\"badge badge-secondary\\\" [ngStyle]=\\\"{'background-color': changeType.relatedColor.getRGBA()}\\\">{{changeType.name}}</span></h4>\\n                    </ng-template>\\n                </div>\\n\\n                <app-changes-detailled-map\\n                [hidden]=\\\"!userContext\\\"\\n                [userContext]=\\\"userContext\\\"\\n                [mainChange]=\\\"mainChange\\\"\\n                [changeTypesList]=\\\"changeTypesList\\\"\\n                id=\\\"MapChangement\\\">\\n                </app-changes-detailled-map>\\n\\n\\n                <table class=\\\"table table-bordered\\\" style=\\\"width:97%;line-height:0.8em;margin: 2px auto 5px auto\\\">\\n                    <colgroup>\\n                        <col style=\\\"width:50%;\\\">\\n                        <col style=\\\"width:50%;\\\">\\n                    </colgroup>\\n                    <tbody>\\n                        <tr>\\n                            <th>{{ 'change.timestamp' | translate }} (UTC)</th>\\n                            <td>{{timestampDate.toLocaleString('fr-FR', {timeZone: 'UTC'})}}</td>\\n                        </tr>\\n                        <tr *ngIf=\\\"lastUser\\\">\\n                            <th style=\\\"vertical-align: middle;\\\">{{ 'change.user' | translate }}</th>\\n                            <td>\\n                                <a>{{lastUser}}</a>\\n                                <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmDotOrg_user')\\\" title=\\\"Voir l'utilisateur sur openstreetmap.org\\\" target=\\\"_blank\\\" href=\\\"https://www.openstreetmap.org/user/{{lastUser}}\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a>\\n                            </td>\\n                        </tr>\\n                        <tr *ngIf=\\\"lastChangeset\\\" >\\n                            <th>{{ 'change.changeset' | translate }}\\n                                <a class=\\\"metadata-circle\\\" target=\\\"_blank\\\" href=\\\"https://wiki.openstreetmap.org/wiki/FR:Groupes_de_modifications\\\" title=\\\"Voir la dfinition sur le wiki\\\"><b>?</b></a>\\n                            </th>\\n                            <td>\\n                                <a>{{lastChangeset}}</a>\\n                                <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmDotOrg_chset')\\\" title=\\\"Voir le changeset sur openstreetmap.org\\\" target=\\\"_blank\\\" href=\\\"https://www.openstreetmap.org/changeset/{{lastChangeset}}\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a>\\n                                <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmCha')\\\" title=\\\"Analyse du changeset sur OSMCha\\\" target=\\\"_blank\\\" href=\\\"https://osmcha.mapbox.com/changesets/{{lastChangeset}}/\\\"><img src=\\\"https://osmcha.mapbox.com/favicon.ico\\\" style=\\\"height:25px;width:25px;\\\"></a>\\n                            </td>\\n                        </tr>\\n                        <tr *ngIf=\\\"transitionalChangesetMap && transitionalChangesetMap.size > 0\\\">\\n                            <th>{{ 'change.transitions' | translate }}\\n                                <a class=\\\"metadata-circle\\\" target=\\\"_blank\\\" href=\\\"https://wiki.openstreetmap.org/wiki/FR:Groupes_de_modifications\\\" title=\\\"Voir la dfinition sur le wiki\\\"><b>?</b></a>\\n                            </th>\\n                            <td>\\n                                <div *ngFor=\\\"let changeset of transitionalChangesetMap | keyvalue \\\">\\n                                    <a>v{{changeset.key}} : {{changeset.value}}</a>\\n                                    <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmDotOrg_chset')\\\" title=\\\"Voir le changeset sur openstreetmap.org\\\" target=\\\"_blank\\\" href=\\\"https://www.openstreetmap.org/changeset/{{changeset.value}}\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a>\\n                                    <a class=\\\"logo\\\" (click)=\\\"onExternalOSMToolSelected('osmCha')\\\" title=\\\"Analyse du changeset sur OSMCha\\\" target=\\\"_blank\\\" href=\\\"https://osmcha.mapbox.com/changesets/{{changeset.value}}/\\\"><img src=\\\"https://osmcha.mapbox.com/favicon.ico\\\" style=\\\"height:25px;width:25px;\\\"></a>\\n                                </div>\\n                            </td>\\n                        </tr>\\n                    </tbody>\\n                </table>\\n            </div>\\n            <table class=\\\"table table-hover table-bordered\\\" id=\\\"tags\\\">\\n                <colgroup>\\n                    <col style=\\\"width:30%\\\">\\n                    <col *ngIf=\\\"mainChange.versionOld\\\" style=\\\"width:35%;\\\">\\n                    <col *ngIf=\\\"mainChange.versionNew\\\" style=\\\"width:35%;\\\">\\n                </colgroup>\\n                <thead>\\n                    <tr style=\\\"text-align: center\\\">\\n                        <th>Version</th>\\n                        <th *ngIf=\\\"mainChange.versionOld\\\">{{mainChange.versionOld}}</th>\\n                        <th *ngIf=\\\"mainChange.versionNew\\\">{{mainChange.versionNew}}</th>\\n                    </tr>\\n                </thead>\\n                <tbody>\\n                    <tr *ngFor=\\\"let tag of tagsList\\\" [ngClass]=\\\"getHTMLTableClass(tag)\\\">\\n                        <th>{{tag.key}}</th>\\n                        <td *ngIf=\\\"mainChange.versionOld\\\">{{tag.valueOld ? tag.valueOld.replace(deleteDoubleApostrophe,\\\"'\\\") : \\\"\\\"}}</td>\\n                        <td *ngIf=\\\"mainChange.versionNew\\\">{{tag.valueNew ? tag.valueNew.replace(deleteDoubleApostrophe,\\\"'\\\") : \\\"\\\"}}</td>\\n                    </tr>\\n                </tbody>\\n            </table>\\n        </div>\\n    </div>\\n</div>\\n\"","import { Component, OnInit, Input, OnChanges, EventEmitter } from '@angular/core';\nimport { ApiRequestService } from 'app/service/api-request.service';\nimport { MapService } from 'app/service/map.service';\nimport { SliderService } from 'app/service/slider.service';\nimport { FeatureChangesRequest } from 'app/model/ChangesClasses/FeatureChangesRequest';\nimport { RequestOptions, RequestMethod, Headers} from '@angular/http';\nimport { Change } from 'app/model/ChangesClasses/Change';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { Tag } from 'app/model/ChangesClasses/Tag';\nimport { UserContext } from 'app/model/UserContext';\nimport { Options, LabelType } from 'ng5-slider';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n\ndeclare var $: any;\ndeclare var _paq : any;\n\n@Component({\n  selector: 'app-change-details',\n  templateUrl: './change-details.component.html',\n  styleUrls: ['./change-details.component.css']\n})\nexport class ChangeDetailsComponent implements OnInit, OnChanges {\n\n  @Input() selectedFeatures : any;\n  @Input() changeTypesList : Array<ChangeType>;\n  @Input() userContext : UserContext;\n\n  private panelOpen = true;\n  public displayLoadSpinner: boolean = false;\n\n  public selectedFeature;\n  public featureChangesRequest : FeatureChangesRequest = new FeatureChangesRequest();\n  public featureChangesList : Array<Change>;\n  public mainChange : Change;\n  public changeType : ChangeType;\n  public timestampDate : Date;\n  public tagsList : Array<Tag>;\n  public mapLoader : boolean = false;\n  public osmType : string;\n  public lastUser : string;\n  public lastChangeset : string;\n  public osmId : number;\n  private numberOfChangesToDisplay : number;\n  public transitionalChangesetMap : Map<number,number>; //<version, changesetNumber>\n  public noChangeInInterval : boolean = false;\n  // To replace double apostrophes in hstore by only one.\n  public deleteDoubleApostrophe : RegExp = new RegExp(\"''\");\n  \n  //slider\n  public displaySlider : boolean = false;\n  public minValue: number;\n  public maxValue: number;\n  public options: Options;\n  public manualRefresh: EventEmitter<void> = new EventEmitter<void>();\n  public background : SafeStyle = this.sanitizer.bypassSecurityTrustStyle('rgba(100,100,100)');\n\n  constructor(\n    public apiRequestService : ApiRequestService,\n    public mapService : MapService,\n    public sliderService : SliderService,\n    private sanitizer : DomSanitizer\n  ) { }\n\n  ngOnInit() {\n    this.selectedFeature = this.selectedFeatures[0];\n    var self=this;\n    $(\"#detailspanel-close\").click(function(e) {\n      console.log(\"Au clic sur la croix !\")\n      self.mapService.clearSelection();\n      e.preventDefault();\n      $(\"#detailspanel\").toggleClass(\"active\");\n      self.panelOpen=false;\n    });\n  }\n\n  ngOnChanges(...args: any[]){\n    this.selectedFeature = this.selectedFeatures[0];\n    this.mapService.addFeatureToSelection(this.selectedFeature);\n    this.setFeatureChangesRequest();\n    this.getFeatureChanges();\n    if (!this.panelOpen) { //si le panel est ferm, on l'ouvre\n      console.log('onChange fired');\n      console.log('changing', args);\n      this.panelOpen = true;\n      if(!$(\"#detailspanel\").hasClass(\"active\")) {\n        $(\"#detailspanel\").toggleClass(\"active\");\n      }\n    }\n     //// Matomo\n     _paq.push(['trackEvent', 'change-feature_selected', true])\n  }\n\n  onSelect(feature){\n    this.selectedFeature = feature;\n    this.mapService.clearSelection();\n    this.mapService.addFeatureToSelection(this.selectedFeature);\n\n    this.setFeatureChangesRequest();\n    this.getFeatureChanges();\n  }\n\n  public setFeatureChangesRequest(){\n    this.featureChangesRequest.osm_id = this.selectedFeature.get('osmId');\n    this.featureChangesRequest.type = this.selectedFeature.get('geom_type');\n    this.featureChangesRequest.beginDate = this.apiRequestService.beginDate;\n    this.featureChangesRequest.endDate = this.apiRequestService.endDate;\n    this.featureChangesRequest.thematic = this.apiRequestService.thematic.id;\n  }\n\n  public getFeatureChanges(){\n    this.displayLoadSpinner=true;\n    var headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    headers.append('Accept', 'application/json');\n    let options = new RequestOptions({\n      method: RequestMethod.Post,\n      headers : headers\n    });\n    var data = JSON.stringify(this.featureChangesRequest);\n    console.log(data);\n    this.apiRequestService.searchFeatureChanges(data, options)\n      .subscribe(\n        (res) => {\n          this.featureChangesList = JSON.parse(res['_body']);\n          console.log(this.featureChangesList);\n          this.numberOfChangesToDisplay = this.featureChangesList.length;\n          this.mainChange = this.mapService.getChangesMergeForOneFeature(JSON.parse(JSON.stringify(this.featureChangesList)));\n          this.setDataToDisplay();\n          this.initSlider();\n          this.displayLoadSpinner=false;\n        });\n  }\n\n  public setDataToDisplay(){\n    this.osmId = Math.abs(this.mainChange.osmId);\n    this.osmType = this.mapService.getOsmTypeOfFeature(this.mainChange.osmId, this.mainChange.type);\n    this.changeType = this.changeTypesList.filter(x => x.id === this.mainChange.changeType)[0];\n    this.timestampDate = new Date(this.mainChange.timestamp);\n    this.lastUser = this.mainChange.tagsNew ? this.mainChange.tagsNew.osm_user : undefined;\n    this.lastChangeset = this.mainChange.tagsNew ? this.mainChange.tagsNew.osm_changeset : undefined;\n\n    this.getTagsList();\n    if (this.mainChange.changeType == 6){\n      var xmlhttp= new XMLHttpRequest();\n      xmlhttp.onreadystatechange = function() {\n        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n          var xmlDoc = xmlhttp.responseXML;\n          let x = xmlDoc.getElementsByTagName(this.osmType);\n          for (let i = 0; i< x.length; i++){\n            if (x[i].attributes.getNamedItem(\"visible\").value == \"false\" || i == x.length - 1){\n              this.timestampDate = new Date(x[i].attributes.getNamedItem(\"timestamp\").value);\n              this.lastUser = x[i].attributes.getNamedItem(\"user\").value;\n              this.lastChangeset=x[i].attributes.getNamedItem(\"changeset\").value;\n              this.mainChange.versionNew = x[i].attributes.getNamedItem(\"version\").value;\n            }\n          }\n          this.getTransitionalChangesets(); \n        } \n      }.bind(this);\n      xmlhttp.open(\"GET\", \"https://www.openstreetmap.org/api/0.6/\"+this.osmType+\"/\"+this.osmId+\"/history\", true);\n      xmlhttp.send();\n    } else {\n    this.getTransitionalChangesets();\n    }\n  }\n\n  public getTransitionalChangesets(){\n    let transitionalVersionArray = [];\n    this.transitionalChangesetMap = new Map<number, number>();\n    // (If creation and more than 2 changes) OR (if deletion and more than 2 changes) OR (if versionOld and versionNew exists and more than 2 changes)\n    if ((this.mainChange.changeType==1 || this.mainChange.versionNew > 1) || (this.mainChange.changeType == 6 || this.mainChange.versionNew || this.mainChange.versionNew > this.mainChange.versionOld + 1 ) || (this.mainChange.versionNew && this.mainChange.versionOld && this.mainChange.versionNew - 1 > this.mainChange.versionOld)){\n      \n      for (var i = (this.mainChange.versionOld ? this.mainChange.versionOld : 0) + 1; i < (this.mainChange.versionNew); i++){\n        transitionalVersionArray.push(i); //We have all the versions numbers we have to find !\n      }\n\n      var xmlhttp= new XMLHttpRequest();\n      xmlhttp.onreadystatechange = function() {\n        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n          var xmlDoc = xmlhttp.responseXML;\n          let x = xmlDoc.getElementsByTagName(this.osmType);\n          for (let i = 0; i< x.length; i++){\n            if (transitionalVersionArray.indexOf(Number(x[i].attributes.getNamedItem(\"version\").value))>-1){\n              this.transitionalChangesetMap.set(Number(x[i].attributes.getNamedItem(\"version\").value), x[i].attributes.getNamedItem(\"changeset\").value);\n            }\n          } \n        } \n      }.bind(this);\n    xmlhttp.open(\"GET\", \"https://www.openstreetmap.org/api/0.6/\"+this.osmType+\"/\"+this.osmId+\"/history\", true);\n    xmlhttp.send();\n\n    }\n  }\n\n\n  public getTagsList(){\n    this.tagsList = [];\n    let keys = new Array<string>();\n    let usedKeys = new Array<string>();\n    if (this.mainChange.tagsNew != null){\n      keys = keys.concat(Object.keys(this.mainChange.tagsNew));\n    }\n    if (this.mainChange.tagsOld != null){\n      keys = keys.concat(Object.keys(this.mainChange.tagsOld));\n    }\n    keys.forEach(key => {\n      if (['osm_changeset','osm_uid', 'osm_user'].indexOf(key) <0 && usedKeys.indexOf(key) < 0){\n        this.tagsList.push(new Tag(key, this.mainChange.tagsNew === null ? null : this.mainChange.tagsNew[key], this.mainChange.tagsOld === null ? null : this.mainChange.tagsOld[key]))\n        usedKeys.push(key);\n      }  \n    });\n  }\n\n  public getHTMLTableClass(tag : Tag){\n    if (tag.valueNew == null){\n      return 'table-danger'\n    }\n    if (tag.valueOld == null){\n      return 'table-success'\n    }\n    if (tag.valueNew != tag.valueOld){\n      return 'table-warning'\n    }\n  }\n\n  // Slider part //\n  public initSlider(){\n    this.sliderService.initSlider(this.featureChangesRequest.beginDate, this.featureChangesRequest.endDate, this.featureChangesList, this.changeType);\n\n    this.minValue = this.sliderService.getMinValue();\n    this.maxValue = this.sliderService.getMaxValue();\n    this.options = this.sliderService.getOptions();\n    this.options.getSelectionBarColor = (minValue : number, maxValue : number): string => {\n      return this.changeType.relatedColor.getRGBA();\n    }\n    this.displaySlider = true;\n  \n  }\n\n  public onUserChangeEnd(event){\n\n    let changesList = [];\n    var numberofChangesOld = this.numberOfChangesToDisplay;\n    this.featureChangesList.forEach(change => {\n      let changeTime = new Date(change.timestamp).getTime();\n      if (changeTime > event.value && changeTime < event.highValue/*+1000*60*60*24*/){\n        changesList.push(change);\n      }\n    })\n    this.numberOfChangesToDisplay = changesList.length;\n    if (numberofChangesOld != this.numberOfChangesToDisplay){\n      console.log(changesList);\n      if (changesList.length>0){\n        this.noChangeInInterval = false;\n        this.mainChange = this.mapService.getChangesMergeForOneFeature(JSON.parse(JSON.stringify(changesList)));\n        this.setDataToDisplay();\n        //refresh the slider to change the color of the bar\n        this.manualRefresh.emit();\n      } else {\n        this.noChangeInInterval = true;\n      }\n    }\n  }\n\n  public getColor(changeTypeId : number){\n    var changeType : ChangeType = this.changeTypesList.filter(x => x.id === changeTypeId)[0];\n    return changeType.relatedColor.getRGBA();\n  }\n\n  public onExternalOSMToolSelected(tool_name: string){\n    _paq.push(['trackEvent', 'change-ext_osmtool_selected', tool_name])\n  }\n}\n","module.exports = \".body{\\n    background-clip: border-box;\\n    border: 1px solid rgba(0,0,0,.125);\\n    background-color: rgba(255,255,255,0.8);\\n    border-radius: .25rem;\\n    overflow-y: auto;\\n    max-height:80vh;\\n}\\n\\nform{\\n    margin-bottom: 5px;\\n}\\n\\n.title{\\n    font-size:1rem;\\n    font-weight: bolder;\\n    text-align: center !important;\\n    margin:5px;\\n}\\n\\n.invalid-tooltip{\\n    position: relative;\\n}\\n\\n#report{\\n    border:15px;\\n}\\n\\ntable{\\n    width:100%;\\n}\\n\\n.reportTable{\\n    font-size: 0.8em;\\n    border:2px;\\n}\\n\\n.metadata-circle {\\n    cursor:pointer;\\n    display: inline-block;\\n    width: 14px;\\n    height: 14px;\\n    border-radius: 50%;\\n    font-size: 10px;\\n    color: #fff;\\n    line-height: 12px;\\n    text-align: center;\\n    background: #CC1517;\\n  }\\n\\n.categorie{\\n    padding-left:5px;\\n}\\n\\napp-load-spinner{\\n    display: table;\\n    margin: 0 auto;\\n}\\n\\n.alert{\\n    text-align:center;\\n    padding:5px;\\n    font-size:80%\\n}\\n\"","module.exports = \"<div class=\\\"body\\\">\\n  <div>\\n    <div class=\\\"card-header p-2 text-center\\\" style=\\\"word-wrap: break-word;\\\">\\n        <b>Rechercher des changements</b>\\n    </div>\\n    <form [formGroup]=\\\"changesFilterForm\\\" class=\\\"container\\\" novalidate>\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"mydaterange\\\" style=\\\"margin-top:5px\\\">Priode de temps</label>\\n        <my-date-range-picker id=\\\"mydaterange\\\" name=\\\"mydaterange\\\" placeholder=\\\"Dates de dbut et de fin\\\"\\n          [options]=\\\"myDateRangePickerOptions\\\" [selDateRange]=\\\"model\\\" formControlName=\\\"dates\\\" required></my-date-range-picker>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"thematicSelection\\\">Thmatique</label>\\n        <select class=\\\"custom-select mr-sm-2\\\" id=\\\"thematicSelection\\\" formControlName=\\\"thematic\\\" required>\\n          <ng-container *ngFor=\\\"let category of categoryMap | keyvalue\\\">\\n            <option class=\\\"mb-2 bg-secondary text-white\\\" disabled>{{category.key}}</option>\\n            <ng-container *ngFor=\\\"let thematic of category.value\\\">\\n              <option value=\\\"{{thematic.id}}\\\">{{thematic.name}}</option>\\n            </ng-container>\\n          </ng-container>\\n        </select>\\n        <div *ngIf=\\\"thematic.invalid && (thematic.dirty || thematic.touched)\\\" class=\\\"alert alert-danger\\\">\\n          <div *ngIf=\\\"thematic.errors.required\\\">\\n            Slectionnez une thmatique\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"zone\\\">Emprise gographique</label>\\n        <div id=\\\"zone\\\" style=\\\"font-size:0.8rem; margin-left:10px;\\\">\\n          Dplacez-vous sur la carte pour slectionner la zone de recherche\\n        </div>\\n      </div>\\n      <div class=submitButton style=\\\"text-align:center;padding:5px\\\">\\n        <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"onSubmit()\\\">Lancer la recherche</button>\\n      </div>\\n      <div  style=\\\"font-size:80%;text-align:center;padding:5px\\\" *ngIf=\\\"lastChange\\\">\\n        <i>Dernire mise  jour le {{lastChange.toLocaleString('fr-FR', {timeZone: 'UTC'})}}</i>\\n      </div>\\n      <app-load-spinner *ngIf=\\\"displayLoadSpinner\\\"></app-load-spinner>\\n    </form>\\n\\n    <div *ngIf=\\\"changesList && changesList.length < 1\\\" class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n      Aucun changement n'a t trouv pour cette requte.\\n    </div>\\n    <div *ngIf=\\\"changesList && changesList.length > 0 && !tooMuchResult\\\" class=\\\"alert alert-success\\\" role=\\\"alert\\\">\\n      {{changesList.length}} rsultats ont t trouvs\\n    </div>\\n    <div *ngIf=\\\"changesList && tooMuchResult\\\" class=\\\"alert alert-warning\\\">\\n      <i class='fa fa-warning' aria-hidden='true'></i>&nbsp;La taille de la rponse ({{responseSizeInMo}} Mo) est importante et  les rsultats risquent d'tre lourds  afficher.<br>\\n      Vous pouvez zoomer pour rduire la zone de recherche ou limiter la plage de dates, puis relancer la recherche ou poursuivre le chargement des donnes.<br>\\n      <button type=\\\"button\\\" class=\\\"btn btn-small btn-success\\\" (click)=\\\"showDatas()\\\">Poursuivre</button>\\n    </div>\\n    <div *ngIf=\\\"searchChangesTimedOut\\\" class=\\\"alert alert-warning\\\">\\n      <i class='fa fa-warning' aria-hidden='true'></i>&nbsp;La requte a expir. Il est possible que Le volume de changements soit trop important.<br>\\n      Vous pouvez zoomer pour rduire la zone de recherche ou limiter la plage de dates, puis relancer la recherche.<br>\\n    </div>\\n    <div *ngIf=\\\"unhandledError\\\" class=\\\"alert alert-danger\\\">\\n      <i class='fa fa-danger' aria-hidden='true'></i>&nbsp;Dsol, une erreur s'est produite.<br>\\n    </div>\\n  </div>\\n\\n  <div *ngIf=\\\"displayReport\\\" id=\\\"report\\\" style=\\\"border-top: 1px solid rgba(253, 159, 159, 0.125);\\\">\\n      <div class=\\\"card-header p-2 text-center\\\" style=\\\"word-wrap: break-word;\\\">\\n          <b>Rcapitulatif</b>\\n      </div>\\n      <div style=\\\"text-align:center; font-size:0.8em\\\">\\n        Du {{changesRequest.beginDate.toLocaleString('fr-FR', {timeZone: 'UTC'})}}\\n         au {{changesRequest.endDate.toLocaleString('fr-FR', {timeZone: 'UTC'})}}\\n      </div>\\n    <table style=\\\"border-left : 5px;max-height:100px;\\\">\\n      <tr>\\n        <th style=\\\"padding-left:5px\\\">Catgorie</th>\\n        <th style=\\\"text-align:center;\\\">Nombre d'entits</th>\\n      </tr>\\n      <tr *ngFor=\\\"let type of reportInfos | keyvalue\\\" class=\\\"reportTable\\\">\\n        <td class=\\\"categorie\\\">\\n            <a>{{type.key.short_name}}</a>\\n            <span [routerLink]=\\\"['/changements-aide']\\\" fragment=\\\"{{type.key.ref}}\\\" class=\\\"metadata-circle\\\" title=\\\"Description sur la page d'aide\\\"><b>?</b></span>\\n        </td>\\n        <td style=\\\"text-align:center\\\">{{type.value}}</td>\\n      </tr>\\n    </table>\\n  </div>\\n</div>\"","import { Component, OnInit, Input, AfterViewInit } from '@angular/core';\nimport { Http, RequestOptions, RequestMethod, Headers,Response} from '@angular/http';\nimport { Thematic } from '../../model/ChangesClasses/Thematic'\nimport { ChangesRequest } from 'app/model/ChangesClasses/ChangesRequest';\nimport { MapService } from '../../service/map.service';\nimport { ApiRequestService } from '../../service/api-request.service';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Change } from 'app/model/ChangesClasses/Change';\nimport { IMyDrpOptions, IMyDateRange } from 'mydaterangepicker';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { timeout } from 'rxjs/operators';\nimport { environment } from '../../../environments/environment';\n\ndeclare var $: any;\ndeclare var config: any;\ndeclare var _paq : any;\n\n@Component({\n  selector: 'app-changes-config-panel',\n  templateUrl: './changes-config-panel.component.html',\n  styleUrls: ['./changes-config-panel.component.css']\n})\nexport class ChangesConfigPanelComponent implements OnInit, AfterViewInit {\n\n  @Input() changeTypesList: Array<ChangeType>;\n\n  //date\n  public myDateRangePickerOptions : IMyDrpOptions;\n  public model : IMyDateRange;\n\n  //form\n  public changesFilterForm : FormGroup;\n  public criteriaFilter: any = {};\n  //data\n  private thematicsList : Array<Thematic>;\n  public categoryMap : Map<string,Array<Thematic>> = new Map<string,Array<Thematic>>();\n  public changesRequest : ChangesRequest = new ChangesRequest();\n  public selectedThematic : Thematic;\n  public changesList : Array<Change>;\n  public displayReport : boolean = false;\n\n  public displayLoadSpinner: boolean = false;\n  //to ask confirmation to user before showing results\n  public tooMuchResult:boolean = false;\n  public responseSizeInMo:number;\n  //searchChanges timeout on huge requests\n  public searchChangesTimeoutValue: number = environment.searchChangesTimeoutValue;\n  public searchChangesTimedOut: boolean = false;\n  public unhandledError: boolean = false;\n\n  //report\n  public reportInfos : Map<ChangeType, number> = new Map();\n\n  lastChange;\n  constructor(public http: Http, public mapService: MapService, public apiRequestService : ApiRequestService) { \n    \n  }\n\n  ngOnInit() {\n\n    \n    this.apiRequestService.getLastChange().subscribe(data => {\n      this.lastChange = JSON.parse(data['_body']);\n      this.lastChange = new Date(this.lastChange.timestamp);\n    });\n    this.apiRequestService.searchThematics().subscribe(data => {\n      this.thematicsList = JSON.parse(data['_body']);\n      console.log(this.thematicsList);\n      // Group thematics by category to display them\n      this.thematicsList.forEach(thematic => {\n        let value = this.categoryMap.has(thematic.category.name);\n        if (value){\n          this.categoryMap.get(thematic.category.name).push(thematic);\n        }\n        else {\n          this.categoryMap.set(thematic.category.name, [thematic]);\n        }\n      })\n      console.log(this.categoryMap);\n    })\n    let date = new Date();\n    this.initDateForm(date);\n    this.initForm();\n  }\n\n  ngAfterViewInit(){\n     let dropdownMenu = $('#mydatepicker');\n    //   // detach it and append it to the body\n       $('body').append(dropdownMenu.detach());\n  }\n\n  onSubmit(){\n    if (this.formValidation()){\n      this.searchChangesTimedOut=false;\n      this.unhandledError=false;\n      this.clearResults();\n      this.getChangesRequestValues();\n      console.log(this.selectedThematic);\n      this.changesRequest.bbox = this.mapService.getBoundingBox();\n      console.log(this.changesRequest);\n      this.emitChanges(this.changesRequest);\n    }\n  }\n  showDatas(){\n    this.tooMuchResult=false;\n    this.mapService.addChanges(this.changesList);\n    this.initReport();\n  }\n\n  public emitChanges(changesRequest : ChangesRequest){\n    this.displayLoadSpinner=true;\n    var headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    headers.append('Accept', 'application/json');\n    let options = new RequestOptions({\n      method: RequestMethod.Post,\n      headers : headers\n    });\n    var data = JSON.stringify(changesRequest);\n    console.log(data);\n    this.apiRequestService.beginDate = this.changesRequest.beginDate;\n    this.apiRequestService.endDate = this.changesRequest.endDate;\n    this.apiRequestService.thematic = this.selectedThematic;\n    this.apiRequestService.searchChanges(data, options)\n      .pipe(timeout(this.searchChangesTimeoutValue))\n      .subscribe(\n        (res:Response) => {\n          console.log(res['_body'].length/(1024*1024)+\" Mo\");\n          this.responseSizeInMo=Number((res['_body'].length/(1024*1024)).toFixed(2));\n          this.displayLoadSpinner=false;\n          this.changesList = JSON.parse(res['_body']);\n          console.log(this.changesList);\n          if(this.responseSizeInMo<config.MAX_RESPONSE_SIZE_WITHOUT_WARNING_IN_MO){\n            this.mapService.addChanges(this.changesList);\n            this.tooMuchResult=false;\n          }\n          else{\n            this.tooMuchResult=true;\n          }\n         \n          if (this.changesList.length < 1  || this.tooMuchResult){\n            this.displayReport = false;\n          } else {\n            this.initReport();\n          };\n          _paq.push(['trackEvent', 'change-thematic_search', this.selectedThematic.viewName]);\n        },\n        (err) => {\n          console.log(err)\n          this.displayLoadSpinner=false;  \n          if(err.name == \"TimeoutError\"){\n            this.searchChangesTimedOut=true;\n            _paq.push(['trackEvent', 'change-thematic_search-timeout', this.selectedThematic.viewName]);\n          } else {\n            _paq.push(['trackEvent', 'change-thematic_search-unhandledError', this.selectedThematic.viewName]);\n            this.unhandledError=true;\n          }\n        });\n  }\n\n  public getChangesRequestValues(){\n    this.changesRequest.thematic=this.changesFilterForm.controls.thematic.value;\n    this.selectedThematic = this.thematicsList.filter(x => x.id === Number(this.changesRequest.thematic))[0];\n    //To have the time in UTC and not with the local timezone.\n    let iMyBeginDate = this.changesFilterForm.controls.dates.value.beginDate;\n    let beginDate : Date = new Date(Date.UTC(iMyBeginDate.year, iMyBeginDate.month-1, iMyBeginDate.day));\n    let iMyEndDate = this.changesFilterForm.controls.dates.value.endDate;\n    let endDate : Date = new Date(Date.UTC(iMyEndDate.year, iMyEndDate.month-1, iMyEndDate.day));\n    endDate.setUTCSeconds(endDate.getUTCSeconds()-1);\n    this.changesRequest.beginDate=beginDate;\n    this.changesRequest.endDate=endDate;\n  }\n\n  initForm() {\n    this.changesFilterForm = new FormGroup({\n      'thematic': new FormControl(15,[Validators.required]),\n      'dates': new FormControl(this.model,[]),\n    });\n  }\n\n  get thematic(){return this.changesFilterForm.get('thematic'); }\n  \n  initDateForm(today: Date) {\n    var disableUntil : Date = new Date(new Date().setDate(today.getDate()-1-config.DAYS_INTERVAL_FOR_CHANGES_MONITORING));\n    var twoWeeksBefore : Date = new Date(new Date().setDate(today.getDate()-14));\n    this.myDateRangePickerOptions = {\n      // options du composant pour les deux dates\n      dayLabels: { su: \"Dim\", mo: \"Lun\", tu: \"Mar\", we: \"Mer\", th: \"Jeu\", fr: \"Ven\", sa: \"Sam\" },\n      monthLabels: { 1: \"Jan\", 2: \"Fv\", 3: \"Mar\", 4: \"Avr\", 5: \"Mai\", 6: \"Juin\", 7: \"Juil\", 8: \"Ao\", 9: \"Sep\", 10: \"Oct\", 11: \"Nov\", 12: \"Dc\" },\n      disableSince:{ \n        year: today.getFullYear(),\n        month: today.getMonth()+1,\n        day: today.getDate()+1\n      },\n      disableUntil: { //On conserve un intervalle de temps donn par la variable DAYS_INTERVALL\n        year: disableUntil.getFullYear(),\n        month: disableUntil.getMonth()+1,\n        day: disableUntil.getDate()\n      },\n      dateFormat:\"dd/mm/yyyy\",\n      selectBeginDateTxt:\"Choisir la date de dbut\",\n      selectEndDateTxt:\"Choisir la date de fin\",\n      editableDateRangeField: false,\n      openSelectorOnInputClick : true,\n      width: '100%',\n    };\n    var td = {\n      year: today.getFullYear(),\n      month: today.getMonth()+1,\n      day: today.getDate(),\n    };\n\n    var twoWksBefore = {\n    year: twoWeeksBefore.getFullYear(),\n    month: twoWeeksBefore.getMonth()+1,\n    day: twoWeeksBefore.getDate(),\n    };\n    this.model = {endDate: td, beginDate : twoWksBefore};\n  }\n\n  initReport(){\n    this.reportInfos = this.mapService.numberOfChangeByType;\n    this.displayReport = true;\n  }\n  clearResults(){\n    this.reportInfos = new Map();\n    this.displayReport = false;\n    this.changesList = undefined;\n    this.mapService.addChanges([]);\n  }\n  public formValidation(){\n    if (this.changesFilterForm.controls.thematic.value == null){\n      alert('Renseignez une thmatique !')\n      return false;\n    }\n    return true;\n\n  }\n\n\n}\n","module.exports = \"#main {\\n\\twidth: 97%;\\n\\tmargin: 2px auto 5px auto;\\n\\tbackground-clip: border-box;\\n\\tborder: 1px solid rgba(0,0,0,.125);\\n\\tborder-radius: .25rem;\\n\\toverflow: auto;\\n}\\n\\n#detailled-map {\\n\\theight: 300px;\\n\\tbackground-color: rgba(255,255,255,1);\\n}\\n\\n.cercle {\\n\\twidth: 12px;\\n\\theight: 12px;\\n\\tborder-radius: 50%;\\n\\tmargin-left:5px;\\n\\tmargin-right:20px;\\n  }\\n\\ntable{\\n\\ttext-align:center;\\n\\tposition:relative;\\n\\tmargin-left:auto;\\n\\tmargin-right:auto;\\n  }\"","module.exports = \"<div id=\\\"main\\\">\\n    <div id=\\\"detailled-map\\\"></div>\\n    <div *ngIf=\\\"layer\\\" id=\\\"legend\\\">\\n        <table>\\n            <ng-container *ngFor=\\\"let feature of layer.getSource().getFeatures()\\\">\\n                <td>{{feature.get('label')}}</td>\\n                <td>\\n                    <div class=\\\"cercle\\\" [ngStyle]=\\\"{'background-color':feature.get('color')}\\\"></div>\\n                </td>\\n            </ng-container>\\n        </table>\\n    </div>\\n</div>\\n<!-- <div id=\\\"length\\\">Distance moyenne de dplacement : </div> -->\"","import { Input, Component, AfterViewInit } from '@angular/core';\nimport { UserContext } from '../../model/UserContext';\nimport { MapService } from '../../service/map.service';\nimport { Change } from 'app/model/ChangesClasses/Change';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\n\ndeclare var ol: any;\ndeclare var config: any;\n\n@Component({\n  selector: 'app-changes-detailled-map',\n  templateUrl: './changes-detailled-map.component.html',\n  styleUrls: ['./changes-detailled-map.component.css']\n})\nexport class ChangesDetailledMapComponent {\n\n  @Input() public userContext : UserContext;\n  @Input() public mainChange : Change;\n  @Input() public changeTypesList : Array<ChangeType>;\n\n  constructor(public mapService: MapService) { }\n\n  //To prevent ngOnChanges before ngOnInit\n  private initialized : boolean = false;\n\n  // map parameters\n  private view: any;\n  private map: any;\n  public layer : any;\n\n  ngOnInit() {\n    this.initMap();\n    this.initLayer();\n    this.updateMap();\n    this.initialized=true;\n  }\n\n  ngOnChanges(...args: any[]){\n    if (this.initialized){\n      this.updateMap();\n    }\n  }\n\n  initMap(){\n    let center = [this.userContext.lon, this.userContext.lat]\n    this.view = new ol.View({\n      projection: 'EPSG:3857',\n      center: ol.proj.transform(center, 'EPSG:4326', 'EPSG:3857'),\n      zoom: 14,\n      minZoom: 3,\n    })\n\n    //Map creation\n    this.map = new ol.Map({\n      controls: ol.control.defaults({\n        attributionOptions: /** @type {olx.control.AttributionOptions} */ ({\n          collapsible: false\n        })\n      }).extend([\n        new ol.control.ScaleLine(),\n        new ol.control.FullScreen({tipLabel : \"Mode plein-cran\"}),\n      ]),\n      target: 'detailled-map',\n      view: this.view,\n      layers: [\n        new ol.layer.Tile({\n        source: new ol.source.OSM(),\n        projection : 'EPSG:3857',\n        opacity:0.5\n        })\n      ]\n    });\n  }\n\n  updateMap(){\n    this.updateLayer();\n    var extent = this.layer.getSource().getExtent();\n    this.map.getView().fit(extent, {size : this.map.getSize(), maxZoom : 19});\n  }\n\n  public updateLayer(): void{\n    let self = this;\n    let features = [];\n    this.layer.getSource().clear();\n\n    if (this.mainChange.theGeomOld != null && this.mainChange.changeType != 3) {\n      let oldFeature = (new ol.format.GeoJSON()).readFeature(this.mainChange.theGeomOld);\n      oldFeature.setStyle(function(feature,resolution){\n          return self.mapService.mainStyleFunction(feature, resolution, false, 6, true);}\n        );\n      oldFeature.set('label', 'Ancienne gomtrie')\n      oldFeature.set('color', this.changeTypesList.filter(x => x.id === 6)[0].relatedColor.getRGBA());\n      features.push(oldFeature);\n    }\n    if (this.mainChange.theGeomNew != null) {\n      self = this;\n      let changeId = (self.mainChange.changeType == 3) ? 3 : 1;\n      let newFeature = (new ol.format.GeoJSON()).readFeature(this.mainChange.theGeomNew);\n      newFeature.setStyle(function(feature,resolution){\n          return self.mapService.mainStyleFunction(feature, resolution, false, changeId, true);}\n        );\n      features.push(newFeature);\n      newFeature.set('color', this.changeTypesList.filter(x => x.id === changeId)[0].relatedColor.getRGBA());\n      newFeature.set('label', (changeId ==3) ? \"Gomtrie de l'objet\" : 'Nouvelle gomtrie');\n    }\n    this.layer.getSource().addFeatures(features);\n  }\n\n  public initLayer(){\n    this.layer = new ol.layer.Vector({\n      source: new ol.source.Vector({attributions: [\n        new ol.Attribution({\n          html: '' +\n              '<a href=\"http://magosm.magellium.com/\"> Magellium</a>'\n        })\n      ]\n      }),\n    });\n    this.map.addLayer(this.layer);\n  }\n}\n","module.exports = \"#panel-config{\\n        position: absolute;\\n        top: 120px;\\n        z-index: 2;\\n        left: 0px;\\n        width: 20%;\\n        min-width: 200px;\\n        /* overflow: hidden;\\n        overflow-y: hidden; */\\n}\\n\\n@media (max-width:800px){\\n    #panel-config{\\n        position: absolute;\\n        top: 50px;\\n    }\\n}\\n\\napp-permalink {\\n    position: absolute;\\n    top: 12px;\\n    left: 350px;\\n}\\n\\n#help {\\n    position: absolute;\\n    top: 12px;\\n    left: 350px;\\n\\n  }\\n\\n#report-bug{\\n      position : absolute;\\n      top : 12px;\\n      left : 425px;\\n\\n  }\\n\\n:host > div > div > div > span > a {\\n    color: #CC1517;\\n  }\"","module.exports = \"<div *ngIf=\\\"userContext\\\" class=\\\"container-fluid\\\" style=\\\"overflow-x:hidden;\\\">\\n    <div>\\n        <div id=\\\"panel-config\\\">\\n        <app-changes-config-panel [changeTypesList]=\\\"changeTypesList\\\"></app-changes-config-panel>\\n        </div>\\n    </div>\\n    <div *ngIf=\\\"userContext!=null\\\" class=\\\"row\\\">\\n        <div class=\\\"map\\\">\\n            <app-header></app-header>\\n            <app-changes-map [userContext]=\\\"userContext\\\"></app-changes-map>\\n            <span id=\\\"help\\\" class=\\\"d-none d-md-block\\\">\\n                    <a [routerLink]=\\\"['/changements-aide']\\\" target=\\\"_blank\\\">{{ 'change_config.help' | translate }}</a>\\n            </span>\\n            <span id=\\\"report-bug\\\" class=\\\"d-none d-md-block\\\">-\\n                <a href=\\\"https://gitlab.com/g2600/ch-osm\\\" target=\\\"_blank\\\">{{ 'main.bug' | translate }}</a>\\n            </span>\\n            \\n        </div>\\n    </div>\\n    \\n</div>\"","import { Component, OnInit } from '@angular/core';\n\nimport { MapService } from 'app/service/map.service';\nimport { ApiRequestService } from 'app/service/api-request.service';\nimport { ConfigService } from 'app/service/config.service';\nimport { UserContext } from 'app/model/UserContext';\nimport { UserContextService } from 'app/service/user-context.service';\n\n@Component({\n  selector: 'app-changes-main',\n  templateUrl: './changes-main.component.html',\n  styleUrls: ['./changes-main.component.css']\n})\nexport class ChangesMainComponent implements OnInit {\n\n  public jsonContextLoaded: boolean = false;\n  config: any;\n  public userContext: UserContext;\n\n  constructor(\n    public mapService: MapService,\n    public apiRequestService: ApiRequestService,\n    public configService: ConfigService,\n    public userContextService: UserContextService\n  ) {\n    this.loadConfigAndUserContext();\n  }\n\n  ngOnInit() {\n    //this.loadConfigAndUserContext();\n  }\n\n  public loadConfigAndUserContext() {\n    let self = this;\n    this.configService.getConfig()\n      .subscribe(resp => {\n        window[\"config\"] = resp;\n        // on charge le  contexte utilisateur\n        // self.userContext = this.userContextService.loadUserContextFromPermalink();\n        this.userContextService.setContext().subscribe({ \n          next(val) {\n            self.userContext = val;\n          }\n        })\n      });\n  }\n}\n","module.exports = \".map {\\n\\theight: 100vh;\\n\\twidth: 100vw;\\n}\\n\\n#mouse-position-2, #layername, #layerswitcher {\\n\\tpadding: 1px 5px;\\n\\tborder-radius: 3px;\\n\\tdisplay: inline-block;\\n\\tcolor: #444;\\n\\tbackground: rgba(255, 255, 255, 0.6);\\n}\\n\\n#mouse-position-2{\\n\\tposition:absolute;\\n\\tleft: 165px;\\n\\tbottom: 10px;\\n\\tfont-size: 0.7em;\\n}\\n\\n#layerswitcher {\\n\\tposition:absolute;\\n\\tright:5px;\\n\\ttop:5px;\\n\\tline-height:1.2;\\n}\\n\\n.panelSwitcherLayerName{\\n\\tpadding-left:5px; \\n\\tfont-size:0.8em;\\n}\\n\\nb.cercle {\\n  display: block;\\n  width: 12px;\\n  height: 12px;\\n  margin: 2px auto;\\n  border-radius: 50%;\\n}\\n\\napp-apiadresse{\\n\\tposition:absolute;\\n\\ttop:10px;\\n\\tleft:160px;\\n}\\n\\n#featureDetailsPanel{\\n\\tposition:absolute;\\n\\tright:0px;\\n\\ttop:0px;\\n\\twidth: 500px;\\n\\theight: 100vh;\\n}\\n\"","module.exports = \"<div style=\\\"position:relative\\\">\\n    <div id=\\\"map\\\" class=\\\"map\\\"></div>\\n    <app-apiadresse (citySelected)=\\\"onCitySelected($event)\\\"></app-apiadresse>\\n    <div id=\\\"mouse-position-2\\\"></div>\\n    <app-change-details \\n        id=\\\"featureDetailsPanel\\\"\\n        *ngIf=\\\"selectedFeatures && selectedFeatures.length > 0\\\" \\n        [selectedFeatures]=\\\"selectedFeatures\\\"\\n        [changeTypesList]=\\\"changeTypesList\\\"\\n        [userContext]=\\\"userContext\\\">\\n    </app-change-details>\\n    <div *ngIf=\\\"layerswitcherdisplay\\\" id=\\\"layerswitcher\\\">\\n            <div class=\\\"card-header p-2 text-center\\\" style=\\\"word-wrap: break-word;\\\">\\n                <b style=\\\"margin-left:10px\\\">{{ 'change_config.legende' | translate }}</b>\\n            </div>\\n        <table>\\n            <tr>\\n                <td>\\n                    <input type=\\\"checkbox\\\" id=\\\"selectAll\\\" name=\\\"selectAll\\\" (click)=\\\"onSelectAll($event)\\\" checked>\\n                    <label class=\\\"panelSwitcherLayerName\\\">{{ 'change_config.select' | translate }}</label>\\n                </td>\\n            </tr>\\n            <tr *ngFor=\\\"let changetype of changeTypesList\\\">\\n                <td>\\n                    <input type=\\\"checkbox\\\" id=\\\"{{changetype.id}}\\\" name=\\\"layer\\\" (click)=\\\"onSelect(changetype.id)\\\" checked>\\n                    <label class=\\\"panelSwitcherLayerName\\\">{{changetype.short_name}}</label>\\n                </td>\\n                <td>\\n                    <a [routerLink]=\\\"['/changements-aide']\\\" fragment=\\\"{{changetype.ref}}\\\" target=\\\"_blank\\\" style=\\\"cursor:pointer;\\\"\\n                     title=\\\"Voir + sur la page d'aide\\\">\\n                    <b class=\\\"cercle\\\" [ngStyle]=\\\"{'background-color': changetype.relatedColor.getRGBA()}\\\"></b>\\n                    </a>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td>\\n                    <input type=\\\"checkbox\\\" id=\\\"heatMap\\\" name=\\\"heatMap\\\" (click)=\\\"onSelect('heatMap')\\\" checked>\\n                    <label class=\\\"panelSwitcherLayerName\\\">{{ 'change_config.heatmap' | translate }}</label>\\n                </td>\\n                <td>\\n                    <b class=\\\"cercle\\\" style=\\\"background: linear-gradient(0.25turn,#00f, #0ff, #0f0, #ff0, #f00);\\\"></b>\\n                </td>\\n            </tr>\\n        </table>\\n    </div>\\n</div>\"","import { Input, Component, OnInit} from '@angular/core';\nimport { UserContext } from '../../model/UserContext';\nimport { UserContextService } from '../../service/user-context.service';\nimport { MapService } from '../../service/map.service';\nimport { ConfigService } from 'app/service/config.service';\nimport { ApiRequestService } from 'app/service/api-request.service';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { Change } from 'app/model/ChangesClasses/Change';\n\ndeclare var ol: any;\ndeclare var $: any;\ndeclare var config: any;\n\n@Component({\n  selector: 'app-changes-map',\n  templateUrl: './changes-map.component.html',\n  styleUrls: ['./changes-map.component.css']\n})\nexport class ChangesMapComponent implements OnInit {\n\n  @Input() public change : any;\n  @Input('userContext') userContext: UserContext;\n\n  constructor(\n    public mapService: MapService,\n    public userContextService : UserContextService,\n    public configService : ConfigService,\n    public apiRequestService : ApiRequestService\n) {   \n  $(\"#selectAll\").click(function(){\n    $(\"input[type=checkbox]\").prop('checked', $(this).prop('checked'));\n  }); \n}\n\n  // map parameters\n  private view: any;\n  public map: any;\n  public layersArray : any;\n  public layerswitcherdisplay : boolean = true;\n\n  //\n  private changeTypesList : Array<ChangeType>;\n  public selectedFeatures : Array<any>;\n\n  private mapFeatureSelectedInteractionOnClick : any;\n\n  ngOnInit() {\n    console.log(\"Init Map !\")\n    this.initMap();\n  }\n\n  initMap(){\n    var mousePositionControl = new ol.control.MousePosition({\n      coordinateFormat: function (coords) {\n        return ol.coordinate.format(coords, 'Lat : {y} Lon : {x} (WGS84)', 4)\n      },\n      projection: 'EPSG:4326',\n      className: 'custom-mouse-position-2',\n      target: document.getElementById('mouse-position-2'),\n      undefinedHTML: '&nbsp;'\n    });\n    let center: number[]\n    if(this.userContext){  \n      center = [this.userContext.lon, this.userContext.lat];\n    }\n    this.view = new ol.View({\n      projection: 'EPSG:3857',\n      center: center?ol.proj.transform(center, 'EPSG:4326', 'EPSG:3857'):null,\n      zoom: this.userContext.z,\n      //minZoom: 6,\n    })\n    \n    //Map creation\n    this.map = new ol.Map({\n      controls: ol.control.defaults({\n        attributionOptions: /** @type {olx.control.AttributionOptions} */ ({\n          collapsible: false\n        })\n      }).extend([\n        mousePositionControl,\n        new ol.control.ScaleLine(),\n      ]),\n      target: 'map',\n      view: this.view,\n    });\n\n    this.mapService.setMap(this.map, this.userContext);\n\n    this.apiRequestService.searchChangeTypes().subscribe(data => {\n      let array = JSON.parse(data['_body']) as any[];\n      this.changeTypesList = array.map(element => new ChangeType(element));\n      this.changeTypesList.sort((a,b) => a.id - b.id);\n      console.log(this.changeTypesList);\n      this.mapService.initLayers(this.changeTypesList);\n      this.mapService.initHeatMap();\n      this.mapService.initInteractions();\n      this.layersArray = this.mapService.changesLayersArray;\n    });\n\n\n    //// Pour ajouter de la surbrillance au passage de la souris et au clic sur un objet\n    //// Dsactiv car ralentit trs fortement lorsqu'il y a beaucoup d'objets (> 500)\n    var self = this;\n    // var selectPointerMove = new ol.interaction.Select({\n    //   condition: ol.events.condition.pointerMove,\n    //   style : function(feature,resolution){\n    //     return self.mapService.mainStyleFunction(feature, resolution, true);},\n    //   hitTolerance : 2,\n    //   filter: function(feature, layer){return self.heatMapFilter (layer);}\n    // })\n    // this.map.addInteraction(selectPointerMove);\n\n    // Au passage de la souris, change le curseur\n    this.map.on('pointermove', this.onPointerMove.bind(this));\n    // Au clic sur un objet\n    this.map.on('click', this.onClick.bind(this));\n      \n  }\n\n\n  public onPointerMove(e){\n    if (e.dragging) return; // si il y a dplacement de la carte, on arrte\n       \n      var pixel = this.map.getEventPixel(e.originalEvent);\n      var hit = this.map.hasFeatureAtPixel(pixel, {hitTolerance:2, layerFilter: this.mapService.heatMapFilter}); // on vrifie si il y a un objet  l'endroit de l'vnement\n       \n      this.map.getTargetElement().style.cursor = hit ? 'pointer' : ''; // si besoin, on change le curseur\n\n  }\n\n  public onClick(event){\n    this.mapService.clearSelection();\n    this.selectedFeatures = new Array<any>();\n    var pixel = this.map.getEventPixel(event.originalEvent);\n    var hit = this.map.hasFeatureAtPixel(pixel, {hitTolerance:2, layerFilter : this.mapService.heatMapFilter});\n    if (hit){\n      this.selectedFeatures = this.map.getFeaturesAtPixel(pixel, {hitTolerance:2, layerFilter : this.mapService.heatMapFilter});\n      console.log(this.selectedFeatures);\n    }\n  }\n\n  // Actions pour la lgende //\n  public onSelect(id){\n    let elem = document.getElementById(id) as HTMLInputElement;\n    let isChecked = elem.checked;\n    if (id != \"heatMap\"){\n      var layer = this.mapService.changesLayersArray.filter(x => x.get('id') === Number(id))[0];\n      layer.setVisible(isChecked);\n      this.mapService.refreshHeatMap();\n    } \n    else {\n      this.mapService.heatMapLayer.setVisible(isChecked);\n    }\n  }\n\n  public onSelectAll(event){\n    let isChecked = event.target.checked;\n    let checkboxes = document.getElementsByName(\"layer\") as NodeListOf<HTMLInputElement>;\n    Array.from(checkboxes).forEach(checkbox => {\n      if (checkbox.checked != isChecked){\n        checkbox.checked = isChecked;\n        this.onSelect(checkbox.id);\n      }\n    })\n  }\n\n  // Recherche de lieux //\n  onCitySelected(city) {\n\n    if (city.geometry) {\n      // on calcule le zoom pour l'adapter au rsultat de la recherche en fonction du type d'objet trouv :\n      // type : (housenumber | street  | locality | municipality)\n      var zoomlevel = 14;\n      var type = city.properties.type;\n      if (type == 'housenumber') {\n        zoomlevel = 19;\n      } else if (type == 'street') {\n        zoomlevel = 16;\n      } else if (type == 'locality') {\n        zoomlevel = 16;\n      } else if (type == 'municipality') {\n        zoomlevel = 14;\n      };\n      // On fait le zoom\n      this.zoomTo(city.geometry.coordinates, zoomlevel);\n    }\n  }\n\n  zoomTo(location, zoomlevel) {\n    this.map.getView().setCenter(ol.proj.transform(location, 'EPSG:4326', config.PROJECTION_CODE), 16);\n    this.map.getView().setZoom(zoomlevel);\n  }\n\n}\n","import {AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output} from \"@angular/core\";\nimport { Subject} from \"rxjs\";\nimport { fromEvent } from \"rxjs\";\nimport { takeUntil, switchMap, map, buffer, debounceTime, filter} from \"rxjs/operators\";\n\n@Directive({\n  selector: '[draggable]'\n})\nexport class DraggableDirective implements AfterViewInit, OnDestroy {\n\n  @Input() dragHandle: string;\n  @Input() dragTarget: string;\n\n  @Output() doubleClick = new EventEmitter();\n\n  // Element to be dragged\n  private target: HTMLElement;\n  // Drag handle\n  private handle: HTMLElement;\n  private delta = {x: 0, y: 0};\n  private offset = {x: 0, y: 0};\n\n  private destroy$ = new Subject<void>();\n\n  constructor(private elementRef: ElementRef, private zone: NgZone) {\n  }\n\n  public ngAfterViewInit(): void {\n    this.handle = this.dragHandle ? document.querySelector(this.dragHandle) as HTMLElement :\n      this.elementRef.nativeElement;\n      this.handle.style.cursor=\"move\";\n    this.target = document.querySelector(this.dragTarget) as HTMLElement;\n    this.setupEvents();\n  }\n\n  public ngOnDestroy(): void {\n    this.destroy$.next();\n  }\n\n  private setupEvents() {\n    this.zone.runOutsideAngular(() => {\n      let mousedown$ = fromEvent(this.handle, 'mousedown');\n      let mousemove$ = fromEvent(document, 'mousemove');\n      let mouseup$ = fromEvent(document, 'mouseup');\n      let mouseclick$ = fromEvent(document, 'click');\n\n      let mousedrag$ = mousedown$.pipe(\n        switchMap((event: MouseEvent) => {\n          let startX = event.clientX;\n          let startY = event.clientY;\n\n          return mousemove$.pipe(\n            map((event: MouseEvent) => {\n              event.preventDefault();\n              this.delta = {\n                x: event.clientX - startX,\n                y: event.clientY - startY\n              };\n            }),\n            takeUntil(mouseup$)\n          )}),\n        takeUntil(this.destroy$)\n      );\n\n      mouseclick$.pipe(\n        takeUntil(this.destroy$),\n        buffer(mouseclick$.pipe(debounceTime(150))),\n        map(list => list.length),\n        filter(x => x === 2)\n      ).subscribe(() => {\n        this.doubleClick.emit();\n      });\n\n\n      mousedrag$.subscribe(() => {\n        if (this.delta.x === 0 && this.delta.y === 0) {\n          return;\n        }\n\n        this.translate();\n      });\n\n      mouseup$.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.offset.x += this.delta.x;\n        this.offset.y += this.delta.y;\n        this.delta = {x: 0, y: 0};\n      });\n    });\n  }\n\n  private translate() {\n    requestAnimationFrame(() => {\n      this.target.style.transform = `\n        translate(${this.offset.x + this.delta.x}px,\n                  ${this.offset.y + this.delta.y}px)\n      `;\n    });\n  }\n}","module.exports = \"#main_info_container{\\n    padding-top:0px;\\n    padding-bottom:5px;\\n    padding-left:5px;\\n    display:flex;\\n    height:auto;\\n}\\n  \\n#high{\\n    font-size:1.1em;\\n    font-weight:bold;\\n}\\n  \\n#medium{\\n    font-size:1.0em;\\n}\\n  \\n#low{\\n    font-size:0.9em;\\n}\\n  \\n#no{\\n    font-size:0.8em;\\n}\\n  \\n#addr{\\n    font-size:0.8em;  \\n    font-weight: bold;\\n}\\n  \\n#writed_info{\\n    width:70%;\\n    -webkit-hyphens: auto;\\n    -ms-hyphens: auto;\\n    -o-hyphens: auto;\\n    hyphens: auto;\\n}\\n  \\n#external_links{\\n    width:30%;\\n    text-align: right;\\n    display:flex;\\n    flex-direction: column;\\n    height:auto;\\n    margin:5px 8px 5px 0px;\\n    font-size:0.9em;\\n}\"","module.exports = \"<div id=\\\"main_info_container\\\">\\n  <div id=writed_info>\\n    <!-- Display all the info about the feature-->\\n    <div *ngIf=\\\"featureImportantTagsList.isEmpty() == false; else nothingToDisplay\\\"><!-- If there is something to display -->\\n      <div *ngFor=\\\"let featureImportantTags of featureImportantTagsList.list\\\">\\n        <div id={{featureImportantTags.importance}}> <!-- high, medium, low, no -->\\n          <div *ngFor=\\\"let keyLabelObject of featureImportantTags.tagList.list\\\">             \\n            <div [ngSwitch]=\\\"keyLabelObject.key\\\">\\n              <div *ngSwitchCase=\\\"'phone'\\\"><a target=\\\"_blank\\\" href=\\\"tel:{{selectedFeature.get(keyLabelObject.key)}}\\\" title=\\\"Appeler le numro\\\">{{selectedFeature.get(keyLabelObject.key)}}</a></div> \\n              <div *ngSwitchCase=\\\"'website'\\\"><a target=\\\"_blank\\\" href=\\\"{{selectedFeature.get(keyLabelObject.key)}}\\\" title=\\\"Consulter le site web\\\">{{ 'feature.website' | translate }}</a></div>\\n              <div *ngSwitchCase=\\\"'email'\\\"><a target=\\\"_blank\\\" href=\\\"mailto:{{selectedFeature.get(keyLabelObject.key)}}\\\" title=\\\"Envoyer un mail\\\">{{ 'feature.email' | translate }}</a></div>\\n              <div *ngSwitchDefault>\\n                <a *ngIf=\\\"!keyLabelObject.key.startsWith('addr')\\\">\\n                  <span *ngIf=\\\"keyLabelObject.label!=null\\\"><u>{{keyLabelObject.label}} :</u> </span> {{selectedFeature.get(keyLabelObject.key)}}\\n                </a>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      <span id=\\\"addr\\\"> <!-- Special display for the adress : see method getAddr()-->\\n        <span *ngFor=\\\"let addr of addrString;index as i;\\\">\\n            <span>{{selectedFeature.get(addr)}} </span>\\n            <a *ngIf=\\\"i%2==1\\\"><br></a> <!-- To display exactly 2 infos on the same line -->\\n        </span>\\n      </span>\\n    </div>\\n    <ng-template #nothingToDisplay><!-- If there is nothing to display -->\\n      <a><i>{{ 'feature.noinfo' | translate }} {{selectedFeature.get(\\\"osm_id\\\")}}</i></a>\\n    </ng-template>\\n  </div>\\n  <div id=external_links> <!-- Tags related to external links (do NOT write them in config) like Wikipedia, national databases, ... -->\\n    <!--Logo OSM -->\\n    <span *ngIf=\\\"selectedFeature.get('osm_id')>0, else id_negatif\\\"><a class=\\\"logo_OSM\\\" target=\\\"_blank\\\" href=\\\"http://www.openstreetmap.org/{{osm_type}}/{{selectedFeature.get('osm_id')}}\\\" title=\\\"Voir l'objet sur openstreetmap.org\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a></span>\\n    <ng-template #id_negatif><a class=\\\"logo_OSM\\\" target=\\\"_blank\\\" href=\\\"http://www.openstreetmap.org/relation/{{selectedFeature.get('osm_id')*-1}}\\\" title=\\\"Voir l'objet sur openstreetmap.org\\\"><img src=\\\"assets/images/osm_logo_25px.png\\\"></a></ng-template>\\n    <span *ngFor=\\\"let k of keys\\\" title=\\\"Voir la base de donnes relative  l'objet et  sa couche\\\">\\n      <span *ngIf=\\\"k == 'wikipedia'\\\"><a target=\\\"_blank\\\" href=\\\"https://fr.wikipedia.org/wiki/{{selectedFeature.get(k)}}\\\" title=\\\"Voir l'objet sur Wikipedia\\\"><img src=\\\"assets/images/wikipedia_50_39px.png\\\"></a><br></span>\\n      <span *ngIf=\\\"k == 'wikidata'\\\"><a target=\\\"_blank\\\" href=\\\"https://www.wikidata.org/wiki/{{selectedFeature.get(k)}}\\\" title=\\\"Voir l'objet sur Wikidata\\\"><img src=\\\"assets/images/wikidata_50_35px.png\\\"></a><br></span>\\n      <span *ngIf=\\\"k == 'ref-FR-FINESS'\\\"><a target=\\\"_blank\\\" href=\\\"http://finess.sante.gouv.fr/fininter/jsp/actionRechercheAvancee.do?noFiness={{selectedFeature.get(k)}}\\\">Base nationale FINESS</a><br></span>\\n      <span *ngIf=\\\"k == 'ref-UAI'\\\"><a target=\\\"_blank\\\" href=\\\"https://www.education.gouv.fr/pid24302/annuaire-resultat-recherche.html?lycee_name={{selectedFeature.get(k)}}\\\">Education Nationale</a><br></span>\\n      <span *ngIf=\\\"k == 'ref-FR-GendarmerieNationale'\\\"><a target=\\\"_blank\\\" href=\\\"https://www.data.gouv.fr/fr/datasets/liste-des-unites-de-gendarmerie-accueillant-du-public-comprenant-leur-geolocalisation-et-leurs-horaires-douverture/\\\">Base sur data.gouv.fr</a><br></span>\\n      <span *ngIf=\\\"k == 'ref-FR-RATP'\\\"><a target=\\\"_blank\\\" href=\\\"https://data.ratp.fr\\\">data.ratp.fr</a><br></span>\\n      <span *ngIf=\\\"k == 'ref-mhs'\\\"><a target=\\\"_blank\\\" href=\\\"http://www2.culture.gouv.fr/public/mistral/dapamer_fr?ACTION=NOUVEAU\\\">Base Mrime</a><br></span>\\n      <span *ngIf=\\\"k == 'twitter'\\\"><a target=\\\"_blank\\\" href=\\\"https://www.twitter.com/{{selectedFeature.get(k)}}\\\" title=\\\"Lien vers le compte Twitter\\\">@{{selectedFeature.get(k)}}</a><br></span>\\n    </span>\\n  </div>\\n</div>\\n\\n\\n\\n\\n\\n\\n\"","import { Component, OnInit, Input, OnChanges } from '@angular/core';\nimport { FeatureImportantTagsList } from '../../model/FeatureMainInfoClasses/FeatureImportantTagsList';\n\n@Component({\n  selector: 'app-feature-main-info',\n  templateUrl: './feature-main-info.component.html',\n  styleUrls: ['./feature-main-info.component.css']\n})\nexport class FeatureMainInfoComponent implements OnInit, OnChanges {\n\n  @Input() public selectedLayer: any;\n  @Input() public keys: any;\n  @Input() public selectedFeature: any;\n  @Input() public osm_type: any;\n\n  public featureImportantTagsList : FeatureImportantTagsList;\n  public addrString : Array<string>; //For a special display of the adresses\n  \n  constructor() {}\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(...args: any[]){\n    this.updateKeysAndLabels(this.selectedFeature, this.selectedLayer);  \n  }\n\n  //Couple key/label for each level of importance, one feature, and one layer\n  public getKeyAndLabelForAllLevelsOfImportance(feature, layer) : FeatureImportantTagsList{\n    return new FeatureImportantTagsList(feature, layer);\n  }\n\n  public updateKeysAndLabels(feature, layer) : void{\n    this.featureImportantTagsList=this.getKeyAndLabelForAllLevelsOfImportance(feature, layer); \n    this.addrString=this.featureImportantTagsList.getAddrTagsList();\n    console.log(this.selectedLayer);\n  }\n}\n","module.exports = \" .table{\\n   line-height: 18px;\\n }\\n \\n  #headingFeaturePanel{\\n    font-size: 14pxvw;\\n}\\n \\n  .btn {\\n  font-size: 14px;\\n}\\n \\n  .btn-secondary {\\n  font-size: 1vw;\\n}\\n \\n  .btn-feature {\\n  font-size: 1vw;\\n  text-align: left;\\n}\\n \\n  .categories{\\n    color: black;\\n  }\\n \\n  .d-flex{\\n    font-size: 0.8vw;\\n}\\n \\n  .badge-selected-layer{\\n    background-color: #960606;\\n  }\\n \\n  b {\\n    font-size: 1.0rem;\\n}\\n \\n  /* Panneau masquable */\\n \\n  #featurepanel-wrapper {\\n    margin-left: -500px;\\n    left: 0;\\n    top: 0vw;\\n    width: 500px;\\n    position: fixed;\\n    height: 100%;\\n    overflow: auto;\\n    z-index: 1000;\\n    transition: all 0.5s ease-in 0s;\\n    -webkit-transition: all 0.5s ease-in 0s;\\n    -moz-transition: all 0.5s ease-in 0s;\\n    -ms-transition: all 0.5s ease-in 0s;\\n    -o-transition: all 0.5s ease-in 0s;\\n    background-color: rgba(255, 255, 255, 0.8);\\n  }\\n \\n  .featurepanel-nav, #featureContainer {\\n    background-color: rgba(255, 255, 255, 1);\\n  }\\n \\n  .featurepanel-nav{\\n    width:100%;\\n  }\\n \\n  #featurepanel-wrapper.active {\\n    left: 500px;\\n    width: 500px;\\n    transition: all 0.5s ease-out 0s;\\n    -webkit-transition: all 0.5s ease-out 0s;\\n    -moz-transition: all 0.5s ease-out 0s;\\n    -ms-transition: all 0.5s ease-out 0s;\\n    -o-transition: all 0.5s ease-out 0s;\\n  }\\n \\n  .featurepanel-nav .toggle {\\n    position:absolute;\\n    right:0px;\\n    margin: 5px 5px 0 0;\\n    line-height: .5;\\n  }\\n \\n  .dropdown-menu{\\n  width:100%;\\n}\\n \\n  .dropdown-menu .dropdown-item{\\n  -webkit-hyphens:auto;\\n      -ms-hyphens:auto;\\n          hyphens:auto;\\n  white-space: normal;\\n}\\n \\n  /* .dropdown-menu .dropdown-header{\\n  color:white;\\n  background-color: #545b62;\\n  border-color: #4e555b;\\n} */\\n \\n  .flex .logo{\\n  text-align:center;\\n  width:30%;\\n  font-size:0.7em;\\n  align-content:center;\\n}\\n \\n  .logo a{\\n  padding:2px;\\n}\\n \\n  table{\\n  margin-left:auto;\\n  margin-right:auto;\\n  margin-top:10px;\\n  width:95%;\\n  -webkit-hyphens:auto;\\n      -ms-hyphens:auto;\\n          hyphens:auto;\\n}\\n \\n  table td{\\n  padding:0.55rem;\\n}\\n \\n  table .row1,table .row2{\\n  width:50%;\\n}\\n \\n  #selectedLayer{\\n  text-align: right;\\n  padding:0px 8px 0px 5px;\\n}\\n \\n  .flex{\\n  display:flex;\\n  justify-content:space-between;\\n  height:auto;\\n}\\n \\n  .flex .text{\\n  width:65%;\\n}\\n \\n  #historique{\\n  padding: .75rem;\\n  text-align: center;\\n}\\n \\n  /* New rules if the width of the screen is under 500px */\\n \\n  @media screen and (max-width: 500px)\\n{\\n  #featurepanel-wrapper {\\n    margin-left: -100%;\\n    width: 100%;\\n  }\\n  #featurepanel-wrapper.active {\\n    left: 100%;\\n    width: 100%;\\n  }\\n}\"","module.exports = \"<div class=\\\"card row active\\\" id=\\\"featurepanel-wrapper\\\">\\n    <div class=\\\"featurepanel-nav\\\">\\n      <!-- closure of the panel -->\\n      <a id=\\\"featurepanel-close\\\" href=\\\"#\\\" class=\\\"btn btn-outline-secondary btn-sm toggle\\\">\\n          <b class=\\\"glyphicon glyphicon-remove\\\">X</b>\\n      </a>\\n      <!-- Title -->\\n      <div class=\\\"card-header p-2 text-center\\\" role=\\\"tab\\\" id=\\\"headingFeaturePanel\\\" style=\\\"word-wrap: break-word;\\\">\\n          <b> {{ 'change.info' | translate }}</b>\\n      </div>\\n  \\n      <div id=\\\"featureContainer\\\">\\n        <div id=\\\"top_infos\\\">\\n          <!-- Show if exists the others features nearby-->\\n          <div *ngIf=\\\"selectedFeatures.length>1\\\">\\n            <div id=\\\"features_nearby_list\\\" class=\\\"dropdown\\\">\\n              <button class=\\\"btn btn-secondary btn-lg btn-block btn-sm dropdown-toggle\\\" type=\\\"button\\\" id=\\\"dropdownMenuButton\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" \\n              (click)=\\\"dropdownMenuSelected()\\\" style=\\\"font-size:0.8em;\\\">\\n                <a>{{selectedFeatures.length-1}} {{ 'change.elements' | translate }}</a> <!-- -1 because the selectedFeature is in the selectedFeatureS -->\\n              </button>\\n              <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenuButton\\\">\\n                <span *ngIf=\\\"mapService.getNumberOfVisibleLayers()>1;else onlyOneLayer;\\\">\\n                  <span *ngFor=\\\"let nearbyFeaturesLayer of nearbyFeatures.list\\\">\\n                    <a class=\\\"dropdown-header mb-2 bg-secondary text-white\\\">{{nearbyFeaturesLayer.layer.nom_court}}</a> <!-- Display the name of the layer -->\\n                    <span *ngFor=\\\"let feature of nearbyFeaturesLayer.featuresList\\\">\\n                      <a *ngIf=\\\"feature != selectedFeature\\\" class=\\\"dropdown-item\\\" (click)=\\\"onSelect(feature)\\\">{{getLabelToDisplay(feature,nearbyFeaturesLayer.layer)}}</a>\\n                    </span>\\n                  </span> \\n                </span>\\n                <ng-template #onlyOneLayer>\\n                  <span *ngFor=\\\"let feature of selectedFeatures\\\">\\n                      <a *ngIf=\\\"feature != selectedFeature\\\" class=\\\"dropdown-item\\\" (click)=\\\"onSelect(feature)\\\">{{getLabelToDisplay(feature,selectedLayer)}}</a>\\n                  </span>\\n                </ng-template>\\n              </div>\\n            </div>\\n          </div>\\n  \\n          <!-- Short_name of the selected Layer at the top of the feature panel -->\\n          <div id=selectedLayer>\\n              <span class=\\\"badge badge-secondary\\\" title=\\\"Couche de l'objet\\\">{{selectedLayer.nom_court}}</span>\\n          </div>\\n\\n          <!-- Info table with general informations about the selected feature -->\\n            <app-feature-main-info #featureMainInfoComponent\\n                [keys]=\\\"keys\\\"\\n                [selectedLayer]=\\\"selectedLayer\\\"\\n                [selectedFeature]=\\\"selectedFeature\\\"\\n                [osm_type]=\\\"osm_type\\\"\\n            ></app-feature-main-info>\\n          </div>\\n  \\n        <!--<https://stackoverflow.com/questions/16670931/hide-scroll-bar-but-while-still-being-able-to-scroll/16671476#16671476-->\\n  \\n        <!-- Accordion with the 2 tables -->\\n        <div class=\\\"list-group\\\" id=\\\"panel_accordion\\\" aria-multiselectable=\\\"true\\\">\\n          <div class=\\\"card\\\">\\n              <div class=\\\"card-header\\\">\\n                <h6 class=\\\"mb-0\\\">\\n                  <a id=\\\"OSMAttribute\\\" class=\\\"categorie-title\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"panel_accordion\\\" href=\\\"#collapseAttributeTable\\\" title=\\\"Tableau des attributs (couples clef/valeur) d'OpenStreetMap\\\" \\n                  (click)=\\\"tableSelected('AttributeTable')\\\">\\n                  {{ 'change.attributes' | translate }}\\n                  </a>\\n                </h6>\\n              </div>\\n              <div id=\\\"collapseAttributeTable\\\" class=\\\"card-collapse collapse in\\\">\\n                <!-- First table with the OSM's attributes--> \\n                <table class=\\\"card-body table table-bordered\\\">\\n                  <thead>\\n                    <tr>\\n                      <th class=\\\"row1\\\">{{ 'change.key' | translate }}</th>\\n                      <th class=\\\"row2\\\">{{ 'change.value' | translate }}</th>\\n                    </tr>\\n                  </thead>\\n                  <tbody>\\n                    <ng-container *ngFor=\\\"let k of keys\\\">\\n                      <tr>\\n                        <td>\\n                          <div class=\\\"flex\\\">\\n                          <div class=\\\"text\\\">\\n                            <a>{{formatKey(k)}}</a>\\n                          </div>\\n                          <div class=\\\"logo\\\">\\n                              <a target=\\\"_blank\\\" href=\\\"https://wiki.openstreetmap.org/wiki/Key:{{formatKey(k)}}\\\" title=\\\"Rechercher {{formatKey(k)}} sur le Wiki d'OpenStreetMap\\\">Wiki OSM</a>\\n                              <a target=\\\"_blank\\\" href=\\\"https://taginfo.openstreetmap.fr/keys/{{formatKey(k)}}#overview\\\"title=\\\"Rechercher {{formatKey(k)}} sur TagInfo\\\"><img src=\\\"assets/images/taginfo_30_11px.png\\\"></a>\\n                              <a target=\\\"_blank\\\" href=\\\"http://overpass-turbo.eu/?key={{formatKey(k)}}&template=key\\\" title=\\\"Requte sur {{formatKey(k)}} avec Overpass Turbo\\\"><img src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABJklEQVQoz13RP0oDYRCH4UcShdRbWWjSWWgOEEFLSWNj5SG2DHxa5RBaWOQM5gASraKdILugblaTEAvBP6BC0M4iWxhnuoHfDPO+QElkU3Dhy5ueYFOkpKiymlhfZiCXyWT6YjXlWbqmLZHratm1q6Url2irKRGJpRJBXaSiIlIXJBKxiIZLE4eqs4XF0aoDD/oaHHgytG/VkoWil6zac+VR4Nynb4lj29atWbNu27Ebnz6c82pq7N7YnWtdXdfuisnUKy+GYk0dqYkTJyZSHU2xoRd6Mi3LVuw4MzJyZseKZS2ZHkHmVF1ZRdPAQFNFWd2pTKChLxdULdqQSm1YVBXkszcjsaQAteXWra15UH9RH3n27Gge9V9ZYz++jeZl/df9Pq/7F7ojeX4atkuXAAAAAElFTkSuQmCC\\\"></a> \\n                          </div>\\n                          </div>\\n                        </td>\\n                        <td>\\n                          <div class=\\\"flex\\\">\\n                            <div class=\\\"text\\\">\\n                              <a>{{selectedFeature.get(k)}}</a>\\n                            </div>\\n                            <div class=\\\"logo\\\">\\n                              <span *ngIf=\\\"selectedFeature.get(k) != undefined && !(isValueIrrelevant(k))\\\"> <!-- If the value is NonGeneric, we don't display the logos -->\\n                                <a target=\\\"_blank\\\" href=\\\"https://wiki.openstreetmap.org/wiki/Tag:{{formatKey(k)}}%3D{{selectedFeature.get(k)}}\\\" title=\\\"Rechercher {{formatKey(k)}}:{{selectedFeature.get(k)}} sur le Wiki d'OpenstreetMap\\\">Wiki OSM</a>\\n                                <a target=\\\"_blank\\\" href=\\\"https://taginfo.openstreetmap.fr/tags/{{formatKey(k)}}={{selectedFeature.get(k)}}#overview\\\" title=\\\"Rechercher {{formatKey(k)}}:{{selectedFeature.get(k)}} sur TagInfo\\\"><img src=\\\"assets/images/taginfo_30_11px.png\\\"></a>\\n                                <a target=\\\"_blank\\\" href=\\\"http://overpass-turbo.eu/?key={{formatKey(k)}}&value={{selectedFeature.get(k)}}&template=key-value\\\" title=\\\"Requte sur {{formatKey(k)}}:{{selectedFeature.get(k)}} avec Overpass Turbo\\\"><img src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABJklEQVQoz13RP0oDYRCH4UcShdRbWWjSWWgOEEFLSWNj5SG2DHxa5RBaWOQM5gASraKdILugblaTEAvBP6BC0M4iWxhnuoHfDPO+QElkU3Dhy5ueYFOkpKiymlhfZiCXyWT6YjXlWbqmLZHratm1q6Url2irKRGJpRJBXaSiIlIXJBKxiIZLE4eqs4XF0aoDD/oaHHgytG/VkoWil6zac+VR4Nynb4lj29atWbNu27Ebnz6c82pq7N7YnWtdXdfuisnUKy+GYk0dqYkTJyZSHU2xoRd6Mi3LVuw4MzJyZseKZS2ZHkHmVF1ZRdPAQFNFWd2pTKChLxdULdqQSm1YVBXkszcjsaQAteXWra15UH9RH3n27Gge9V9ZYz++jeZl/df9Pq/7F7ojeX4atkuXAAAAAElFTkSuQmCC\\\"></a>\\n                              </span>\\n                            </div>\\n                          </div>\\n                          <span *ngIf=\\\"selectedFeature.get(k) == undefined\\\">n/a</span>\\n                        </td>\\n                      </tr>\\n                    </ng-container>  \\n                  </tbody>\\n                </table>\\n              </div>\\n          </div>\\n          <div class=\\\"card\\\">\\n              <div class=\\\"card-header\\\">\\n                  <h6 class=\\\"mb-0\\\">\\n                    <a class=\\\"categorie-title\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"panel_accordion\\\" href=\\\"#collapseMetadataTable\\\" title=\\\"Tableau des mta-donnes\\\" (click)=\\\"tableSelected('MetadataTable')\\\">\\n                      {{ 'change.metadata' | translate }}\\n                    </a>\\n                  </h6>\\n              </div>\\n              <div id=\\\"collapseMetadataTable\\\" class=\\\"card-collapse collapse\\\">\\n                <!-- Second table with the technical keys -->\\n                    <table class=\\\"card-body table table-bordered\\\">\\n                        <thead>\\n                          <tr>\\n                            <th class=\\\"row1\\\">{{ 'change.key' | translate }}</th>\\n                            <th>{{ 'change.value' | translate }}</th>\\n                          </tr>\\n                        </thead>\\n                        <tbody>\\n                          <ng-container *ngFor=\\\"let k of technical_keys\\\">\\n                            <tr>\\n                              <td>{{k}}</td>\\n                              <td>\\n                                <span [ngSwitch]=\\\"k\\\">\\n                                  <span *ngSwitchCase=\\\"'osm_id'\\\">\\n                                    <span *ngIf=\\\"selectedFeature.get(k)>0; else negative\\\">\\n                                        <a>{{selectedFeature.get(k)}}</a>\\n                                    </span>\\n                                    <ng-template #negative>\\n                                        <a>{{selectedFeature.get(k)*-1}}</a>\\n                                    </ng-template>\\n                                  </span>\\n                                  <span *ngSwitchCase=\\\"'osm_type'\\\">\\n                                      <a>{{osm_type}}</a>\\n                                  </span>\\n                                  <!-- Those both elements are not in technical_keys (because of the JS code), but we can't find them in the initial list of keys.\\n                                  <span *ngSwitchCase=\\\"'osm_user'\\\">\\n                                      <a target=\\\"_blank\\\" href=\\\"http://www.openstreetmap.org/user/{{selectedFeature.get(k)}}\\\">{{selectedFeature.get(k)}}</a>\\n                                  </span>\\n                                  <span *ngSwitchCase=\\\"'osm_changeset'\\\">\\n                                      <a target=\\\"_blank\\\" href=\\\"http://www.openstreetmap.org/changeset/{{selectedFeature.get(k)}}\\\">{{selectedFeature.get(k)}}</a>\\n                                  </span>\\n                                  -->\\n                                  <span *ngSwitchDefault>\\n                                    <span *ngIf=\\\"selectedFeature.get(k) != undefined; else undefined\\\">{{selectedFeature.get(k)}}</span>\\n                                    <ng-template #undefined>\\n                                      <span>n/a</span>\\n                                    </ng-template>\\n                                  </span>\\n                                </span>\\n                            </td>\\n                          </tr>\\n                        </ng-container>\\n                        <!-- Historic of the object -->\\n                          <tr id=historique>\\n                            <td colspan=\\\"2\\\">\\n                                <span *ngIf=\\\"selectedFeature.get('osm_id')>0; else negative2\\\">\\n                                  <a target=\\\"_blank\\\" href=\\\"http://osmlab.github.io/osm-deep-history/#/{{osm_type}}/{{selectedFeature.get('osm_id')}}\\\" title=\\\"Voir les modifications de l'objet dans la base OSM au fil du temps\\\">{{ 'change.historic' | translate }}</a>\\n                                </span>\\n                                <ng-template #negative2>\\n                                    <a target=\\\"_blank\\\" href=\\\"http://osmlab.github.io/osm-deep-history/#/{{osm_type}}/{{selectedFeature.get('osm_id')*-1}}\\\" title=\\\"Voir les modifications de l'objet dans la base OSM au fil du temps\\\">{{ 'change.historic' | translate }}</a>\\n                                </ng-template>  \\n                            </td>\\n                          </tr>\\n                      </tbody>\\n                    </table>\\n\\n              \\n            </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { Layer } from '../model/Layer';\nimport { MapService } from '../service/map.service';\nimport { NearbyFeaturesService } from '../service/nearbyFeatures.service';\nimport { FeatureMainInfoComponent } from 'app/feature-panel-components/feature-main-info/feature-main-info.component';\nimport { NearbyFeaturesList } from '../model/NearbyFeaturesClasses/NearbyFeaturesList';\n\n\ndeclare var $: any;\ndeclare var config: any;\ndeclare var _paq: any;\n\n@Component({\n  selector: 'app-feature-panel',\n  templateUrl: './feature-panel.component.html',\n  styleUrls: ['./feature-panel.component.css']\n})\nexport class FeaturePanelComponent implements OnInit {\n\n  @Output()\n  layervariables = config.LAYERS;\n\n  //To use the variable config in the html\n  config = config;\n\n  @Input() public selectedFeatures: any;\n  @Input() public selectedLayer: Layer;\n\n  @ViewChild(FeatureMainInfoComponent) featureMainInfoComponent: FeatureMainInfoComponent;\n\n  public selectedFeature: any;\n  private panelOpen = true;\n\n  keys: Array<String> = [];\n  osm_type: String = \"node\";\n  technical_keys: Array<String> = [];\n  nearbyFeatures: NearbyFeaturesList;\n  constructor(private mapService: MapService, private nearbyFeaturesService : NearbyFeaturesService) { }\n\n  ngOnInit() {\n    var self=this;\n    $(\"#featurepanel-close\").click(function(e) {\n      e.preventDefault();\n      $(\"#featurepanel-wrapper\").toggleClass(\"active\");\n      self.panelOpen=false;\n    });\n\n    this.selectedFeature = this.selectedFeatures[0];\n    this.processAttributes();\n    this.updateSelectedLayer(this.selectedFeature);\n    this.updateNearbyFeaturesList();\n  }\n\n  onSelect(feature) {\n    this.selectedFeature =feature;\n    this.processAttributes();\n    this.mapService.cleanSelection();\n    this.mapService.addToSelection(feature);\n    this.updateSelectedLayer(this.selectedFeature);\n    this.updateNearbyFeaturesList();\n  }\n\n  ngOnChanges(...args: any[]) {//si l'@Input() selectedFeature change, cette fonction est lance\n    console.log('FeaturePanel : ngOnChanges')\n    if (!this.panelOpen) { //si le panel est ferm, on l'ouvre\n      console.log('onChange fired');\n      console.log('changing', args);\n      //$(\"#fpanel\").show();\n      this.panelOpen = true;\n      if(!$(\"#featurepanel-wrapper\").hasClass(\"active\")) {\n        $(\"#featurepanel-wrapper\").toggleClass(\"active\");\n      }\n    }\n    this.selectedFeature = this.selectedFeatures[0];\n    this.processAttributes();\n    this.updateSelectedLayer(this.selectedFeature);\n    this.updateNearbyFeaturesList();\n  }\n\n  ngAfterViewInit() {\n  }\n  \n  //Find the attributes and separate them in to array : keys and technicals_keys (\"osm_...\")\n  processAttributes() {\n    let geomType = this.selectedFeature.getGeometry().getType();\n    let clefs = this.selectedFeature.getKeys();\n    //Determine the osm_type\n    // It's NOT easy because : polygon are simplified so the geomType is a Point. Some relations have a positive osm_id and route=*, the other relation have a negative osm_id\n    if (clefs.indexOf('osm_type') >= 0) {\n      this.osm_type = this.selectedFeature.get('osm_type');\n    } else { \n      this.osm_type = \"way\";\n    }\n    if ((clefs.indexOf(\"route\") >= 0) || this.selectedFeature.get('osm_id') < 0) {\n          this.osm_type = \"relation\";\n    }\n\n    this.technical_keys=[];\n    this.keys=[];\n    for (let key in clefs) {\n      if ('boundedBy' != clefs[key] && 'way' != clefs[key] && 'st_union' != clefs[key] && 'the_geom' != clefs[key]) {\n        if ('osm_' == clefs[key].substr(0, 4)) {\n          if('osm_uid' != clefs[key] && 'osm_user' != clefs[key] && 'osm_changeset' != clefs[key] && 'osm_original_geom' != clefs[key]){\n             this.technical_keys.push(clefs[key]);\n          }\n        } else {\n          //ARTIFICIAL_OSM_KEYS_CREATED_IN_DB keys must be hidden from feature panel (Attribits OSM)\n          if (config.ARTIFICIAL_OSM_KEYS_CREATED_IN_DB.indexOf(clefs[key]) == -1 ){ \n          this.keys.push(clefs[key]);\n          }\n        }\n\n      }\n\n    }\n  }\n   \n  //Keys are written with \"-\" instead of a \":\" in the DB\n  public formatKey(key :string) : string{\n    return key.replace(/-/g,':');\n  }\n\n\n  public updateNearbyFeaturesList(){\n    if (this.selectedFeatures.length>1){\n      this.nearbyFeatures = this.nearbyFeaturesService.getNearbyFeaturesList(this.selectedFeatures, this.selectedFeature);\n      console.log(this.nearbyFeatures);\n      console.log(this.selectedFeatures);\n    }\n  }\n\n  //For the list of nearby features, this function is called for each features on the dropdown-menu\n  public getLabelToDisplay(feature,layer) :string{\n    var featureImportantTagsList = this.featureMainInfoComponent.getKeyAndLabelForAllLevelsOfImportance(feature,layer); \n    var severalLayers : boolean = (this.mapService.getNumberOfVisibleLayers()>1);\n\n    if (!featureImportantTagsList.isEmpty()){ //if the list is not null, return the high important key\n    var highImportanceList = featureImportantTagsList.list.filter(x => x.importance=== \"high\");\n      if (highImportanceList.length >0){// If highImportanceList is not empty\n        var highImportanceTag = highImportanceList[0].tagList;\n        if (!highImportanceTag.isEmpty()){\n            return feature.get(highImportanceList[0].tagList.list[0].key);\n        }\n      }\n    }\n    //if the list is null (ie there is nothing to display) or there is no high important key to display, return the name of the layer and the osm_id.\n    return \"Objet n\" + Math.abs(feature.get('osm_id')).toString();\n  }\n \n  //the selectedLayer changes when the user clicks on a feature which belongs to on another layer\n  private updateSelectedLayer(feature):void{\n    this.selectedLayer= this.mapService.getLayerOfOneFeature(feature);\n  }\n\n  // For the display on the table : if the value is NonRelevant, the logos won't appear on the second row.\n  // The function reads the config\n  public isValueIrrelevant(tag : string) : boolean{\n    let isValueIrrelevant = false;\n    config.OSM_KEYS_WITH_IRRELEVANT_VALUE_FOR_EXTERNAL_LINKS.forEach(function(n){\n      if (tag.startsWith(n.osm_key)){\n        isValueIrrelevant=true;\n      }\n    })\n    return isValueIrrelevant;\n  }\n    \n  //Matomo Events\n  tableSelected(table){\n    if (!(document.getElementById(\"collapse\"+table).classList.contains('show'))){\n      _paq.push(['trackEvent', 'table_selected', table]);\n    }\n  }\n  dropdownMenuSelected(){\n    if (!(document.getElementById(\"features_nearby_list\").classList.contains('show'))){\n      _paq.push(['trackEvent', 'features_nearby_list_selected', true]);\n    }\n  }\n\n}","module.exports = \"\\n\\n  .img-rounded {\\n    border-radius: 6px;\\n    margin: 5px;\\n    margin-left: 13px;\\n    z-index:1000;\\n  }\"","module.exports = \"<a href=\\\"http://ch-osm.geodatasolutions.ch\\\">\\n  <img \\n    class=\\\"img-rounded\\\" \\n    src=\\\"assets/images/chosm_logo.png\\\" \\n    height=\\\"30\\\" style=\\\"position:absolute;top:7px;\\\" \\n    id=\\\"chosm_logo\\\" \\n  />\\n</a>\\n\\n\"","import { Component, OnInit, Input } from '@angular/core';\n\nimport { Router } from '@angular/router';\nimport {Observable} from 'rxjs';\n\ndeclare var config: any;\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n\n  ngOnInit() {\n  }\n\n\n  constructor( public router: Router) {\n    \n  }\n\n\n}\n","module.exports = \".content{\\n    margin-bottom : 10px;\\n}\\n\\nb.cercle {\\n    display: block;\\n    width: 20px;\\n    height: 20px;\\n    margin: 10px auto;\\n    border-radius: 50%;\\n  }\"","module.exports = \"<header>\\n  <a [href]=\\\"ref\\\" [id]=\\\"ref\\\"></a>\\n  <h2 [innerText]=\\\"header\\\" style=\\\"text-align:left;float:left;\\\"></h2>\\n  <b *ngIf=\\\"color\\\" style=\\\"text-align:right;float:right;\\\" class=\\\"cercle\\\" [ngStyle]=\\\"{'background-color': color}\\\"></b>\\n  <hr style=\\\"clear:both;\\\"/>\\n</header>\\n<section>\\n  <div class=\\\"content\\\">\\n      <ng-content></ng-content>\\n  </div>\\n</section>\"","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-help-subsection',\n  templateUrl: './help-subsection.component.html',\n  styleUrls: ['./help-subsection.component.css']\n})\nexport class HelpChangeTypeComponent{\n\n  @Input() header : string;\n  @Input() content : string;\n  @Input() ref : string;\n  @Input() color : string;\n  constructor() { }\n\n}\n","module.exports = \".mainContent {\\n    color: #5a5a5a;\\n    padding-top: 60px;\\n    padding-bottom: 60px;\\n    position: unset;\\n    left: 10%;\\n    top: 10px;\\n    font-family: Arial;\\n    width: 80%;\\n    text-align: justify;\\n    text-justify: inter-word;\\n  }\\n\\nimg.help{\\n    max-width: 100%;\\n}\\n\\n.navbar{\\n    z-index: 1;\\n}\\n\\nh1 {\\n    color: gray;\\n}\\n\"","module.exports = \"<body>\\n  <app-header></app-header>\\n  <div class=\\\"container mainContent\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"d-none d-xl-block d-xs-none d-sm-none d-md-none d-lg-none bd-toc\\\">\\n        <nav id=\\\"navbar-example3\\\" class=\\\"navbar navbar-light bg-light\\\" style=\\\"position: fixed;right: 30px;\\\">\\n          <a class=\\\"navbar-brand\\\" href=\\\"#\\\"></a>\\n          <nav class=\\\"nav nav-pills flex-column\\\">\\n            <a class=\\\"nav-link active\\\" href=\\\"#suivi-changement\\\">Le suivi de changement</a>\\n            <nav class=\\\"nav nav-pills flex-column\\\">\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#pourquoi\\\">Pourquoi ce outil ?</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#limitations\\\">Limitations</a>\\n            </nav>\\n            <a class=\\\"nav-link\\\" href=\\\"#types-changements\\\">Les types de changements</a>\\n            <nav class=\\\"nav nav-pills flex-column\\\">\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#creation\\\">Cration</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#ajout\\\">Ajout</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#modif-tag\\\">Modification de tag(s)</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#modif-geom\\\">Modification de gomtrie</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#modif-tag-et-geom\\\">Modification de tag(s) et de gomtrie</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#retrait\\\">Retrait</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#suppression\\\">Suppression</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#autre\\\">Autre</a>\\n            </nav>\\n            <a class=\\\"nav-link\\\" href=\\\"#aide-interpretation\\\">Aide  l'interprtation</a>\\n            <nav class=\\\"nav nav-pills flex-column\\\">\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#regroupement-changement\\\">Regroupement des changements</a>\\n              <a class=\\\"nav-link ml-3 my-1\\\" href=\\\"#scission-chemin\\\">Scission d'un chemin</a>\\n            </nav>\\n          </nav>\\n        </nav>\\n      </div>\\n      <div style=\\\"max-width:80%\\\" class=\\\"col-sm\\\" *ngIf=\\\"changeTypesList\\\">\\n\\n\\n        <h1><a id=\\\"suivi-changement\\\"></a>Suivi de changement</h1>\\n          Cet outil permet de <b>suivre l'volution de thmatiques (coles, btiments, routes ...) dans OpenStreetMap</b>,  l'chelle de la France Mtropolitaine, sur les 30 derniers jours.\\n          <br>  \\n          <a style=\\\"font-size:13px;\\\" [routerLink]=\\\"['/changements']\\\">Accs au portail de suivi de changement</a>\\n          <br><br>\\n          <app-help-subsection ref=\\\"pourquoi\\\" header=\\\"Pourquoi cet outil ?\\\">\\n          Souvent dans l'cosystme OSM, on visualise les changements par le prisme de changeset (ou groupe de modification) : \\n          on sait que tel.le contribut.eur.rice a modifi 42 noeuds et 35 chemins dans une rgion donne  telle heure, \\n          mais il est difficile de comprendre  quoi correspondent ces changements d'un point de vue thmatique et quel est leur impact sur l'tat de la cartographie.\\n\\n          On cherche ici  rpondre  des questions simples comme :<br><br>\\n\\n          <ul>\\n            <li>o et comment ont volus les btiments en France ces dernires semaines ?</li>\\n            <li>des magasins ont-ils t supprims dans ma commune ?</li>\\n            <li>y a-t-il de nouveaux sentiers de randonne en Arige ?</li>\\n            <li>quelqu'un a-t-il touch au rseau routier dans tel quartier ?</li>\\n            <li>combien d'coles en France ont subies un changement d'attribut ?</li>\\n          </ul>\\n\\n          De plus on cherche  simplifier la comprhension de modifications successive  l'chelle de l'objet\\n          en indiquant le changement rsultant. Par exemple, si un objet a t modifi 4 fois en un jour, on qualifiera le changement rsultant de \\\"Modification de gomtrie\\\"\\n          et on proposera de visualiser la premire et la dernire version.<br>\\n          <br>\\n          </app-help-subsection>\\n          <app-help-subsection ref=\\\"limitations\\\" header=\\\"Limitations\\\">\\n            <b>Le volume des changements</b>\\n            <br>\\n            Pour certaines thmatiques reprsentant un gros volume de donnes et/ou de changements sur le mois pass, \\n            les changements peuvent tre nombreux et les gomtries complexes. Le volume de donnes transfr est alors important et votre navigateur peut manquer\\n            de ressources pour les afficher. Dans ce cas le plus simple est de zoomer davantage pour diminuer l'emprise de la requte, ou bien rduire la plage de date\\n            sur laquelle porte la recherche.<br>\\n            Ainsi les thmatiques les plus volumineuses (comme les btiments, l'occupation du sol, le rseau routier etc.)\\n            ne sont rellement exploitables qu' partir de l'chelle rgionale.<br>\\n            Une solution, non implmente pour l'instant, consisterait  rappatrier des changements minifis  petite chelle afin d'afficher\\n            la carte de chaleur, puis de charger le dtail au zoom.\\n            <br><br>\\n            <b>Les changements de gomtrie faux-positifs</b>\\n            <br>\\n            Pour un way (ligne ou polygone), si un noeud est ajout ou supprim sans pour autant changer la gomtrie rsultante, un changement\\n            de gomtrie est tout de mme dtect bien qu'il soit invisible sur le rendu. Cela peut prter  confusion et rendre plus difficile\\n            l'identification des gomtries ayant subies des modifications signifiantes. Une solution, non implmente pour l'instant, consisterait\\n             ignorer ce type de faux-positifs, voir  ignorer certaines modifications de gomtrie considres comme mineures.\\n          </app-help-subsection>\\n\\n        <h1 id=\\\"types-changements\\\">Les diffrents types de changements</h1>\\n        Les changements peuvent tre catgoriss en diffrents types dcrits ci-dessous. Cela permet de connatre directement la nature du changement dans la plupart des cas.\\n          <br><br>\\n        <app-help-subsection header=\\\"Cration\\\" ref=\\\"creation\\\" [color]=\\\"getColorForRef('creation')\\\">\\n            Objet qui n'existait pas dans OpenStreetMap, rajout au cours de la priode de temps slectionne, et qui entre dans la requte.\\n        </app-help-subsection>\\n\\n        <app-help-subsection header=\\\"Ajout\\\" ref=\\\"ajout\\\" [color]=\\\"getColorForRef('ajout')\\\">\\n            Objet qui existait dj dans OpenStreetMap au dbut de la priode, mais qui n'entrait pas dans la requte, car :\\n            <ul>\\n              <li>soit il n'tait pas contenu dans l'emprise gographique slectionne</li>\\n              <li>soit il ne contenait pas les combinaisons d'attributs ncessaires pour appartenir  la thmatique choisie</li>\\n            </ul>\\n        </app-help-subsection>\\n\\n        <app-help-subsection header=\\\"Modification de tag(s)\\\" ref=\\\"modif-tag\\\" [color]=\\\"getColorForRef('modif-tag')\\\">\\n            Objet prsent dans la requte au dbut et  la fin de la priode, qui a uniquement subi une ou des modification(s) d'attribut(s) (cl/valeur) n'affectant pas son appartenance  la thmatique choisie\\n        </app-help-subsection>\\n               \\n        <app-help-subsection header=\\\"Modification de gomtrie\\\" ref=\\\"modif-geom\\\" [color]=\\\"getColorForRef('modif-geom')\\\">\\n            Objet prsent dans la requte au dbut et  la fin de la priode, qui a uniquement subi une ou des modification(s) de gomtrie, tels que :\\n            <ul>\\n              <li>un dplacement</li>\\n              <li>pour un way : un rajout ou une suppression de points</li>\\n              <li>pour une relation : un rajout ou une suppression de membre(s)</li>\\n            </ul>\\n        </app-help-subsection>\\n\\n        <app-help-subsection ref=\\\"modif-tag-et-geom\\\" header=\\\"Modification de tag(s) et de gomtrie\\\" [color]=\\\"getColorForRef('modif-tag-et-geom')\\\">\\n          Objet prsent dans la requte au dbut et  la fin de la priode, qui a subi une ou des modifications d'attributs <b>et</b> de gomtrie. \\n        </app-help-subsection>\\n\\n        <app-help-subsection ref=\\\"retrait\\\" header=\\\"Retrait\\\" [color]=\\\"getColorForRef('retrait')\\\">\\n          Objet prsent dans la requte au dbut de la priode, mais plus  la fin, et toujours existant dans OpenStreetMap. De fait:\\n          <ul>\\n              <li>soit il n'est plus contenu dans l'emprise gographique slectionne</li>\\n              <li>soit il ne contient plus les combinaisons d'attributs ncessaires pour appartenir  la thmatique choisie</li>\\n          </ul>\\n        </app-help-subsection>\\n\\n        <app-help-subsection ref=\\\"suppression\\\" header=\\\"Suppression\\\" [color]=\\\"getColorForRef('suppression')\\\">\\n          Objet existant dans OpenStreetMap et prsent dans la requte au dbut de la priode, puis supprim d'OpenStreetMap au cours de la priode.\\n        </app-help-subsection> \\n        \\n        <app-help-subsection ref=\\\"autre\\\" header=\\\"Autre\\\" [color]=\\\"getColorForRef('autre')\\\">\\n            Objet n'ayant pas subi de modification de gomtrie, ni d'attributs, mais dont la version a quand mme augment. Quelques cas peuvent expliquer cette situation :\\n            <ul>\\n              <li>pour un way : un point appartenant  ce way a t remplac par un autre point exactement au mme endroit</li>\\n              <li>pour une relation : un membre a t remplac par un autre membre exactement au mme endroit</li>\\n              <li>un <a target=\\\"_blank\\\" href=\\\"https://wiki.openstreetmap.org/wiki/Change_rollback\\\">revert</a> (aussi appel \\\"change rollback\\\") : un changeset cr est annul par la suite. Ainsi, il y a potentiellement des objets supprims qui sont remis dans la base OSM : seul son numro de version a chang</li>\\n            </ul>\\n        </app-help-subsection>\\n\\n        <h1 id=\\\"aide-interpretation\\\">Aide  l'interprtation</h1>\\n        La fiche d'information qui s'ouvre lorsqu'un objet est slectionn, permet d'afficher les mtadonnes lies au changement, ainsi que les tags et la gomtrie de l'objet. Mme avec ces diffrents lments, il est parfois compliqu d'analyser le changement dans certains situations.\\n        Voici quelques exemples qui ont pour but d'claircir certains cas courants :\\n        \\n        \\n        <app-help-subsection ref=\\\"regroupement-changement\\\" header=\\\"Regroupement des changements\\\">\\n          Si plusieurs changements interviennent sur un mme objet au cours de la priode, le changement affich par dfaut est la fusion des diffrents changements. \\n          Par exemple : si un objet est cr puis modifi, on indiquera une <b>cration</b>.<br><br>\\n          Il est ensuite possible de visualiser les changements intermdiaires dans le dtail, les uns aprs les autres, grce au double-curseur.\\n        </app-help-subsection>\\n\\n        <app-help-subsection ref=\\\"scission-chemin\\\" header=\\\"Scission d'un chemin\\\">\\n          C'est un cas qui arrive frquemment sur un way. Un contributeur peut scinder le way afin de rajouter des attributs sur une portion (rajout d'un pont, par exemple).\\n          Dans ce cas, on a alors : \\n          <ul>\\n            <li>Le way initial qui subit une <b>modification de gomtrie</b></li>\\n            <li>Un nouveau way contigu au way initial, qui est donc <b>cr</b></li>\\n          </ul>\\n        </app-help-subsection>\\n      </div>\\n    </div>\\n  </div>\\n</body>\\n\\n\"","import { Component, AfterViewInit, OnInit } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { ApiRequestService } from 'app/service/api-request.service';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { Color } from 'app/model/ChangesClasses/Color';\n\ndeclare var $;\n\n@Component({\n  selector: 'app-help',\n  templateUrl: './help.component.html',\n  styleUrls: ['./help.component.css']\n})\nexport class HelpComponent implements OnInit, AfterViewInit {\n\n  public changeTypesList : Array<ChangeType>\n  constructor(\n    router: Router,\n    public apiRequestService : ApiRequestService) {\n    /* Lorsque le composant est charg depuis une URL contenant une ancre :\n    * - l'lment du DOM avec l'id correspondant  l'ancre n'est pas encore charg\n    * - on attend donc la fin de la navigation pour scroller jusqu' l'ancre\n    */\n    router.events.subscribe(s => {\n      if (s instanceof NavigationEnd) {\n        const tree = router.parseUrl(router.url);\n        if (tree.fragment) {\n          const element = document.querySelector(\"#\" + tree.fragment);\n          if (element) { element.scrollIntoView(true); }\n        }\n      }\n    });\n  }\n  ngOnInit(){\n    this.apiRequestService.searchChangeTypes().subscribe(data => {\n      let array = JSON.parse(data['_body']) as any[];\n      this.changeTypesList = array.map(element => new ChangeType(element));\n    })\n  }\n\n  ngAfterViewInit() {\n    /* on ne dclare le scrollspy qu'une fois que le template est initialis */\n    $(document).ready(() => {\n      $('body').scrollspy({target: \"#navbar-example3\", offset: 50});   \n    });\n\n\n    /* rustine pour que la navbar de Bootstrap cohabite avec Angular et sa gestion des href :\n    * - Bootstrap a besoin d'une href correspondant  une ancre (ex: href=\"#umap\")\n    * - Angular a besoin d'un chemin complet pour suivre un lien (ex: aide.html#umap)\n    * ==> on conserve le format qui va bien  Bootstrap au\n    * ==> clic sur un lment du menu, on stop la navigation native d'Angular pour scroller vers l'ancre\n    */\n    $(\".nav-link\").click(function(event) {\n      event.preventDefault();\n      let fragment = event.target.hash;\n      const element = document.querySelector(fragment);\n      if (element) { element.scrollIntoView(true); }\n        });\n\n  }\n\n  public getColorForRef(ref : string) : string{\n    let change : ChangeType = this.changeTypesList.filter(x => x.ref === ref)[0];\n    return change.relatedColor.getRGBA()\n  }\n\n\n}\n","module.exports = \".modal-lg {\\n  max-width: 920px;\\n  margin-top: 2rem;\\n  margin-left: 2rem;\\n}\\n\\n:host > #layerAttributeTableModal{ z-index: 10001; font-size: 11.2px; overflow: hidden; pointer-events: none; }\\n\\n:host > div > div >  div.modal-content { overflow: hidden;  }\\n\\n:host > div > div > div > div.modal-header { padding: 0.5rem; margin-left: 7px; height: 40px; }\\n\\n:host > div > div > div > div.modal-body { overflow : auto; }\\n\\n:host > div > div > div > div.modal-body > div.card > div.card-body > div.containerTable{ overflow: scroll; max-height: 520px; }\\n\\n:host > div > div > div > div.modal-footer > nav  { width: 100%; }\\n\\n:host > div > div > div > div.modal-footer > nav > div > ul { -webkit-margin-after: 0em; margin-block-end: 0em; }\\n\\n:host > div > div > div > div.modal-footer > nav > div > ul >  li > input {     display: inline-block;width: 30px; margin-right: 15px; margin-top: 5px; border-color: transparent; border-bottom: rgba(128, 128, 128, 0.4) solid 2px; }\\n\\n:host > div > div > div > div > div.card {  width: 100%; }\\n\\n:host > div > div > div > div > div > div.card-body {  padding: 0rem; width: 100%; }\\n\\n:host > div > div > div > div > div > div.card-body > div { width: 100%; }\\n\\n:host > div > div > div > div > img.reloadImage {  width: 20px; margin-top: 6px; margin-left: 20px; cursor: pointer; }\\n\\n.card-body, .containerTable{ padding-bottom: 40px; }\\n\\n.featureAttributeTable{ display: block; }\\n\\nthead {\\n    height: 40px;\\n}\\n\\ntbody { margin: auto 0; }\\n\\n.attribute-table tr td, \\n.attribute-table tr th { \\n    border: 1px solid white; \\n    background: transparent; \\n    color: white; \\n    font-size: 1em; \\n    min-width: 90px; \\n    white-space:normal; \\n    text-align:center; \\n}\\n\\n.attribute-table tr th{ \\n    font-weight: normal; \\n    background: white;\\n    position: -webkit-sticky;\\n    position: sticky;\\n    top: 0;\\n    box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.4);\\n    margin: 0 10px;\\n    border-top: 5px;\\n    padding: 5px 0px;\\n}\\n\\n.attribute-table tr td { color: black; }\\n\\n.attribute { background-color: #CC1517 !important; }\\n\\n.action { background-color: #E8E8E8 !important; }\\n\\n/* .action { background-color: #A59C87 !important; } */\\n\\ntr:nth-child(even), .even { background-color:#E8E8E8; }\\n\\ntr:nth-child(odd), .odd { background-color:#FFFFFF; }\\n\\n.centerButtonTable{      \\n    background-color: transparent;\\n    border: 0px; \\n    display : table-cell;\\n}\\n\\n.centerButton{\\n    background-color: transparent;\\n    width : 15px;\\n    cursor : pointer;\\n}\\n\\n.pageSize{\\n  margin-right: 25px;\\n}\\n\\n.pageSize > label{\\n  margin-right: 2px;\\n  height: 100%; \\n  margin-top: 7px;\\n}\\n\\n.rangePage{\\n  margin-top: 9px;\\n  margin-left: 7px;\\n  margin-right: 25px;\\n  height: 100%; \\n  vertical-align: middle;\\n}\\n\\n.pageSize > select{\\n  border-color: #dee2e6;\\n  border-radius: 5px;\\n}\\n\\n.page-link.active{\\n  z-index: 2;\\n  /* font-size: 12px; */\\n  font-weight: bold; \\n  color: #CC1517;\\n  text-decoration: none;\\n  background-color: #e9ecef;\\n  border-color: #dee2e6;\\n}\\n\\n.page-link{\\n  position: relative;\\n  display: block;\\n  padding: .5rem .75rem;\\n  margin-left: -1px;\\n  line-height: 1.25;\\n  color: #CC1517;\\n  /* color: #007bff; */\\n  background-color: #fff;\\n  border: 1px solid #dee2e6;\\n}\\n\\n#loadingWFS{\\n    width: 65px;\\n    margin: 0 auto;\\n}\\n\\n.lds-ring {\\n\\tbackground-color: rgb(250, 135, 146);\\n\\tz-index: 100000;\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\twidth: 64px;\\n\\theight: 64px;\\n  }\\n\\n.lds-ring div {\\n\\tbox-sizing: border-box;\\n\\tdisplay: block;\\n\\tposition: absolute;\\n\\twidth: 51px;\\n\\theight: 51px;\\n\\tmargin: 6px;\\n\\tborder: 6px solid #fff;\\n\\tborder-radius: 50%;\\n\\t-webkit-animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n\\t        animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n\\tborder-color: #fff transparent transparent transparent;\\n  }\\n\\n.lds-ring div:nth-child(1) {\\n\\t-webkit-animation-delay: -0.45s;\\n\\t        animation-delay: -0.45s;\\n  }\\n\\n.lds-ring div:nth-child(2) {\\n\\t-webkit-animation-delay: -0.3s;\\n\\t        animation-delay: -0.3s;\\n  }\\n\\n.lds-ring div:nth-child(3) {\\n\\t-webkit-animation-delay: -0.15s;\\n\\t        animation-delay: -0.15s;\\n  }\\n\\n@-webkit-keyframes lds-ring {\\n\\t0% {\\n\\t  -webkit-transform: rotate(0deg);\\n\\t          transform: rotate(0deg);\\n\\t}\\n\\t100% {\\n\\t  -webkit-transform: rotate(360deg);\\n\\t          transform: rotate(360deg);\\n\\t}\\n  }\\n\\n@keyframes lds-ring {\\n\\t0% {\\n\\t  -webkit-transform: rotate(0deg);\\n\\t          transform: rotate(0deg);\\n\\t}\\n\\t100% {\\n\\t  -webkit-transform: rotate(360deg);\\n\\t          transform: rotate(360deg);\\n\\t}\\n  }\"","module.exports = \"<!-- Modal ajout de couche -->\\n<div class=\\\"modal fade modal-lg\\\" id=\\\"layerAttributeTableModal\\\" #layerAttributeTableModal tabindex=\\\"-1\\\" \\n  role=\\\"dialog\\\" data-backdrop=\\\"false\\\" data-keyboard=\\\"false\\\"\\n  [draggable] dragHandle=\\\".layerAttributeTableHeader\\\" dragTarget=\\\"#layerAttributeTableModal\\\"\\n    aria-labelledby=\\\"layerAttributeTableModalLabel\\\" aria-hidden=\\\"true\\\" >\\n\\n  <div class=\\\"modal-dialog  modal-lg\\\" id=\\\"layerAttributeTableModalDialog\\\" role=\\\"document\\\">\\n    <div class=\\\"modal-content\\\">\\n\\n      <div class=\\\"modal-header layerAttributeTableHeader\\\">\\n        <h5 class=\\\"modal-title\\\" id=\\\"layerAttributeTableModalLabel\\\">\\n            <label *ngIf=\\\"currentLayer\\\">{{currentLayer.nom_court}}</label> \\n        </h5>\\n        <!-- <button class=\\\"reloadButton\\\" > -->\\n          <img class=\\\"reloadImage\\\" src=\\\"./assets/images/reload.png\\\" title=\\\"Recharger les valeurs valeurs\\\"  (click)=\\\"setLayer(null)\\\"/>\\n        <!-- </button> -->\\n        <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\n        </button>\\n      </div>\\n\\n      <div class=\\\"modal-body\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"card-body\\\">\\n            <!-- Data table -->\\n                <div class=\\\"containerTable\\\" *ngIf=\\\"!loadingWFS && layerAttributeKeyTable.length != 0; else noDataBlock\\\">                   \\n                <table class=\\\"attribute-table\\\" id=\\\"layerAttributeTable\\\" >\\n                  <thead>\\n                    <tr>\\n                      <th></th>\\n                      <ng-container *ngFor=\\\"let layerAttributeKey of layerAttributeKeyTable\\\"> \\n                        <th *ngIf=\\\"layerAttributeKey!='bbox' && layerAttributeKey!='osm_original_geom'\\\" class=\\\"attribute\\\">{{layerAttributeKey}} \\n                          <i [class]=\\\"paginationService.getSort()[layerAttributeKey]==-1? 'fa fa-sort-desc': paginationService.getSort()[layerAttributeKey]==0? 'fa fa-sort' : 'fa fa-sort-asc'\\\" aria-hidden=\\\"true\\\" (click)=\\\"sort(layerAttributeKey)\\\"></i>\\n                        </th>\\n                      </ng-container>\\n                    </tr>\\n                  </thead>\\n                  <tbody id=\\\"layerAttributeTableBody\\\">\\n                    <tr id=\\\"bodyTable\\\" *ngFor=\\\"let layerAttributeValue of layerAttributeValuesTable; let layerAttributeIndex = index\\\" >\\n                      <ng-container *ngFor=\\\"let layerAttributeKey of layerAttributeKeyTable; let layerAttributeKeyIndex = index\\\">\\n                        <td class=\\\"action\\\" *ngIf=\\\"layerAttributeKeyIndex==0\\\"  >\\n                          <button class=\\\"centerButtonTable\\\" (click)=\\\"centerGeom($event, layerAttributeValue.properties['bbox'])\\\">\\n                            <img id=\\\"centerMap\\\" class=\\\"centerButton\\\" src=\\\"./assets/images/localisation.svg\\\" title=\\\"Centrer sur la carte\\\" />\\n                          </button>\\n                        </td>\\n                        <td *ngIf=\\\"layerAttributeKey!='bbox' && layerAttributeKey!='osm_original_geom'\\\">\\n                          {{ layerAttributeValue.properties[layerAttributeKey] }}\\n                        </td>\\n                      </ng-container>                      \\n                    </tr>\\n                  </tbody>\\n                </table>  \\n              </div>   \\n              <ng-template #noDataBlock>\\n                {{ 'attribute.nodata' | translate }}\\n              </ng-template>\\n              <div id=\\\"loadingWFS\\\" *ngIf=\\\"loadingWFS\\\">\\n                <div class=\\\"lds-ring\\\"><div></div><div></div><div></div><div></div></div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"modal-footer\\\"> \\n        <nav aria-label=\\\"Navigation\\\">\\n          <div class=\\\"pull-left\\\">\\n            <ul class=\\\"pagination\\\">\\n              <li class=\\\"page-item pageSize disabled\\\">\\n                <label for=\\\"pet-select\\\">{{ 'attribute.nberpage' | translate }}</label>\\n                <select #pageSize (change)=\\\"onChangePageSize()\\\">\\n                  <option *ngFor=\\\"let pageSize of paginationService.getPageSizeArray()\\\" value={{pageSize}}>{{pageSize}}</option>\\n                </select>\\n              </li>\\n            <li class=\\\"page-item disabled\\\">\\n              <label for=\\\"pet-select\\\">{{ 'attribute.gopage' | translate }} </label>\\n              <input #pageSizeInput type=\\\"text\\\" (keydown)=\\\"handlePageSizeInputKeyDown($event)\\\">\\n            </li>  \\n            <li class=\\\"page-item\\\" >\\n              <label #rangePage for=\\\"rangePage\\\" class=\\\"rangePage\\\"></label>\\n            </li> \\n          </ul>\\n        </div>\\n        <div class=\\\"pull-right\\\">\\n          <ul class=\\\"pagination\\\">\\n            <li class=\\\"page-item disabled\\\">\\n              <a class=\\\"page-link\\\" #previousPage href=\\\"#\\\" tabindex=\\\"-1\\\" aria-disabled=\\\"true\\\" disabled (click)=\\\"onChangePreviousPage()\\\">{{ 'attribute.previouspage' | translate }}</a>\\n            </li>\\n            <li class=\\\"page-item disabled\\\" ><a class=\\\"page-link active\\\" #pageItem1 (click)=\\\"onChangePageIndex($event)\\\" href=\\\"#\\\">1</a></li>\\n            <li class=\\\"page-item disabled\\\"><a class=\\\"page-link\\\" #pageItem2 (click)=\\\"onChangePageIndex($event)\\\" href=\\\"#\\\">2</a></li>\\n            <li class=\\\"page-item disabled\\\"><a class=\\\"page-link\\\" #pageItem3 (click)=\\\"onChangePageIndex($event)\\\" href=\\\"#\\\">3</a></li>\\n            <ng-container *ngIf=\\\"paginationService.getLastPageIndex()>4 && paginationService.getPageIndex() < paginationService.getLastPageIndex()-3\\\">\\n              <li class=\\\"page-item disabled\\\"><a class=\\\"page-link\\\" href=\\\"#\\\">...</a></li>\\n            </ng-container><ng-container *ngIf=\\\"paginationService.getLastPageIndex()>=4 && paginationService.getPageIndex() < paginationService.getLastPageIndex()-3\\\">\\n\\n              <li class=\\\"page-item\\\"><a class=\\\"page-link\\\" #pageLastItem (click)=\\\"onChangeLastPage()\\\" href=\\\"#\\\">{{paginationService.getLastPageIndex()}}</a></li>\\n            </ng-container>\\n            <li class=\\\"page-item disabled\\\">\\n              <a class=\\\"page-link\\\" #nextPage href=\\\"#\\\" (click)=\\\"onChangeNextPage()\\\" >{{ 'attribute.nextpage' | translate }}</a>\\n            </li>\\n          </ul>\\n        </div>\\n      </nav>\\n    </div>\\n  </div>\\n</div>\"","import { Component, OnInit, Input, ViewChild, ElementRef } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Layer } from 'app/model/Layer';\nimport { MapService } from 'app/service/map.service';\nimport { PaginationService } from 'app/service/pagination.service';\n\nimport { WFSRequest } from 'app/model/WFSRequest';\n\ndeclare var $: any;\n@Component({\n  selector: 'app-layer-attribute-table',\n  templateUrl: './layer-attribute-table.component.html',\n  styleUrls: ['./layer-attribute-table.component.css']\n})\nexport class LayerAttributeTableComponent implements OnInit {\n\n  @ViewChild('pageItem1') pageItem1: ElementRef;\n  @ViewChild('pageItem2') pageItem2: ElementRef;\n  @ViewChild('pageItem3') pageItem3: ElementRef;\n  @ViewChild('previousPage') previousPage: ElementRef;\n  @ViewChild('nextPage') nextPage: ElementRef;\n  @ViewChild('pageSize') pageSize: ElementRef;\n  @ViewChild('pageSizeInput') pageSizeInput: ElementRef;\n  @ViewChild('rangePage') rangePage: ElementRef;\n  @ViewChild('layerAttributeTableModal')  modal: ElementRef;\n  \n  public currentLayer : Layer;\n\n  private static bboxKey : string = 'bbox';\n  // champs geoserver WFS  ne pas afficher \n  private static osmOriginalGeomKey : string = 'osm_original_geom';\n\n  public layerAttributeKeyTable : Array<string> = [];\n  public layerAttributeValuesTable : Array<any> = [];\n  public loadingWFS : boolean;\n\n  public isInitializedSorter : boolean = false;\n  public wfsRequest : WFSRequest;\n  public currentZoomMap : number; \n  \n  \n  constructor(\n    public mapService: MapService,\n    private http: HttpClient, \n    public paginationService : PaginationService) { \n      this.wfsRequest = new WFSRequest(this.mapService);\n      this.mapService = mapService;\n     \n    }\n  \n  ngOnInit() {    \n    // initialise la barre de navigation aprs l'affichage IHM\n    $(this.modal.nativeElement).on('shown.bs.modal',  () => {\n      setTimeout(() => {\n        this.paginationService.initializeElementRef(this.previousPage, this.pageItem1, this.pageItem2, this.pageItem3, this.nextPage, this.pageSize, this.rangePage);    \n        this.paginationService.actualizePagination();     \n      });\n    });\n\n    // initialise la barre de navigation aprs la suppression de l'affichage  l'IHM\n    $(this.modal.nativeElement).on('hidden.bs.modal',  () => {\n      setTimeout(() => {\n        this.paginationService.resetPagination();    \n        this.isInitializedSorter = false;\n      });\n    });\n  }\n\n  initLayerAttribute(layer){\n    this.layerAttributeValuesTable = [];  \n    if (this.mapService){\n      this.currentZoomMap = this.mapService.getMap().getView().getZoom();\n    }\n    if (layer){\n      this.wfsRequest.setLayer(layer);\n    }\n    this.requestWFS();    \n  }\n\n  // Appel du setter depuis le composant \"LayerTreeComponent\"\n  // mais aussi lors du clic sur le reload de la fentre\n  setLayer(layer){\n    if (layer){\n      this.currentLayer = layer;\n    }\n    this.paginationService.resetPageIndex();\n    \n    this.initLayerAttribute(layer);\n    // affichage de la fentre modal des valeurs attributaires de la couches demandes\n    $('#layerAttributeTableModal').modal('show');\n  }\n  \n  \n  initializeSorter(){\n    if (!this.isInitializedSorter){\n\n      this.layerAttributeKeyTable.forEach(headerKey => {\n        if (LayerAttributeTableComponent.bboxKey != headerKey \n          && LayerAttributeTableComponent.osmOriginalGeomKey != headerKey ){\n          \n          this.paginationService.setSort(headerKey, PaginationService.UNSORTED);\n        }      \n      });\n      this.isInitializedSorter = true;\n    }\n  }\n\n  ////////////////////////////////////////////////////////////\n  // LES EVENEMENTS\n  public onChangePageIndex($event){\n    \n    this.checkChangingMapZoom(function(scope){\n      scope.paginationService.setPageIndex(parseInt($event.target.innerHTML)-1); \n    });\n\n    this.requestWFS();\n  }\n  \n\n  /* fonction dclenche suite au click bouton \"Ouvrir\" de la dialogue de fichier */\n  public handlePageSizeInputKeyDown(event: any) {\n    // Concerne les 2 touches \"Entre\"\n    if (event.keyCode == 13) {\n      let pageInput = parseInt(event.target.value)-1;\n\n      this.checkChangingMapZoom(function(scope){\n        scope.paginationService.setPageIndex(pageInput);\n      });\n      this.requestWFS();\n    }\n  }\n\n  onChangePreviousPage(){\n    this.checkChangingMapZoom(function(scope){\n      scope.paginationService.goToPreviousPage();\n    });\n    this.requestWFS();\n  }\n\n  checkChangingMapZoom(callback :Function){\n    if (this.currentZoomMap == this.mapService.getMap().getView().getZoom()){      \n      callback(this); \n    } else {\n      this.currentZoomMap = this.mapService.getMap().getView().getZoom();\n      this.paginationService.resetPageIndex();\n    }    \n  }\n\n  onChangeNextPage(){\n    this.checkChangingMapZoom(function(scope){\n      scope.paginationService.goToNextPage(); \n    });\n\n    this.requestWFS();\n  }\n  \n  public onChangePageSize(){\n\n    // console.log(\" => Nombre d'lments par page : \" + this.pageSize.nativeElement.innerText);\n    this.paginationService.resetPageIndex();\n    this.paginationService.setPageSize(parseInt(this.pageSize.nativeElement.value));\n    this.requestWFS();\n  }\n  \n  public onChangeLastPage(){\n\n    this.checkChangingMapZoom(function(scope){\n      scope.paginationService.setPageIndex(scope.paginationService.getLastPageIndex() ); \n    });\n\n    this.requestWFS();\n  }\n\n\n  private parseWFS(data){\n    let jsonData = JSON.parse(data);\n    this.layerAttributeKeyTable = [];\n    this.layerAttributeValuesTable = [];\n\n    jsonData.features.forEach(element => {\n      if (this.layerAttributeKeyTable.length==0){\n        this.layerAttributeKeyTable =  Object.keys(element.properties);\n      }\n      this.layerAttributeValuesTable.push(element);\n    });\n    this.paginationService.setData(this.layerAttributeValuesTable);\n\n    this.paginationService.setTotalElement(jsonData['totalFeatures']?jsonData['totalFeatures']:jsonData['numberMatched']);\n    this.paginationService.actualizePagination();\n  }\n\n\n  // evenement lev sur le clique du bouton \"Centrer\", \n  // fait appel au service de carte pour centrer la carte sur la gomtrie d el'item concidr\n  centerGeom($event, geom) {\n    this.mapService.centerItemGeom(geom);\n  }\n\n  sort(layerAttributeKey : string){\n    this.layerAttributeValuesTable = [];\n    let sorterDir = this.paginationService.setSortColumn(layerAttributeKey);\n    this.wfsRequest.setSorter(layerAttributeKey, sorterDir);\n    this.requestWFS();\n  }\n\n  public requestWFS(){    \n    this.loadingWFS = true;\n    this.wfsRequest.setStartIndex(this.paginationService.getPageIndex() * this.paginationService.getPageSize());\n    this.wfsRequest.setCount(this.paginationService.getPageSize() );\n    this.http.get(this.wfsRequest.build(), {responseType: 'text'})\n    .subscribe(\n      \n      data => {\n        this.loadingWFS = false;\n        this.parseWFS(data);\n        // initialisation des headers une fois qu'ils sont connus\n        this.initializeSorter();\n        this.pageSizeInput.nativeElement.value = \"\";\n      },\n      error => {\n        this.loadingWFS = false;\n        console.log(error);\n      }\n    );\n  }\n}\n","module.exports = \"\\n\\napp-alert{\\n    position:absolute;\\n    top:400px;\\n    left:480px;\\n}\\n\\n#menuContainer {\\n    position: absolute;\\n    top: 2%;\\n    z-index: 2;\\n    right: 0px;\\n    width: 200px;\\n    overflow: hidden;\\n    overflow-y: hidden;\\n    scroll-behavior: unset;\\n    position: absolute;\\n  }\\n\\napp-permalink {\\n    position: absolute;\\n    top: 12px;\\n    left: 525px;\\n}\\n\\n#report-bug {\\n  position: absolute;\\n  top: 12px;\\n  left: 350px;\\n}\\n\\n:host > div > div > div > span > a {\\n  color: #CC1517;\\n  \\n}\"","module.exports = \"<div *ngIf=\\\"jsonContextLoaded\\\" class=\\\"container-fluid\\\" style=\\\"overflow: hidden\\\">\\n  <div style=\\\"position: absolute; right: 0vw; top: -2%; width: 20vw; height: 99vh; max-height: 100vh;\\\">\\n    <div id=\\\"menuContainer\\\" class=\\\"\\\" style=\\\"overflow-x: hidden; width: 100%\\\">\\n      <app-map-panel-switcher [userContext]=\\\"userContext\\\"></app-map-panel-switcher>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div id=\\\"mainmap\\\">\\n      <app-map *ngIf=\\\"userContext\\\" [userContext]=\\\"userContext\\\"></app-map>\\n      <app-header></app-header>\\n      <app-permalink class=\\\"d-none d-md-block\\\"></app-permalink> \\n      <span id=\\\"report-bug\\\" class=\\\"d-none d-md-block\\\">\\n        <a href=\\\"https://gitlab.com/g2600/ch-osm\\\" target=\\\"_blank\\\"> {{ 'main.bug' | translate }}</a> \\n      </span>\\n    </div>\\n\\n  </div>\\n</div>\\n\"","import { Component, ViewChild, Output } from '@angular/core';\nimport { MapComponent } from '../map/map.component';\nimport { HostListener } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LayerChangeService} from '../service/layer-change.service';\nimport { UserContextService } from '../service/user-context.service';\nimport { UserContext } from '../model/UserContext';\nimport { HttpClient } from '@angular/common/http';\nimport { ConfigService } from 'app/service/config.service';\n\n\ndeclare var $: any;\ndeclare var ol: any;\ndeclare var config: any;\n\n@Component({\n  selector: 'app-main',\n  templateUrl: './main.component.html',\n  styleUrls: ['./main.component.css']\n})\n\nexport class MainComponent {\n\n  //config=config;\n  \n  @ViewChild(MapComponent)\n  public map: MapComponent;\n  \n  private selectedFeature;\n\n  \n  public userContext: UserContext;\n  configUrl=\"./assets/maps/\";\n  jsonContextLoaded=false;\n\n\n  /*getConfig() {\n    // now returns an Observable of Config\n    var conf=this.route.snapshot.queryParams['config'];\n    if(conf==undefined){\n      conf=\"default.json\"\n    }\n    return this.http.get<any>(this.configUrl+conf);\n  }*/\n\n  config: any;\n\n  constructor(\n    private route: ActivatedRoute,\n    private http: HttpClient,\n    public layerChangeService: LayerChangeService,\n    public userContextService: UserContextService,\n    public configService: ConfigService,\n\n) {\n    this.loadConfigAndUserContext();\n    this.layerChangeService.getAnnounceLayerChangeEventEmitter().subscribe(\n      newSelectedLayer=>{\n        this.onMenuLayerChange(newSelectedLayer);\n      }\n    )\n  }\n\n  onMenuLayerChange(newSelectedLayer) {\n    this.selectedFeature = undefined\n    this.map.updateState(newSelectedLayer)\n  }\n\n  loadConfigAndUserContext() {\n    this.configService.getConfig()\n      .subscribe(resp => {\n        let self=this;\n        window[\"config\"]=resp;\n        // on charge le  contexte utilisateur\n        // this.userContext = this.userContextService.loadUserContextFromPermalink();\n        this.userContextService.setContext().subscribe({ \n          next(val) {\n            self.userContext = val;\n            console.log(self.userContext)\n            self.jsonContextLoaded=true;\n            console.log(resp);\n            self.showPopovers();\n          }\n        })\n      });\n  }\n\n  ngOnInit() {\n    ol.Feature.prototype.getDisplayLabel= function(){\n      //console.log('getDisplayLabel')\n      if(this.getKeys().indexOf('name')>0)\n        return this.get('name');\n      else\n        return Math.abs(this.get('osm_id'));\n    }\n  }\n\n  ngAfterViewInit() {\n    \n  }\n\n  showPopovers(){\n    $(function () {\n      $('#panel-switcher-wrapper').popover({\n        html: true,\n        trigger: 'manual'\n      }).on(\"hide.bs.popover\", function(e){\n        $('#panel-switcher-wrapper').popover('dispose');\n      });\n      $('[data-toggle=\"popover\"]').popover();\n      $('#panel-switcher-wrapper').popover('show');\n    })\n  }\n  onFeatureInfo(featureInfo){\n    this.selectedFeature=featureInfo;\n  }  \n \n}\n\n  \n\n","module.exports = \"#headingMenu{\\n    font-size: 1rem;\\n}\\n\\n.shift {\\n  position: relative;\\n  left: 30px;\\n}\\n\\n.caret {\\n  display: inline-block;\\n  width: 0;\\n  height: 0;\\n  margin-left: 2px;\\n  vertical-align: middle;\\n  border-top: 4px solid;\\n  border-right: 4px solid transparent;\\n  border-left: 4px solid transparent;\\n}\\n\\n.metadata-circle {\\n  margin-left: 2px;\\n  cursor:pointer;\\n  display: inline-block;\\n  width: 14px;\\n  height: 14px;\\n  border-radius: 50%;\\n  font-size: 10px;\\n  color: #fff;\\n  line-height: 12px;\\n  text-align: center;\\n  background: #be7079;\\n  /* vertical-align: text-top; */\\n}\\n\\n.form-check-label{\\n  margin-right: 2px;\\n  padding-left: 10px;\\n}\\n\\nh4 {\\n  font-size: 0.7em;\\n  font-weight: bold;\\n}\\n\\n.ol-attribution{\\n  right: 50px;\\n}\\n\\n.loading-panel{\\n\\tposition:relative;\\n\\ttop:-10px;\\n\\tleft:0px\\n}\\n\\n.loading-counter{\\n\\tposition:absolute;\\n\\tcolor:white;\\n\\tz-index: 100001;\\n\\ttop:13px;\\n\\tleft:15px\\n}\\n\\n.lds-ring {\\n\\t/*background-color: lightskyblue;*/\\n\\tz-index: 100000;\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\twidth: 8px;\\n\\theight: 8px;\\n}\\n\\n.lds-ring div {\\n  box-sizing: border-box;\\n  display: block;\\n  position: absolute;\\n  width: 20px;\\n  height: 20px;\\n  margin: 6px;\\n  border: 2px solid #fff;\\n  border-radius: 50%;\\n  -webkit-animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n          animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n  border-color: #fff transparent transparent transparent;\\n}\\n\\n.lds-ring div:nth-child(1) {\\n  -webkit-animation-delay: -0.45s;\\n          animation-delay: -0.45s;\\n}\\n\\n.lds-ring div:nth-child(2) {\\n  -webkit-animation-delay: -0.3s;\\n          animation-delay: -0.3s;\\n}\\n\\n.lds-ring div:nth-child(3) {\\n  -webkit-animation-delay: -0.15s;\\n          animation-delay: -0.15s;\\n}\\n\\n@-webkit-keyframes lds-ring {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes lds-ring {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n  }\\n}\\n\\n.btn.layer-entry{\\n  padding: 0 0 ;\\n}\\n\\n.layer-entry {\\n  background: white;\\n  font-size: 0.84em;\\n  line-height: 100%;\\n  background-color: transparent;\\n  color: #212529;\\n}\\n\\n.layer-entry.visible {\\n  background: #dae2ec;\\n}\\n\\n/* Slider cursor; see styles.css for more details */\\n\\ninput[type=range] {\\n  width: 60px; \\n}\\n\\n:host > div > div > div > div > div > a > div > div > div.card.card-body {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  border: none;\\n  font-size: 0.84em;\\n  padding: 0 0 ;\\n  background-color: transparent;\\n}\\n\\n:host >div > div > div > div > div > a > div > a { text-decoration:none; }\\n\\n:host >div > div > div > div > div > a > div > a > i.img-expandable { margin-left : 3px; margin-top : -1px; width: 13px; height: 15px;  -webkit-transform: rotate(90deg);  transform: rotate(90deg); transition: -webkit-transform 0.2s linear; transition: transform 0.2s linear; transition: transform 0.2s linear, -webkit-transform 0.2s linear;  }\\n\\n:host >div > div > div > div > div > a > div > a.collapsed > i.img-expandable { margin-left : 3px; margin-top : -1px; width: 13px; height: 15px; -webkit-transform: rotate(0deg); transform: rotate(0deg); transition: -webkit-transform 0.2s linear; transition: transform 0.2s linear; transition: transform 0.2s linear, -webkit-transform 0.2s linear; }\\n\"","module.exports = \"\\r\\n<app-layer-attribute-table #featureAttributeTableComponent></app-layer-attribute-table>\\r\\n\\r\\n\\r\\n<div class=\\\"card-header p-2 text-center\\\" role=\\\"tab\\\" id=\\\"headingMenu\\\">\\r\\n  <div data-toggle=\\\"collapse\\\" href=\\\"#collapseLegend\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"collapseLegend\\\">\\r\\n    <b>{{ 'button.topics' | translate }}</b>\\r\\n  </div>\\r\\n</div>\\r\\n<div role=\\\"tablist\\\" aria-multiselectable=\\\"true\\\">\\r\\n    <div *ngFor=\\\"let categorie of layervariables\\\" class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\" role=\\\"tab\\\" id=\\\"categorie{{categorie.id_categorie}}\\\">\\r\\n            <h6 class=\\\"mb-0\\\">\\r\\n                <a class=\\\"categorie-title collapsed\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#menuaccordion\\\" [attr.href]=\\\"'#collapse'+categorie.id_categorie\\\"\\r\\n                    [title]=\\\"categorie.help || categorie.categorie\\\"\\r\\n                    [attr.aria-controls]=\\\"'#collapse'+categorie.id_categorie\\\" aria-expanded=\\\"false\\\"\\r\\n                >\\r\\n                    {{ categorie.categorie | translate }}\\r\\n                </a>\\r\\n            </h6>\\r\\n        </div>\\r\\n        <div class=\\\"collapse collapse-close\\\" [attr.id]=\\\"'collapse'+categorie.id_categorie\\\" role=\\\"tabpanel\\\" [attr.aria-labelledby]=\\\"'categorie'+categorie.id_categorie\\\">\\r\\n            <div class=\\\"list-group\\\">\\r\\n                <div *ngFor=\\\"let feature of categorie.features\\\">\\r\\n                    <a type=\\\"button\\\" class=\\\"list-group-item btn-feature layer-entry\\\"\\r\\n                        style=\\\"width: 100%;\\\" \\r\\n                        [class.visible]=\\\"mapService.isVisible(feature.layername)\\\"\\r\\n                    >\\r\\n                        <div>\\r\\n                            \\r\\n                            <label class=\\\"form-check-label\\\">\\r\\n                                <input type=\\\"checkbox\\\" class=\\\"form-check-input position-static\\\"\\r\\n                                [checked]=\\\"categorie.id_categorie === 4 || (userContext.vLay.indexOf(feature.layername.replace(myRegex, '')) >= 0)\\\"\\r\\n                                (click)=\\\"onSelect($event,feature)\\\">\\r\\n                            \\r\\n                                {{ feature.layername | translate }} \\r\\n\\r\\n                            </label>\\r\\n                            \\r\\n                            \\r\\n                            <div (click)=\\\"onInfo(feature)\\\" class=\\\"metadata-circle\\\" [title]=\\\"feature.md_url ? 'Metadata' : 'N/A'\\\"><b>?</b></div>\\r\\n                            \\r\\n                            <span *ngIf=\\\"mapService.isInRange(feature.layername)==false\\\" \\r\\n                                style=\\\"cursor:pointer;margin: 3px;vertical-align: middle;\\\"\\r\\n                                title=\\\"Layer visibility\\\"\\r\\n                                data-container=\\\"body\\\"\\r\\n                                data-toggle=\\\"popover\\\"\\r\\n                                data-trigger=\\\"hover\\\"\\r\\n                                data-html=\\\"true\\\"\\r\\n                                data-parent=\\\"true\\\"\\r\\n                                attr.data-content=\\\"<div class='alert alert-warning'><i class='fa fa-warning' aria-hidden='true'></i> {{ 'panel.visibiltylayer' | translate }}</div>\\\"\\r\\n                                data-placement=\\\"top\\\"\\r\\n                            >\\r\\n                                <i class=\\\"fa fa-eye-slash\\\" aria-hidden=\\\"true\\\" style=\\\"font-size: 18px;\\\"></i>\\r\\n                            </span>\\r\\n\\r\\n                            <a class=\\\"layer-entry collapsed\\\" data-toggle=\\\"collapse\\\" href=\\\"#{{feature.nom_court_trim}}Collapse\\\" role=\\\"button\\\" aria-expanded=\\\"false\\\">\\r\\n                                <i class=\\\"fa fa-chevron-right img-expandable\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\r\\n                                <span class=\\\"loading-panel\\\" *ngIf=\\\"getState(feature)>0\\\">\\r\\n                                    <div class=\\\"loading-counter\\\">{{getState(feature)}}</div>\\r\\n                                    <div class=\\\"lds-ring\\\"><div></div><div></div><div></div><div></div></div>\\r\\n                                </span>\\r\\n                            </a>\\r\\n\\r\\n                            <div class=\\\"collapse\\\" id=\\\"{{feature.nom_court_trim}}Collapse\\\" style=\\\"align-items: center;\\\">\\r\\n                                <div class=\\\"card card-body\\\">                                                            \\r\\n                                    <input #ref\\r\\n                                        type=\\\"range\\\" min =\\\"0\\\" max=\\\"100\\\" step =\\\"2.5\\\"\\r\\n                                        value =\\\"{{feature.opacity}}\\\"\\r\\n                                        (change)=\\\"changeOpacity($event,feature,ref.value);false\\\"\\r\\n                                    />\\r\\n                                \\r\\n                                    <span \\r\\n                                        style=\\\"cursor:pointer;margin: 3px\\\"\\r\\n                                        (click)=\\\"openAttributeTable($event, feature)\\\"\\r\\n                                        title=\\\"Attribute table\\\" \\r\\n                                        data-container=\\\"body\\\"\\r\\n                                        data-toggle=\\\"popover\\\"\\r\\n                                        data-trigger=\\\"hover\\\"\\r\\n                                        data-html=\\\"true\\\"\\r\\n                                        attr.data-content=\\\"<div class='alert alert-warning'><i class='fa fa-warning' aria-hidden='true'></i> {{ 'panel.visibiltytable' | translate }} </div>\\\"\\r\\n                                        data-placement=\\\"top\\\"\\r\\n                                        >\\r\\n                                        <i class=\\\"fa fa-th\\\" aria-hidden=\\\"true\\\" ></i> {{ 'panel.attributes' | translate }}\\r\\n                                    </span>\\r\\n\\r\\n                                    <span *ngIf=\\\"feature.download_kml\\\" \\r\\n                                        style=\\\"cursor:pointer;margin: 3px\\\"\\r\\n                                        (click)=\\\"onKmlDownload($event,feature)\\\" \\r\\n                                        title=\\\"Download KML\\\"\\r\\n                                        data-container=\\\"body\\\"\\r\\n                                        data-toggle=\\\"popover\\\"\\r\\n                                        data-trigger=\\\"hover\\\"\\r\\n                                        data-html=\\\"true\\\"\\r\\n                                        attr.data-content=\\\"<div class='alert alert-warning'><i class='fa fa-warning' aria-hidden='true'></i> {{ 'panel.zonekml' | translate }}</div>\\\"\\r\\n                                        data-placement=\\\"top\\\"\\r\\n                                    >\\r\\n                                        <i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> kml\\r\\n                                    </span>\\r\\n                                    <span *ngIf=\\\"feature.download_shp\\\"\\r\\n                                        style=\\\"cursor:pointer;margin: 3px\\\"\\r\\n                                        (click)=\\\"onShpDownload($event,feature)\\\"\\r\\n                                        title=\\\"Download SHP\\\" \\r\\n                                        data-container=\\\"body\\\"\\r\\n                                        data-toggle=\\\"popover\\\"\\r\\n                                        data-trigger=\\\"hover\\\"\\r\\n                                        data-html=\\\"true\\\"\\r\\n                                        attr.data-content=\\\"<div class='alert alert-warning'><i class='fa fa-warning' aria-hidden='true'></i>{{ 'panel.zoneshp' | translate }}</div>\\\"\\r\\n                                        data-placement=\\\"top\\\"\\r\\n                                    >\\r\\n                                        <i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> shp\\r\\n                                    </span>\\r\\n                                    <span *ngIf=\\\"feature.sld_path\\\"\\r\\n                                        style=\\\"cursor:pointer;margin: 3px\\\"\\r\\n                                        (click)=\\\"onSldDownload($event,feature)\\\"\\r\\n                                        title=\\\"Download SLD\\\"\\r\\n                                        data-container=\\\"body\\\"\\r\\n                                        data-toggle=\\\"popover\\\"\\r\\n                                        data-trigger=\\\"hover\\\"\\r\\n                                        data-html=\\\"true\\\"\\r\\n                                        attr.data-content=\\\"<div class='alert alert-warning'><i class='fa fa-warning' aria-hidden='true'></i>{{ 'panel.styledownload' | translate }}</div>\\\"\\r\\n                                        data-placement=\\\"top\\\"\\r\\n                                    >\\r\\n                                        <i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> sld\\r\\n                                    </span>\\r\\n\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </a>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { MapComponent } from '../../map/map.component';\nimport { Layer } from '../../model/Layer';\nimport { MapService } from '../../service/map.service';\nimport { LayerChangeService } from '../../service/layer-change.service';\nimport { UserContext } from '../../model/UserContext';\nimport { environment } from '../../../environments/environment';\nimport { LayerAndCategory } from 'app/model/LayerAndCategory';\nimport { LayerAttributeTableComponent } from 'app/layer-attribute-table/layer-attribute-table.component';\n\n\n\n\n\ndeclare var config: any;\ndeclare var $: any;\ndeclare var _paq: any;\n\nconst average = arr => arr.reduce((p, c) => p + c, 0) / arr.length;\n\n@Component({\n  selector: 'app-layer-tree',\n  templateUrl: './layer-tree.component.html',\n  styleUrls: ['./layer-tree.component.css'],\n  \n  \n})\n\n\nexport class LayerTreeComponent implements OnInit {\n\n  public selectedLayer: Layer;\n  \n   \n  \n  layervariables = config.LAYERS;\n\n  @ViewChild('featureAttributeTableComponent') featureAttributeTableComponent: LayerAttributeTableComponent;\n\n  @Input('userContext')\n  public userContext: UserContext;\n\n\n  //Pour utiliser la variable config dans le html\n  config = config;\n\n  public myRegex = new RegExp('magosm:', 'g');\n\n  constructor(\n    private mapService: MapService,\n    public layerChangeService: LayerChangeService) {  \n}\n  \n  \n\n  \n  ngOnInit() {\n    let self= this;\n    this.layervariables.forEach(categorie => {\n      categorie.features.forEach(feature => {\n        feature.nom_court_trim = feature.nom_court.replaceAll(' ', '').replaceAll('(', '').replaceAll(')', '');\n      }); \n    }); \n   \n  }\n\n\n  ngAfterViewInit() {\n    $(\"#collapse1\").collapse('show');\n    //On laisse un timeout le temps que les layers soit charg dans la carte\n    setTimeout(() => this.loadVisibleLayersFromUserContext(), 1000);\n    //this.loadVisibleLayersFromUserContext();\n    $('[data-toggle=\"popover\"]').popover();\n  }\n\n\n  loadVisibleLayersFromUserContext() {\n    if (this.userContext.vLay.indexOf(\"none\") < 0) {\n      let vLay: string[] = this.userContext.vLay.split(\",\");\n      for (var i = 0; i < vLay.length; i++) {\n        let _layername: string = vLay[i];\n        const _layerAndCategory = this.mapService.getCategorieAndLayerByStringAttribute(\"layername\", _layername);\n        document.getElementById(\"collapse\" + _layerAndCategory.category).className = \"collapse show\";\n        this.onSelect(null, _layerAndCategory.layer);\n\n      }\n    }\n  }\n\n  onKmlDownload(event, variable: Layer): void {\n    event.stopPropagation();\n    this.mapService.kmlExport(variable);\n  }\n\n  onShpDownload(event, variable: Layer): void {\n    event.stopPropagation();\n    this.mapService.shpExport(variable);\n  }\n\n  onSldDownload(event, variable: Layer): void {\n    event.stopPropagation();\n    window.open(environment.geoserver_baseurl+variable.sld_path, \"_blank\");\n\n  }\n  getState(feature){\n   \n    var lay=this.mapService.getLayersById(feature.layername);\n    if(lay && lay.getSource())\n      return lay.getSource().loadingCounter;\n    return 0;\n  }\n  //Selection d'une couche\n  onSelect(event, variable: Layer): void {\n    console.log(variable.layername);\n\n    if ($('.popover.fade.show.bs-popover-left')){\n      $('.popover.fade.show.bs-popover-left').remove();\n    }\n    if (event) {\n      event.stopPropagation();\n    }\n    this.selectedLayer = variable;\n\n    this.layerChangeService.emitAnnounceLayerChangeEvent(this.selectedLayer);\n    console.log(variable);\n    if(this.mapService.getLayersById(variable.layername).getVisible()){\n      _paq.push(['trackEvent', 'layer_visu', variable.layername]);\n    }\n      \n    \n    \n  };\n\n  changeOpacity(event, variable: Layer, value) {\n    event.stopPropagation();\n    this.mapService.getLayersById(variable.layername).setOpacity(value / 100);\n    console.log(event);\n\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    return false;\n  }\n  onInfo(variable: Layer) {\n    if (variable.md_url) {\n      window.open(variable.md_url, \"blank\")\n      _paq.push(['trackEvent', 'layer_info', variable.layername])\n    }\n  }\n\n  clicktitle(): void {\n    let menu = document.getElementById(\"menuContainer\");\n    let accordion = document.getElementById(\"menuaccordion\");\n\n    if (menu.style.left && menu.style.left != \"\") {\n      menu.style.left = \"\";\n      accordion.style.visibility = \"visible\";\n    } else {\n      menu.style.left = 'calc(100% - 65px)';\n      accordion.style.visibility = \"hidden\";\n    }\n\n  }\n  \n  // Evnement lev lors d'un click sur le bouton \"grille\" en face du nom d'une couche\n  // Cela provoque l'ouverture d'une fentre modale contenant les valeurs attributaires de la couche\n  openAttributeTable($event : any, feature):void{\n    this.featureAttributeTableComponent.setLayer(feature);\n    _paq.push(['trackEvent', 'attribute_table', feature.layername])\n  }\n\n \n}\n  \n\n","module.exports = \"\\n.legendcolor{\\n    width:25px;\\n    height:15px;\\n    display:inline-block;\\n    }\\n\\n#headingLegende{\\n    font-size: 1rem;\\n}\\n\\nh4 {\\n    font-size: 0.7em;\\n    font-weight: bold;\\n}\"","module.exports = \"<div class=\\\"card-header p-2 text-center\\\" role=\\\"tab\\\" id=\\\"headingLegende\\\">\\n  <div data-toggle=\\\"collapse\\\" href=\\\"#collapseLegend\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"collapseLegend\\\">\\n    <b>{{ 'panel.attributes' | translate }}</b>\\n  </div>\\n</div>\\n\\n<div id=\\\"collapseLegend\\\" class=\\\"collapse show\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"headingLegend\\\">\\n  <div id=\\\"legendContainer\\\" style=\\\"width:100%;height:auto;\\\">\\n    <div *ngIf=\\\"legendUrls\\\" id=\\\"legend\\\" class=\\\"legend\\\">\\n      <ng-container *ngFor=\\\"let legendUrl of legendUrls; let i = index\\\">\\n        <div *ngIf=\\\"legendSubTitles\\\">{{legendSubTitles[i]}}</div>\\n            <img  src=\\\"{{legendUrls[i]}}\\\" class=\\\"img-fluid\\\" />\\n      </ng-container>\\n    </div>\\n  </div>\\n</div>\"","import { Component, Input, OnInit } from '@angular/core';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'app-legend',\n  templateUrl: './legend.component.html',\n  styleUrls: ['./legend.component.css']\n})\nexport class LegendComponent implements OnInit {\n\n  @Input() public legendUrls: string[];\n  @Input() public legendSubTitles: string[];\n  @Input() public legendTitle: string;\n  @Input() public currentScale;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n      //$(\"#accordionLegend\").draggable({cancel:\"#legendContainer\"});\n      $(\"#menu-close\").click(function(e) {\n        e.preventDefault();\n        $(\"#sidebar-wrapper\").toggleClass(\"active\");\n      });\n      $(\"#menu-toggle\").click(function(e) {\n        e.preventDefault();\n        $(\"#sidebar-wrapper\").toggleClass(\"active\");\n      });      \n  }\n\n}\n","module.exports = \"  #headingMapController{\\n    font-size: 1rem;\\n  }\\n  .layerbar-nav {\\n    list-style: none;\\n    margin: 0;\\n    padding: 0;\\n  }\\n  .layerbar-nav li {\\n    line-height: 50px;\\n    text-indent: 20px;\\n  }\\n  ul{\\n    padding-left:0px;\\n  }\\n  #baseLayerCombo{\\n\\tborder-style: none;\\n\\tbackground-color: #eceeef;\\n  color: #464a4c;\\n  font-size: 12px;\\n}\\n  /*Opacity slider \\nSee styles.css for more information*/\\n  input[type=range] {\\n  width:75%; \\n  padding: 0px 0px 0px 0px;\\n}\\n  /* Partie sur le menu des couches */\\n  h4 {\\n    font-size: 14px;\\n    font-weight: bold;\\n}\"","module.exports = \"<div id=\\\"layerbar-nav\\\" class=\\\"layerbar-nav\\\">  \\n  <div class=\\\"card-header p-2 text-center\\\" role=\\\"tab\\\" id=\\\"headingMapController\\\">\\n    <b>{{ 'panel.parameters' | translate }}</b>\\n  </div>\\n  <ul style=\\\"list-style: none;\\\">\\n    <span id=\\\"layer-selector\\\">\\n    <li class=\\\"card-header p-2\\\"><h4>{{ 'panel.basemap' | translate }}</h4></li>\\n    <li>\\n        <select id=\\\"baseLayerCombo\\\" (change)=\\\"changeBaseLayer($event.target.value)\\\">\\n          <option value=\\\"OSM\\\">OpenStreetMap</option>\\n          <option value=\\\"world\\\">World</option>\\n        </select>\\n    </li>\\n    </span>  \\n    <li id=\\\"input-range-height-ref\\\" class=\\\"card-header p-2\\\"><h4>{{ 'panel.transparency' | translate }}</h4></li>\\n    <li id=\\\"input-range\\\">\\n        <input class=\\\"input-range\\\" \\n          #ref type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"2.5\\\" \\n          value=\\\"{{baseLayerOpacityRange}}\\\" \\n          (change)=\\\"changeOpacity(ref.value)\\\"\\n        />\\n    </li>\\n  </ul>\\n</div>\\n\"","import { Component, OnInit, AfterViewInit, Input } from '@angular/core';\nimport { MapService } from '../../service/map.service';\nimport { UserContext } from '../../model/UserContext';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'app-map-controller',\n  templateUrl: './map-controller.component.html',\n  styleUrls: ['./map-controller.component.css']\n})\nexport class MapControllerComponent implements AfterViewInit {\n\n  public baseLayerOpacityRange;\n  @Input('userContext') \n  public userContext: UserContext;\n\n  constructor(\n    public mapService: MapService\n  ) { \n    this.mapService.getAnnounceOpacityChangeEventEmitter().subscribe(\n      newOpacity=>{\n        //console.log(newSelectedLayer)\n        this.baseLayerOpacityRange=newOpacity;\n      }\n    );\n  }\n\n  ngOnInit() {\n    //rcupre le baseLayer du userContext\n    $('option[value='+this.userContext.bLay+']').attr('selected', 'selected');\n    this.baseLayerOpacityRange = this.userContext.tr;\n  }\n\n  ngAfterViewInit() {\n    this.fixInputRangeHeight();\n  }\n\n  fixInputRangeHeight(){//compatibilit IE11\n    //la hauteur du champ input contenant le texte \"Transparence\" est pris comme rfrence par les deux inputs voisins (layer-selector et opacity-range)\n    var inputRangeHeightRef = (<HTMLElement>document.getElementById('input-range-height-ref')).offsetHeight;\n    //console.log (inputRangeHeightRef);\n    (<HTMLElement>document.getElementById('input-range')).style.height= inputRangeHeightRef+'px';\n    (<HTMLElement>document.getElementById('layer-selector')).style.height= inputRangeHeightRef+'px';\n  }\n\n  changeBaseLayer(newBaseLayer){\n    this.mapService.changeBaseLayer(newBaseLayer);\n  }\n\n  changeOpacity(newValue){\n    this.mapService.changeOpacity(newValue);\n  }\n}\n","module.exports = \".btn {\\n  font-size: 14px;\\n}\\n\\n.btn-feature {\\n  text-align: left;\\n}\\n\\n.btn-primary {\\n  color: #fff;\\n  background-color: #CC1517;\\n  border-color: #CC1517;\\n}\\n\\n/* panneau masquable */\\n\\n#panel-switcher-wrapper {\\n  margin-right: -300px;\\n  right: 0;\\n  top: 0vw;\\n  width: 300px;\\n  position: fixed;\\n  height: 100%;\\n  z-index: 1000;\\n  background-color: rgba(255, 255, 255, 0.8);\\n  transition: all 0.5s ease-in 0s;\\n  -webkit-transition: all 0.5s ease-in 0s;\\n  -moz-transition: all 0.5s ease-in 0s;\\n  -ms-transition: all 0.5s ease-in 0s;\\n  -o-transition: all 0.5s ease-in 0s;\\n}\\n\\n.panel-switcher-opts {\\n  right: 5px;\\n  position: fixed;\\n  z-index: 1;\\n  top: 5px;\\n  transition: all 0.5s ease-in 0s;\\n  -webkit-transition: all 0.5s ease-in 0s;\\n  -moz-transition: all 0.5s ease-in 0s;\\n  -ms-transition: all 0.5s ease-in 0s;\\n  -o-transition: all 0.5s ease-in 0s;\\n  background-color: rgba(255,255,255,.4);\\n  border-radius: 4px;\\n  padding: 2px;\\n}\\n\\n.panel-switcher-opts.active{\\n  right: 300px;\\n  transition: all 0.5s ease-out 0s;\\n  -webkit-transition: all 0.5s ease-out 0s;\\n  -moz-transition: all 0.5s ease-out 0s;\\n  -ms-transition: all 0.5s ease-out 0s;\\n  -o-transition: all 0.5s ease-out 0s;\\n}\\n\\n/* Same colors as the zoom button (on the left) */\\n\\n.panel-switcher-opts .btn{\\n  color: #fff;\\n  background-color: rgba(204, 21, 23, 0.5);\\n  border: none;\\n}\\n\\n.panel-switcher-opts .btn:hover{\\n  text-decoration: none;\\n  background-color: rgba(136, 0, 16, 0.7);\\n}\\n\\n.panel-switcher-nav {\\n  position: absolute;\\n  top: 0;\\n  width: 300px;\\n  list-style: none;\\n  margin: 0;\\n  padding: 0; \\n}\\n\\n.panel-switcher-nav li {\\n  line-height: 50px;\\n  text-indent: 20px;\\n}\\n\\n.panel-switcher-nav li a {\\n  color: #999999;\\n  display: block;\\n  text-decoration: none;\\n}\\n\\n.panel-switcher-nav li a:hover {\\n  color: #fff;\\n  background: rgba(255,255,255,0.2);\\n  text-decoration: none;\\n}\\n\\n.panel-switcher-nav li a:active, .panel-switcher-nav li a:focus {\\n  text-decoration: none;\\n}\\n\\n.btn-panel-switcher {\\n  width: 110px;\\n  height: 25px;\\n}\\n\\n#panel-switcher-wrapper.active {\\n  right: 300px;\\n  width: 300px;\\n  transition: all 0.5s ease-out 0s;\\n  -webkit-transition: all 0.5s ease-out 0s;\\n  -moz-transition: all 0.5s ease-out 0s;\\n  -ms-transition: all 0.5s ease-out 0s;\\n  -o-transition: all 0.5s ease-out 0s;\\n}\\n\\n.toggle {\\n  margin: 5px 5px 0 0;\\n  line-height: .5;\\n}\\n\\n/* Position of the close button **/\\n\\n#panel-switcher-close.toggle{\\n  position: absolute;\\n  right:15px;\\n}\\n\\n/* Rules if the width of the screen is under a limit : the 3 options are moving down */\\n\\n@media all and (max-width: 470px)\\n{\\n  .panel-switcher-opts{\\n    top:60px;\\n  }\\n}\\n\\n@media all and (max-width: 1010px)\\n{\\n  .panel-switcher-opts.active{\\n    top: 60px;\\n  }\\n}\\n\"","module.exports = \"<table class=\\\"panel-switcher-opts dropright\\\"><tbody>\\r\\n  <tr><button  class=\\\"btn btn-outline-light dropright \\\"  data-toggle=\\\"dropdown\\\" class=\\\"btn btn-primary dropright\\\">\\r\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"white\\\" class=\\\"bi bi-translate\\\" viewBox=\\\"0 0 16 16\\\">\\r\\n     <path d=\\\"M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z\\\"/>\\r\\n     <path d=\\\"M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z\\\"/>\\r\\n   </svg>\\r\\n  </button>\\r\\n<div class=\\\"dropdown-menu dropdown-menu-right\\\">\\r\\n <button class=\\\"dropdown-item\\\" type=\\\"button\\\" (click)=\\\"useLanguage('de')\\\" >Deutsch</button>\\r\\n <button class=\\\"dropdown-item\\\" type=\\\"button\\\" (click)=\\\"useLanguage('fr')\\\" >Franais</button>\\r\\n <button class=\\\"dropdown-item\\\" type=\\\"button\\\" (click)=\\\"useLanguage('it')\\\" >Italiano</button>\\r\\n <button class=\\\"dropdown-item\\\" type=\\\"button\\\" (click)=\\\"useLanguage('en')\\\" >English</button>\\r\\n</div>\\r\\n\\r\\n\\r\\n</tr>\\r\\n  <tr><a id=\\\"menu-toggle\\\" (click)=\\\"setPanelToShow('layerTree')\\\" href=\\\"#\\\" class=\\\"btn btn-primary btn-panel-switcher toggle\\\">\\r\\n    {{ 'button.topics' | translate }}\\r\\n  </a></tr>\\r\\n  <tr><a class=\\\"btn btn-outline-light dropdown-toggle\\\" (click)=\\\"setPanelToShow('carte')\\\" href=\\\"#\\\" class=\\\"btn btn-primary btn-panel-switcher toggle\\\">\\r\\n    {{ 'button.parameter' | translate }}\\r\\n  </a></tr>\\r\\n\\r\\n\\r\\n  <tr >\\r\\n    <a \\r\\n      [hidden]=\\\"!mapService.legendUrls || !(mapService.legendUrls.length>0)\\\"\\r\\n      id=\\\"legende-toggle\\\" (click)=\\\"setPanelToShow('legende')\\\" href=\\\"#\\\" class=\\\"btn btn-primary btn-panel-switcher toggle\\\"\\r\\n    >\\r\\n    {{ 'button.legend' | translate }}\\r\\n    </a>\\r\\n  </tr>\\r\\n</tbody></table>\\r\\n\\r\\n<div \\r\\n  class=\\\"card row\\\" id=\\\"panel-switcher-wrapper\\\" style=\\\"overflow-y:auto;overflow-x:hidden;\\\" title=\\\" {{'panel.explanationtitle' | translate}} \\\"\\r\\n  data-container=\\\"body\\\"\\r\\n  data-toggle=\\\"popover\\\"\\r\\n  data-html=\\\"true\\\"\\r\\n  translate=\\\"true\\\"\\r\\n  attr.data-content=\\\"<div>{{'panel.explanation' | translate}}</div>\\\"\\r\\n  data-placement=\\\"right\\\"\\r\\n>\\r\\n  <div class=\\\"panel-switcher-nav\\\" role=\\\"tab\\\">\\r\\n    <!-- To close the panel switcher -->\\r\\n    <a id=\\\"panel-switcher-close\\\" href=\\\"#\\\" class=\\\"btn btn-outline-secondary btn-sm pull-right toggle\\\">\\r\\n      <b class=\\\"glyphicon glyphicon-remove\\\">X</b>\\r\\n    </a>\\r\\n    <app-layer-tree [hidden]=\\\"panelToShow != 'layerTree'\\\" [userContext]=\\\"userContext\\\" id=\\\"layerTree\\\"></app-layer-tree>\\r\\n    <app-map-controller *ngIf=\\\"panelToShow == 'carte'\\\" [userContext]=\\\"userContext\\\"></app-map-controller>\\r\\n    <app-legend\\r\\n      *ngIf=\\\"panelToShow == 'legende'\\\"\\r\\n      [legendUrls]=\\\"mapService.legendUrls\\\" [legendSubTitles]=\\\"mapService.legendSubTitles\\\" [legendTitle]=\\\"mapService.legendTitle\\\"\\r\\n      [currentScale]=\\\"mapService.currentScale\\\" id=\\\"accordionLegend\\\"\\r\\n    >\\r\\n    </app-legend>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, ViewChild, OnInit, Input, Output, ChangeDetectorRef, OnDestroy} from '@angular/core';\nimport { MapService } from '../service/map.service';\nimport { Router } from '@angular/router';\nimport { LayerTreeComponent } from '../map-panel-switcher-components/layer-tree/layer-tree.component';\nimport { UserContext } from '../model/UserContext';\nimport {TranslateService} from '@ngx-translate/core';\n\n\ndeclare var $: any;\ndeclare var _paq: any;\n\n@Component({\n  selector: 'app-map-panel-switcher',\n  templateUrl: './map-panel-switcher.component.html',\n  styleUrls: ['./map-panel-switcher.component.css']\n})\nexport class MapPanelSwitcherComponent implements OnInit {\n\n  \n  public panelToShow = 'layerTree';                       //par dfaut on charge le panel Menu\n\n  @Input('userContext') \n  public userContext: UserContext;\n\n  // As soon we close the panel, we want the startup dialog to hide. But for\n  // some reason (side effect of Angular's rerender on Bootstrap's popover?),\n  // the DOM element for the dialog is created again when one clicks on the\n  // close panel button. Thus we use a local variable that we check every time\n  // the popover is \"inserted\", to force it to hide after a first click to close\n  // (see below).\n  private showStartDialog: Boolean = true;\n\n  constructor(\n    private translate:TranslateService,\n    public router: Router, \n    public mapService: MapService,\n    public cdr: ChangeDetectorRef\n  ) { \n  }\n  //use language selected\n\n  useLanguage(language:string){this.translate.use(language);\n  }\n  \n\n  ngOnInit() {\n    var self = this;\n    $(\"#panel-switcher-close\").click(function (e) {\n      console.log(\"close\");\n      self.showStartDialog = false;\n     \n      $('#panel-switcher-wrapper').popover('hide');\n      e.preventDefault();\n      self.closePanel();\n      \n      \n    });\n    $(\".btn-panel-switcher\").click(function(e) {\n      e.preventDefault();\n    }); \n    $('#panel-switcher-wrapper').on('inserted.bs.popover', function () {\n      if (!self.showStartDialog) {\n       $('#panel-switcher-wrapper').popover('hide');\n      }\n    });\n   \n    this.setPanelToShow('layerTree');\n    \n  }\n\n\n  setPanelToShow(newPanelToShow){\n\n   \n      let oldPanel = this.panelToShow;\n      let newPanel = newPanelToShow;\n      this.panelToShow = newPanelToShow;//mise  jour du panelToShow\n\n      //gestion de l'ouverture/fermeture du panneau sur le bon composant\n      if(!$(\".panel-switcher-opts\").hasClass(\"active\")){//si le panneau est ferm, on l'ouvre\n        $(\"#panel-switcher-wrapper\").toggleClass(\"active\");\n        $(\".panel-switcher-opts\").toggleClass(\"active\");\n        //console.log('this.panelToShow : '+panelToShow)\n        _paq.push(['trackEvent', 'panel_open' , newPanelToShow])\n      } else {//si le panneau est dj ouvert\n        if((oldPanel == newPanel)){//si on clique sur l'option actuellement visible : on ferme le panneau\n          this.closePanel();\n        }\n        \n      }\n    \n\n  \n  }\n\n  closePanel(){\n    $(\".panel-switcher-opts\").toggleClass(\"active\");\n    $(\"#panel-switcher-wrapper\").toggleClass(\"active\");\n  }\n\n\n  \n}\n","module.exports = \"#accordionLegend{\\n\\tposition:absolute;\\n\\ttop:10%;\\n\\tleft:2%;\\n\\twidth:15%;\\n}\\n\\n#accordionFeaturePanel{\\n\\tposition:absolute;\\n\\ttop: calc(10% + 265px);\\n\\tleft:calc(2% - 15px);\\n\\twidth:calc(20% + 30px);\\n}\\n\\n#loading-counter{\\n\\tposition:absolute;\\n\\tcolor:white;\\n\\tz-index: 100001;\\n\\ttop:20px;\\n\\tleft:25px\\n}\\n\\n.lds-ring {\\n\\tbackground-color: #CC1517;\\n\\tz-index: 100000;\\n\\tdisplay: inline-block;\\n\\tposition: relative;\\n\\twidth: 64px;\\n\\theight: 64px;\\n  }\\n\\n.lds-ring div {\\n\\tbox-sizing: border-box;\\n\\tdisplay: block;\\n\\tposition: absolute;\\n\\twidth: 51px;\\n\\theight: 51px;\\n\\tmargin: 6px;\\n\\tborder: 6px solid #fff;\\n\\tborder-radius: 50%;\\n\\t-webkit-animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n\\t        animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\\n\\tborder-color: #fff transparent transparent transparent;\\n  }\\n\\n.lds-ring div:nth-child(1) {\\n\\t-webkit-animation-delay: -0.45s;\\n\\t        animation-delay: -0.45s;\\n  }\\n\\n.lds-ring div:nth-child(2) {\\n\\t-webkit-animation-delay: -0.3s;\\n\\t        animation-delay: -0.3s;\\n  }\\n\\n.lds-ring div:nth-child(3) {\\n\\t-webkit-animation-delay: -0.15s;\\n\\t        animation-delay: -0.15s;\\n  }\\n\\n@-webkit-keyframes lds-ring {\\n\\t0% {\\n\\t  -webkit-transform: rotate(0deg);\\n\\t          transform: rotate(0deg);\\n\\t}\\n\\t100% {\\n\\t  -webkit-transform: rotate(360deg);\\n\\t          transform: rotate(360deg);\\n\\t}\\n  }\\n\\n@keyframes lds-ring {\\n\\t0% {\\n\\t  -webkit-transform: rotate(0deg);\\n\\t          transform: rotate(0deg);\\n\\t}\\n\\t100% {\\n\\t  -webkit-transform: rotate(360deg);\\n\\t          transform: rotate(360deg);\\n\\t}\\n  }\\n\\n#loading-panel{\\n\\tposition:absolute;\\n\\ttop:80px;\\n\\tleft:42px\\n}\\n\\napp-apiadresse{\\n\\tposition:absolute;\\n\\ttop:10px;\\n\\tleft:160px;\\n}\\n\\n#map-scale {\\n\\tleft: 180px;\\n}\\n\\n#map-zoom-level{\\n\\tleft: 13px;\\n\\twidth:25px;\\n\\ttop: 120px;\\n\\tfont-size: 0.9em;\\n\\n}\\n\\n#mouse-position {\\n\\tleft: 330px;\\n}\\n\\n#mouse-position, #map-scale, #map-zoom-level {\\n\\tpadding: 1px 5px;\\n\\tborder-radius: 3px;\\n\\tposition:absolute;\\n\\tdisplay: inline-block;\\n\\tcolor: #444;\\n\\tbackground: rgba(255, 255, 255, 0.6);\\n}\\n\\n#mouse-position, #map-scale{\\n\\tbottom: 8px;\\n\\tfont-size: 0.7em;\\n}\\n\\n#toggle-legend.collapsed span::after {\\n\\tcontent: '';\\n}\\n\\n#toggle-legend span::after {\\n\\tcontent: '';\\n}\\n\\n.map {\\n\\theight: 100vh;\\n\\twidth: 100vw;\\n}\\n\\nlabel  {\\n\\tmargin-bottom: 0;\\n}\\n\"","module.exports = \"<div style=\\\"position:relative\\\">\\n  <div\\n    id=\\\"map\\\" class=\\\"map\\\"\\n    (drop)=\\\"onDrop($event)\\\"\\n    (dragover)=\\\"onDragOver($event)\\\"\\n  ></div>\\n  <app-apiadresse (citySelected)=\\\"onCitySelected($event)\\\"></app-apiadresse>\\n  <div id=\\\"map-scale\\\"></div>\\n  <div id=\\\"map-zoom-level\\\"></div>\\n  <div id=\\\"mouse-position\\\"></div>\\n  <div id=\\\"loading-panel\\\" *ngIf=\\\"mapService.loadingCounter>0\\\">\\n    <div id=\\\"loading-counter\\\">{{mapService.loadingCounter}}</div>\\n    <div class=\\\"lds-ring\\\"><div></div><div></div><div></div><div></div></div>\\n  </div>\\n  <app-feature-panel\\n    *ngIf=\\\"selectedFeature\\\"\\n    [selectedLayer]=\\\"selectedLayer\\\"\\n    [selectedFeatures]=\\\"selectedFeature\\\"\\n    id=\\\"accordionFeaturePanel\\\"\\n  ></app-feature-panel>\\n</div>\\n\"","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { Layer } from '../model/Layer';\nimport { HttpClient,HttpParams } from '@angular/common/http';\nimport { LegendComponent } from '../map-panel-switcher-components/legend/legend.component';\nimport { ApiAdresseComponent } from '../apiadresse/apiadresse.component';\nimport { Router } from '@angular/router';\nimport { MapService } from '../service/map.service';\nimport { LayerChangeService } from '../service/layer-change.service';\nimport { UserContext } from '../model/UserContext';\nimport { environment } from '../../environments/environment';\nimport { LayerAndCategory } from 'app/model/LayerAndCategory';\nimport {TranslateService} from '@ngx-translate/core';\n\ndeclare var proj4: any;\ndeclare var $: any;\ndeclare var ol: any;\ndeclare var config: any;\ndeclare var _paq: any;\n\nconst isUrl = function (str: string) {\n    // If str is not a valid URL, \"new URL(str)\" throw an exception.\n    try {\n    const url = new URL(str);\n    return true;\n  } catch (error){\n    return false;\n  } \n}\n\n\nconst getUrlFromDataTransfer = function (dataTransfer: DataTransfer) {\n  if (dataTransfer.types.indexOf('text/uri-list') !== -1) {\n    return dataTransfer.getData('URL');\n  } else if (\n    dataTransfer.types.indexOf('text/plain') !== -1\n    && isUrl(dataTransfer.getData('text/plain'))\n  ) {\n    return dataTransfer.getData('text/plain');\n  } else {\n    return undefined;\n  } \n} \n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.css'],\n})\n\nexport class MapComponent implements OnInit {\n\n  //Pour utiliser la variable config dans le html\n  config = config;\n\n  @Input('userContext') userContext: UserContext;\n\n  //commenter les bonnes lignes dans le fichier de config selon qu'on est en local ou en intgration\n  private geoserver_baseurl = environment.geoserver_baseurl;\n\n  //paramtres map\n  private map: any;\n  private closeResult: string;\n  private currentLayer: any;\n  private view: any;\n  //layers et sources  l'chelle infra-communale\n\n  //liste des layers visibles au niveau infra-communal\n  private visibleLayers: any\n  private id_layers: string;\n  private id_legends: string[];\n  //variable qui va rcuprer l'indicateur slectionn via le Menu\n  selectedLayer: Layer;\n  //variables utilises pour afficher en surcouche le feature slectionn par l'utilisateur\n  public selectedFeature: any;\n  //Constantes utiles pour calculer l'chelle  partir de la rsolution\n  private gridset = config.GRIDSET;\n  private INCHES_PER_UNIT = { 'm': 39.37, 'dd': 4374754 };\n  private DOTS_PER_INCH = 72;\n  //Variables utiles au chargement de la lgende selon le niveau de zoom\n  private currentResolution: any;\n  private currentScale: any;\n  private updatedScale: any;\n\n\n  //Variables utiles au composant de golocalisation\n  @ViewChild(ApiAdresseComponent) public apiadresse: ApiAdresseComponent;\n\n  constructor(\n    private translate:TranslateService,\n    public mapService: MapService,\n    private http: HttpClient,\n    public router: Router,\n    public layerChangeService: LayerChangeService\n  ) {\n    this.layerChangeService.getAnnounceLayerChangeEventEmitter().subscribe(\n      newSelectedLayer => {\n        //console.log(newSelectedLayer)\n        this.selectedLayer = newSelectedLayer;\n      }\n    );\n  }\n\n  ngOnInit() {\n    this.initMap();\n  }\n\n  ngAfterViewInit() {\n  }\n\n  initMap() {\n    //proj4.defs(MainmapComponent.PROJECTION_CODE, \"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m   +no_defs\");\n\n\n    var mousePositionControl = new ol.control.MousePosition({\n      coordinateFormat: function (coords) {\n        return ol.coordinate.format(coords, 'Lat : {y} Lon : {x} (WGS84)', 4)\n      },\n      projection: 'EPSG:4326',\n      className: 'custom-mouse-position',\n      target: document.getElementById('mouse-position'),\n      undefinedHTML: '&nbsp;'\n    });\n\n    let center: number[] = [this.userContext.lon, this.userContext.lat];\n    this.view = new ol.View({\n      projection: config.PROJECTION_CODE,\n      center: ol.proj.transform(center, 'EPSG:4326', config.PROJECTION_CODE),\n      zoom: this.userContext.z,\n      minZoom: 3//,\n      //maxZoom: 18\n    })\n\n    //cration de la map\n    this.map = new ol.Map({\n      controls: ol.control.defaults({\n        attributionOptions: /** @type {olx.control.AttributionOptions} */ ({\n          collapsible: false\n        })\n      }).extend([\n        mousePositionControl,\n        new ol.control.ScaleLine()\n      ]),\n      target: 'map',\n      view: this.view\n    });\n    this.mapService.setMap(this.map, this.userContext);\n\n    this.mapService.addSelectionLayer();\n\n    this.map.on('click', this.onClick.bind(this));\n    this.map.on('moveend', this.onZoom.bind(this)); \n\n\n    this.mapService.addLayer('world', 'assets/data/countries_ecem.geojson');\n    var parser = new ol.format.WMTSCapabilities();\n    let self = this;\n    this.http.get(environment.geoserver_baseurl + '/gwc/service/wmts?REQUEST=GetCapabilities', {responseType: 'text'})\n    .subscribe(\n      \n      data => {\n        console.log(data);\n        self.mapService.setWMTSResult(parser.read(data));\n        self.initLayersFromConfig();\n      },\n      error => {\n        console.log(error);\n      });\n\n\n\n    this.currentResolution = this.view.getResolution();\n    this.currentScale = this.mapService.getScaleFromResolution(this.view.getResolution(), this.map.getView().getProjection().getUnits(), true);\n    this.updateScale();\n    this.updateZoomLevel();\n  }\n\n  initLayersFromConfig() {\n    let layers = config.LAYERS;\n    for (var i = layers.length - 1; i >= 0; i--) {\n      var categorie = layers[i];\n      for (var j = categorie.features.length - 1; j >= 0; j--) {\n        console.log(categorie.features[j]);\n        categorie.features[j].opacity = 100;\n        if (categorie.features[j].type == \"WMS\") {\n          this.mapService.addWMSLayer(categorie.features[j], false);\n        }\n        else if (categorie.features[j].type == \"WMTS\") {\n          this.mapService.addWMTSLayer(categorie.features[j], false);\n        }\n        else if (categorie.features[j].type == \"VectorTile\") {\n          this.mapService.addVectorTileLayer(categorie.features[j], false);\n        }\n      }\n    }\n    \n  }\n\n  onZoom(event) {\n    this.currentScale = this.mapService.getScaleFromResolution(this.view.getResolution(), this.map.getView().getProjection().getUnits(), true);\n    this.updateScale();\n    this.updateZoomLevel();\n    this.computeSingleLegend();\n  }\n\n  updateScale() {\n    let scale = parseInt(this.currentScale);\n    let strScale = scale.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n    document.getElementById('map-scale').innerHTML = '1 /' + strScale + '    ';\n  }\n\n  updateZoomLevel(){\n    let zoom = this.map.getView().getZoom();\n    //console.log(zoom)\n    document.getElementById('map-zoom-level').innerHTML = '<center>' + Math.round(zoom) +'</center>';\n  }\n  //use language selected\n\n  useLanguage(language:string){this.translate.use(language);\n  }\n\n\n  updateState(newSelectedLayer) {//fonction appele lorsque l'utilisateur choisi un nouvel indicateur\n\n    try { //on ajoute l'aggrgation de couche correspondant  l'indicateur\n      this.selectedLayer = newSelectedLayer;\n      console.log(\"this.selectedLayer : \" + this.selectedLayer);\n      var layer = this.mapService.getLayersById(this.selectedLayer.layername);\n      this.currentLayer = layer;\n      if (newSelectedLayer.maxScaleDenominator) {\n        if (this.mapService.getScale() > newSelectedLayer.maxScaleDenominator && !layer.getVisible()) {\n          var minZoom = this.mapService.getZoomFromScale(newSelectedLayer.maxScaleDenominator);\n          alert(this.translate.instant('alert.display')+\"\\n\"+this.translate.instant('alert.display2') + minZoom + \" ( 1/\" + newSelectedLayer.maxScaleDenominator +\"). \"+this.translate.instant('alert.display2'))\n        }\n      }\n      layer.setVisible(!layer.getVisible());\n\n      if (this.selectedFeature) { //on rinitialise selectedFeature\n        console.log(\"this.selectedFeature\")\n        this.mapService.cleanSelection();\n\n        this.selectedFeature = null;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n\n\n\n    try {\n      this.mapService.legendTitle = newSelectedLayer.nom_court;\n\n      this.computeSingleLegend();\n\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  onClick(event) {\n    var viewResolution = /** @type {number} */ (this.view.getResolution());\n\n    if (this.selectedLayer) {\n      this.visibleLayers = [this.currentLayer];\n      this.id_layers = this.selectedLayer.layername;\n      this.printSelectedFeatureOnMap(\n        this.visibleLayers, this.id_layers, viewResolution, event\n      );\n    }\n    if ($('.popover.fade.show.bs-popover-left')){\n      $('.popover.fade.show.bs-popover-left').remove();\n    }\n  }\n\n  setVisibleLayersAndLegends(): boolean { //tient  jour les infos sur les layers visibles et les lgendes  afficher\n    console.log(\"setVisibleLayersAndLegends\");\n    this.visibleLayers = [];\n    this.id_layers = '';\n    this.id_legends = [];\n    this.mapService.legendSubTitles = [];\n    let array_id_layers = [];\n\n    this.id_layers = array_id_layers.join(',');\n    console.log(this.id_legends);\n    return true;\n  };\n\n  printSelectedFeatureOnMap(visibleLayers, id_layers, viewResolution, event) {\n    id_layers = this.mapService.getVisibleLayersIdList();\n    var url = new ol.source.TileWMS(({\n      url: this.geoserver_baseurl + \"/wms?\",\n      crossOrigin: 'anonymous',\n      params: ({ 'LAYERS': id_layers })\n    })).getGetFeatureInfoUrl(\n      event.coordinate, viewResolution, 'EPSG:3857',\n      { 'INFO_FORMAT': 'text/xml', 'QUERY_LAYERS': id_layers, 'BUFFER': '10', 'FEATURE_COUNT': '10' }\n      );\n\n    if (this.currentScale) {\n      this.http.get(url, {responseType: 'text'})\n        .subscribe((function (response) { // this is the standard way to read the features\n          var allFeatures = new ol.format.WMSGetFeatureInfo().readFeatures(response);\n          if (this.selectedFeature) { //on rinitialise vectorSource\n            this.mapService.cleanSelection();\n            this.selectedFeature = null;\n          }\n          if (allFeatures.length >= 1) { //si on clique sur 1 seul objet\n            this.selectFeatures(allFeatures);\n          }\n\n        }).bind(this));\n    }\n  }\n\n\n\n  selectFeatures(allFeatures) { //rcupre un feature dans une liste de features\n    this.selectedFeature = allFeatures; //ajoute le feature en surcouche  la carte\n    this.mapService.addToSelection(this.selectedFeature[0]);\n\n\n    if (this.selectedFeature[0].getKeys().indexOf(\"osm_original_geom\") >= 0) {\n      let wkt_geom = this.selectedFeature[0].get(\"osm_original_geom\");\n\n      // si l'on manipule des objets de type point (ou \"node\"), \n      // nous n'avons pas de geom, donc nous ne traitons pas ce cas ici\n      if (wkt_geom){\n        //  nous manipulons des objets geom de type polygone (ou \"way\"), l'objet contient une gomtrie\n        var format = new ol.format.WKT();\n        \n        var feature = format.readFeature(wkt_geom.split(';')[1], {\n          dataProjection: 'EPSG:3857',\n          featureProjection: 'EPSG:3857'\n        });\n        this.mapService.addToSelection(feature);\n      }\n    }\n\n    console.log(this.selectedFeature);\n  }\n\n  zoomTo(location, zoomlevel) {\n    this.map.getView().setCenter(ol.proj.transform(location, 'EPSG:4326', config.PROJECTION_CODE), 16);\n    this.map.getView().setZoom(zoomlevel);\n  }\n\n\n\n  hideLayer(layer, layerName) {\n    if ((<HTMLInputElement>document.getElementById(layerName)).checked) {\n      layer.setVisible(true);\n    }\n    else {\n      layer.setVisible(false);\n    }\n  }\n\n  computeSingleLegend() {\n    let ids = this.mapService.getVisibleLayersIdArrayList();\n    this.mapService.legendUrls = [];\n    this.mapService.legendSubTitles = [];\n    for (var i = 0; i < ids.length; i++) {\n     \n      if(this.mapService.isInRange(ids[i])){\n        let _layerAndCategory: LayerAndCategory = this.mapService.getCategorieAndLayerByStringAttribute(\"layername\", ids[i]);\n        this.mapService.legendSubTitles.push(_layerAndCategory.layer.nom_court);\n        this.mapService.legendUrls.push(this.geoserver_baseurl + '/wms?LAYER=' + ids[i] + '&SERVICE=WMS&VERSION=1.3.0&STRICT=false&REQUEST=GetLegendGraphic&FORMAT=image%2Fpng&TRANSPARENT=true&SCALE=' + this.currentScale);\n      }\n       }\n    // this.legendUrls = [];\n    console.log(this.mapService.legendUrls);\n  }\n\n\n\n  onCitySelected(city) {\n\n    if (city.attrs.x) {\n      // on calcule le zoom pour l'adapter au rsultat de la recherche en fonction du type d'objet trouv :\n      // type : (housenumber | street  | locality | municipality)\n      var zoomlevel = city.attrs.zoomlevel;\n      var coordinates = [city.attrs.lon,city.attrs.lat];\n      var rank = city.attrs.origin;\n      if (rank == 'Kantone') {\n        zoomlevel = 10;\n      } else if (rank == 'district') {\n        zoomlevel = 12;\n      } else if (rank == 'gg25') {\n        zoomlevel = 14;\n      } else if (rank == 'address') {\n        zoomlevel = 18;\n      }else if (rank == 'gazetteer') {\n        zoomlevel = 19;\n      };\n      // On fait le zoom\n      this.zoomTo(coordinates, zoomlevel);\n    }\n  }\n\n  addShapefileLayerInConfig({layername, nom_court, type}) {\n    const layer = {\n      layername,\n      nom_court,\n      type,\n      'download_kml': false,\n      'download_shp': false\n    };\n    const idForCustomSourcesCategory = 4;\n    const customSourcesCategory = config.LAYERS.find(\n      category => (category.id_categorie === idForCustomSourcesCategory)\n    );\n    customSourcesCategory.features.push(layer);\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n    const url = getUrlFromDataTransfer(event.dataTransfer)\n    if (url !== undefined) {\n      const id = `shapefile:url:[${url}]`;\n      this.mapService.addShapefileLayer(id, url)\n      .then(() => {\n        this.addShapefileLayerInConfig({\n          'layername': id,\n          'nom_court': url,\n          'type': 'ShapeFileUrl'\n        });\n        _paq.push(['trackEvent', `layer_list`, 'add_shapefile_url'])\n      }).catch(error => {\n        alert(\"Le fichier ne semble pas tre au format ShapeFile.\");\n      });\n    } else if (event.dataTransfer.files.length > 0) {\n      const file: File = event.dataTransfer.files[0];\n      const reader = new FileReader();\n      reader.onload = (e : any) => {\n        const buffer = e.target.result as ArrayBuffer;\n        // TODO id collision if several shapefiles have the same name. Use a hash\n        // on the arraybuffer? For now, only use a random number to mitigeate\n        // collision.\n        const pseudoUniqueId = Math.floor(Math.random()*1000000000000);\n        const id = `shapefile:buffer:${file.name}:${pseudoUniqueId}`;\n        this.mapService.addShapefileLayer(id, buffer)\n        .then(() => {\n          this.addShapefileLayerInConfig({\n              'layername': id,\n              'nom_court': file.name,\n              'type': 'ShapeFileBuffer'\n          });\n          _paq.push(['trackEvent', `layer_list`, 'add_local_shapefile', file.size])\n        }).catch(error => {\n          alert(\"Le fichier ne semble pas tre au format ShapeFile.\");\n        });\n      }\n      reader.readAsArrayBuffer(file);  \n    }\n  }\n\n  onDragOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n}\n","export class Change{\n    osmId : number\n    id : number\n    changeType:number\n    tagsNew\n    tagsOld\n    timestamp: string\n    versionNew : number\n    versionOld : number\n    type : string\n    theGeomNew\n    theGeomOld\n\n    constructor(){};\n}","import { Color } from \"./Color\";\n\nexport class ChangeType{\n    id : number\n    ref : string\n    name : string\n    short_name : string\n    label : string\n    color : Color //hstore\n\n    get relatedColor(): Color{\n        return new Color(this.color);\n    }\n    constructor(data: any) {\n        Object.assign(this, data);\n      }\n}","export class ChangesRequest{\n    thematic:number\n    beginDate:Date\n    endDate:Date\n    bbox:string\n}","export class Color{\n    R : string\n    G : string\n    B : string\n\n    public getRGBA(): string{\n      return \"rgba(\"+this.R+\",\"+this.G+\",\"+this.B+\")\"\n    }\n\n    constructor(data: any) {\n      Object.assign(this, data);\n    }\n\n}","export class FeatureChangesRequest{\n    osm_id : number\n    beginDate : Date\n    endDate : Date\n    type : string\n    thematic : number\n\n    constructor(){}\n}","export class Tag{\n    key : string;\n    valueNew? : string;\n    valueOld? : string;\n\n    constructor(key : string, valueNew, valueOld){\n        this.key = key;\n        this.valueNew = valueNew;\n        this.valueOld = valueOld;\n    }\n}","import { KeyLabelObjectList } from './KeyLabelObjectList'\n\nexport class FeatureImportantTags {\n  importance:string;\n  tagList:KeyLabelObjectList;\n\n  constructor(feature, importantLevelObj){\n    this.importance= importantLevelObj.importance;\n    this.tagList = new KeyLabelObjectList(feature, importantLevelObj.sub_tags);\n  }\n\n  public isEmpty() : boolean{\n    return this.tagList.isEmpty();\n\n  }\n}","import { FeatureImportantTags } from './FeatureImportantTags'\n\nexport class FeatureImportantTagsList {\n  list: Array<FeatureImportantTags>;\n\n  constructor(feature, layer){ //Construction of the object with the feature-main-info of the layer\n    this.list= Array<FeatureImportantTags>();\n    if (layer.feature_main_info != undefined){\n      for (var i=0;i<layer.feature_main_info.length;i++){ //For each level of importance of the feature-main-info\n        var featureImportantTags = new FeatureImportantTags(feature, layer.feature_main_info[i]);\n        this.list.push(featureImportantTags);\n      }\n    }\n  }\n\n  public isEmpty() : boolean{\n    var isEmptyBool : boolean = true;\n    for (let i in this.list){\n      isEmptyBool = isEmptyBool && this.list[i].isEmpty();\n    }\n    return isEmptyBool;\n  }\n\n  public getAddrTagsList() : Array<string>{ //For a special display (Addr_tags are written like an adress)\n    let used_addr= Array<string>();\n    let addrTags= Array<string>();\n    let noImportance = this.list.filter(x => x.importance === 'no')[0];\n    if (noImportance != undefined){\n      noImportance.tagList.list.filter(x => x.key.startsWith('addr')).forEach(function(x){\n        addrTags.push(x.key);\n      });\n      //group housenumber and street\n      if (addrTags.indexOf('addr-housenumber')>=0 && addrTags.indexOf('addr-street')>=0){\n        used_addr.push('addr-housenumber');\n        used_addr.push('addr-street');\n      }\n      //group postcode and city\n      if (addrTags.indexOf('addr-postcode')>=0 && addrTags.indexOf('addr-city')>=0){\n        used_addr.push('addr-postcode');\n        used_addr.push('addr-city');\n      }\n      for (let addr in addrTags){\n        if(used_addr.indexOf(addrTags[addr])<0){\n          // add others addr tags if they exist\n          used_addr.push(addrTags[addr]);\n        }\n      }\n    }\n    return used_addr;\n  }\n}","export class KeyLabelObject {\n  key:string;\n  label:string;\n\n  constructor(keyLabel){\n    this.key = keyLabel.osm_key;\n    this.label = keyLabel.label;\n  }\n}","import { KeyLabelObject } from './KeyLabelObject'\n\nexport class KeyLabelObjectList {\n  list:Array<KeyLabelObject>;\n\n  constructor(feature, listOfKeys){\n    this.list = Array<KeyLabelObject>();\n    if (listOfKeys != null){\n      var priority=1; //See below : to find the key which has the highest priority (ie the lowest number) and which is in the list of Keys of the feature\n      var keyFound : boolean = false;\n      let unimportantList = listOfKeys.filter(x => x.priority === undefined); // Tags with no priority --> importance:\"no\"\n      let importantList = listOfKeys.filter(x => x.priority > 0); //Tags with priority --> importance=\"high\",\"medium\",\"low\"\n      while (importantList.length>=priority && !keyFound){ //as long as the list has not been scanned coompletely and the key is not found and  \n        let keyLabelPriority = importantList.filter(x => x.priority === priority)[0];\n        if (keyLabelPriority != undefined && feature.getKeys().indexOf(keyLabelPriority.osm_key)>=0){\n          var keyLabelObject = new KeyLabelObject(keyLabelPriority);\n          this.list.push(keyLabelObject);\n          keyFound = true; // End the loop\n        }\n        else {\n          priority = priority + 1; //key not found --> try with the next level of priority\n        }\n      }\n      for (let j=0;j<unimportantList.length;j++){\n        if (feature.getKeys().indexOf(unimportantList[j].osm_key)>=0){//if the key is in the list of keys of the feature...\n          var keyLabelObject = new KeyLabelObject(unimportantList[j]); //...the key is written\n          this.list.push(keyLabelObject); \n        }\n      }\n    }\n  }\n\n  public isEmpty() : boolean{\n    return (this.list.length == 0);\n  }\n}\n","export class Layer {\n  md_url:string;\n  sld_path:string;\n  layername:string;\n  nom_court:string;\n  nom_layer: string;\n}","import { Layer } from \"./Layer\";\n\nexport class LayerAndCategory {\n  category:string;\n  layer: Layer;\n\n  constructor(category: string, layer: Layer){\n    this.category = category;\n    this.layer = layer;\n  }\n}","import { Layer } from \"../Layer\"\n\nexport class NearbyFeaturesBelongingToOneLayer {\n  public layer:Layer;\n  public featuresList;\n\n  constructor(layer, feature){\n    this.featuresList = new Array();\n    this.layer = layer;\n    this.featuresList.push(feature);\n  }\n\n  public isEmpty() : boolean{\n    return this.featuresList.length==0;\n  }\n\n}\n","import { NearbyFeaturesBelongingToOneLayer } from './NearbyFeaturesBelongingToOneLayer'\nimport { MapService } from '../../service/map.service';\n\nexport class NearbyFeaturesList {\n  list:Array<NearbyFeaturesBelongingToOneLayer>;\n  mapService:MapService; // I think this is not the right way to use MapService\n\n  constructor(){\n    this.list = new Array<NearbyFeaturesBelongingToOneLayer>();\n  }\n}\n","import { ActivatedRoute } from '@angular/router';\nimport { MapService } from '../service/map.service';\nimport { MapComponent } from '../map/map.component';\n\ndeclare var ol: any;\ndeclare var config: any;\n\nexport class UserContext{\n  // zoom\n  z:number;\n  // longitude\n  lon:number;\n  // latitude\n  lat:number;\n  // base layer name\n  bLay:string;\n  // visible layer name\n  vLay:string;\n  // opacity range\n  tr:number;\n  \n  constructor(){};\n\n  initFromRoute(route: ActivatedRoute){\n      this.z=route.snapshot.queryParams['z'],\n      this.lon=parseFloat(route.snapshot.queryParams['lon']),\n      this.lat=parseFloat(route.snapshot.queryParams['lat']),\n      this.bLay=route.snapshot.queryParams['bLay'],\n      this.vLay=route.snapshot.queryParams['vLay'],\n      (!this.vLay || this.vLay ===\"\")?  this.vLay = \"none\":\"\",\n      this.tr=route.snapshot.queryParams['tr'] \n  }\n\n  initFromCurrentView(mapService: MapService){\n      let center = ol.proj.transform(mapService.map.getView().getCenter(), config.PROJECTION_CODE, 'EPSG:4326');\n      this.z=mapService.map.getView().getZoom();\n      this.lon=center[0].toFixed(4);\n      this.lat=center[1].toFixed(4);//TODO MapComponent.PROJECTION_CODE\n      this.bLay=null;//mapService.getBaseLayerName();\n      this.vLay=mapService.getVisibleLayersIdList();\n      this.tr=mapService.getOpacityRange();\n  }\n\n  getContextAsPermalink(): string{\n      return '/carte?'\n      +'z='+this.z\n      +'&lon='+this.lon\n      +'&lat='+this.lat\n      //+'&bLay='+this.bLay\n      +'&tr='+this.tr\n      +'&vLay='+this.vLay.replace(new RegExp('ch-osm:', 'g'), '');\n  }\n\n  isValid(): Boolean{\n    if(!this.z || !this.lon || !this.lat || !this.tr){\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n\n}","import { MapService } from \"app/service/map.service\";\nimport { Layer } from \"./Layer\";\nimport { environment } from '../../environments/environment';\nimport { PaginationService } from \"app/service/pagination.service\";\n\n\n\n\nexport class WFSRequest {\n\n\n    public currentLayer: Layer;\n    public sorterColumn : string;\n    public sorterDirection : number;\n    public count : number;\n    public startIndex : number;\n\n    constructor(\n        public mapService: MapService) {\n\n    }\n\n    public setLayer(layer){\n        this.currentLayer = layer;\n    }\n\n    public setSorter(column : string, direction : number){\n        this.sorterColumn = column;\n        this.sorterDirection = direction;\n    }\n\n    public setCount(count : number){\n        this.count = count;\n    }\n    public setStartIndex(startIndex : number){\n        this.startIndex = startIndex;\n    }\n\n    public getCount(): number{\n        return this.count;\n    }\n    public getStartIndex(): number{\n        return this.startIndex;\n    }\n\n    public setRangeRequest(pageSize : number, startIndex : number){\n        this.count = pageSize;\n        this.startIndex = startIndex;\n    }\n\n    build() :string {\n        let url: string;\n        let urlservice = environment.geoserver_baseurl + '/ows?service=wfs&version=2.0.0&request=GetFeature';\n        var searchMask = \"getCapabilities\";\n        var regEx = new RegExp(searchMask, \"ig\");\n        var replaceMask = \"GetFeature\";\n\n        urlservice = urlservice.replace(regEx, replaceMask);\n        let outputformat = \"application/json\";\n\n        url = urlservice;\n        \n        if (this.count && this.startIndex){\n            url += '&count='+ this.getCount() + '&startIndex='+this.getStartIndex();\n        } else{\n            url += '&maxfeatures=5000&count=10';\n        } \n        url +='&typename=' + this.currentLayer.layername + '&outputFormat=' + outputformat + '&srsname=EPSG:3857';\n       \n        let extent = this.mapService.getBoundingBoxCorner();\n        \n        url += \"&bbox=\" + extent.join(',') + ',EPSG:3857'\n\n        // sorter column\n        if (this.sorterColumn && this.sorterDirection){\n            url += \"&sortBy=\"+this.sorterColumn+(this.sorterDirection===PaginationService.SORT_DESC? \"+D\":\"\");\n        }\n\n        // filter : Evolution : ajouter un filtre en entte de colonne  \n        /*if(layerconfig.filter){ \n          url+=\"&CQL_FILTER=BBOX(\"+layerconfig.getGeomAttributeName()+\",\"+extent.join(',')+\",'EPSG:3857') AND \"+layerconfig.filter;\n        }\n        else{\n          */\n        console.log(url);\n\n        return url;\n    }\n\n}","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n name: 'orderByPipe'\n})\nexport class OrderByPipeComponent implements PipeTransform{\n\n transform(array: any, args: string): Array<string> {\n  if(!array || array === undefined || array.length === 0 ) return array;\n   if(!array.sort){\n     array=[array];\n     return array;\n   } \n  \n    array.sort((a: any, b: any) => {\n      if (a.nom_fichier < b.nom_fichier) {\n        return 1;\n      } else if (a.timestamp_upload > b.timestamp_upload) {\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n    return array;\n  }\n\n}","module.exports = \".link:hover {\\n    color: #CC1517;\\n    text-decoration: underline;\\n    cursor:pointer;\\n}\\n\\n.link{\\n    color: #cc5456;\\n    /* color: #007bff; */\\n    text-decoration: none;\\n    \\n}\"","module.exports = \"<span class=\\\"link\\\" (click)=\\\"setPermalink()\\\">{{ 'main.permalink' | translate }}</span>\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\nimport { UserContextService } from '../service/user-context.service';\n\n@Component({\n  selector: 'app-permalink',\n  templateUrl: './permalink.component.html',\n  styleUrls: ['./permalink.component.css']\n})\nexport class PermalinkComponent implements OnInit {\n\n  constructor(\n    public userContextService: UserContextService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  setPermalink(){\n    this.userContextService.setPermalink()\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { throwError as observableThrowError, Observable} from 'rxjs';\nimport { Http } from '@angular/http';\nimport { catchError } from 'rxjs/operators';\nimport { Thematic } from 'app/model/ChangesClasses/Thematic';\nimport { ConfigService } from './config.service';\nimport 'rxjs/add/observable/fromPromise';\nimport 'rxjs/add/operator/mergeMap'\nimport { environment } from '../../environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiRequestService {\n\n  private baseUrl : string ;\n  private thematicsSuffix =  'thematics';\n  private changesSuffix = 'changesrequest';\n  private changeTypesSuffix = 'change_types';\n  private featurechangesSuffix = 'featurechangesrequest';\n  private lastChangeSuffix ='lastpolygonchanged';\n  public beginDate : Date;\n  public endDate : Date;\n  public thematic : Thematic;\n\n  private configPromise: Promise<any>;\n\n  constructor(\n    public http: Http,\n    public configService : ConfigService) \n    { \n      this.configPromise = this.configService.getConfig().toPromise().then(config => {\n        this.baseUrl = environment.services_baseurl;\n        return config;\n    });\n    }\n\n  public searchThematics(): Observable<any> {\n    return Observable.fromPromise(this.configPromise).mergeMap((config) => {\n      return this.http.get(this.baseUrl + this.thematicsSuffix)\n    });\n  };\n\n  public getLastChange(): Observable<any> {\n    return Observable.fromPromise(this.configPromise).mergeMap((config) => {\n      return this.http.get(this.baseUrl + this.lastChangeSuffix)\n    });\n  };\n\n  public searchChanges(data, options): Observable<any> {\n    return Observable.fromPromise(this.configPromise).mergeMap((config) => {\n      return this.http.post(this.baseUrl+this.changesSuffix, data, options).pipe(\n        catchError(error => observableThrowError(error))\n      )\n    });\n  };\n\n  public searchChangeTypes(): Observable<any> {\n\n    return Observable.fromPromise(this.configPromise).mergeMap((config) => {\n      return this.http.get(this.baseUrl + this.changeTypesSuffix);\n    });\n  }\n\n  public searchFeatureChanges(data, options) : Observable<any> {\n    return Observable.fromPromise(this.configPromise).mergeMap((config) => {\n      return this.http.post(this.baseUrl+this.featurechangesSuffix, data, options).pipe(\n        catchError(error => observableThrowError(error))\n      )\n    });\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n\n  private configUrl: string = \"./assets/maps/\";\n\n  constructor(\n    private route: ActivatedRoute,\n    private http: HttpClient\n  ) { }\n\n  getConfig() {\n    // now returns an Observable of Config\n    var conf=this.route.snapshot.queryParams['config'];\n    if(conf==undefined){\n      conf=\"default.json\"\n    }\n    return this.http.get<any>(this.configUrl+conf);\n  }\n}\n","import { Injectable, Output, EventEmitter } from '@angular/core';\n\n@Injectable()\nexport class LayerChangeService {\n\n  @Output() announceLayerChangeEvent: EventEmitter<any> = new EventEmitter();\n\n  constructor( ) {}\n\n  emitAnnounceLayerChangeEvent(newSelectedLayer) {\n    this.announceLayerChangeEvent.emit(newSelectedLayer);\n  }\n\n  getAnnounceLayerChangeEventEmitter(): EventEmitter<any> {\n    return this.announceLayerChangeEvent;\n  }\n}\n","import { Injectable, Output, EventEmitter } from '@angular/core';\nimport { UserContext } from '../model/UserContext';\n\nimport * as shapefile from 'shapefile'\nimport { Change } from 'app/model/ChangesClasses/Change';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { ConfigService } from './config.service';\nimport { a } from '@angular/core/src/render3';\nimport { Color } from 'app/model/ChangesClasses/Color';\nimport { environment } from '../../environments/environment';\nimport { LayerAndCategory } from 'app/model/LayerAndCategory';\nimport { Layer } from 'app/model/Layer';\n\ndeclare var ol: any;\ndeclare var _paq: any;\ndeclare var window: any;\ndeclare var fetch: any;\ndeclare var config: any;\n\n@Injectable()\nexport class MapService {\n\n  public config: any;\n\n  public map: any;\n  public ol: any;\n  public layers: Object = {};\n\n  private selectedFeatureSource: any;\n  private selectedFeatureStyle: any;\n\n  private INCHES_PER_UNIT = { 'm': 39.37, 'dd': 4374754 };\n  private DOTS_PER_INCH = 90;\n\n  loadingCounter = 0;\n  //fonds de carte\n  private OSMLayer: any;\n  private baseLayer: any;\n  private baseLayerName: string;\n  private opacityRange = 30;\n\n  //Suivi de changements\n  public changesStyles = new Map();\n  public changesPointStyles = new Map();\n  public changesLayer = new Map();\n  public numberOfChangeByType = new Map<ChangeType,number>();\n  public legendDisplay : boolean = false;\n  public changesLayersArray : Array<any> = [];\n  public changesLayersCollection ;\n  public changesLayersGroup = new ol.layer.Group({});\n  public heatMapLayer = new ol.layer.Heatmap({});\n  public changeTypeArrayList : Array<ChangeType>;\n  private mapFeatureSelectedInteractionOnClick : any;\n  //public pointStyles;\n\n  @Output() announceOpacityChangeEvent: EventEmitter<any> = new EventEmitter();\n  //legende\n  public legendUrls: string[];//au niveau infra-communal il y a autant d'urls de lgendes que de couches visibles\n  public legendSubTitles: string[];\n  public legendTitle: string;\n  public currentScale: any;\n\n  wmtsResult: any;\n\n\n  constructor(\n    private configService: ConfigService\n  ) { \n    this.configService.getConfig().subscribe(config => {\n      this.config=config;\n    })\n  }\n\n  setMap(map, userContext: UserContext) {\n    this.map = map;\n    this.setBaseLayers();\n    this.changeOpacity(userContext.tr);\n  }\n\n  getMap(){\n    return this.map;\n  }\n\n  setWMTSResult(wmtsResult) {\n    this.wmtsResult = wmtsResult\n  }\n\n  setBaseLayers() {\n    //initialisation des sources et des layers de fond de carte OSM\n    this.OSMLayer = new ol.layer.Tile({\n      title: 'OSM',\n      source: new ol.source.OSM(),\n      visible: true,\n      zIndex: 0\n    });\n    this.baseLayer = this.OSMLayer;\n    this.map.addLayer(this.OSMLayer);\n  };\n\n  getCategorieAndLayerByStringAttribute(attributeName: string, attributeValue: String):LayerAndCategory {\n    let _layer: Layer;\n    let _categorie: string;\n    this.config.LAYERS.forEach(function (categorie) {\n      if (categorie.features.filter(y => y[attributeName].indexOf(attributeValue) >= 0)[0]) {\n        _categorie = categorie.id_categorie;\n        _layer = categorie.features.filter(y => y[attributeName].indexOf(attributeValue) >= 0)[0];\n      }\n    })\n    const _result = new LayerAndCategory(_categorie, _layer);\n    console.log('getCategorieAndLayerByStringAttribute')\n    console.log(_result)\n    return _result;\n  };\n\n  changeOpacity(value: number) {//dfini l'opacit des layers\n\n    if (this.baseLayer) {\n      this.opacityRange = value;\n      this.baseLayer.setOpacity(this.opacityRange / 100);\n\n    }\n\n    this.emitOpacityChangeEvent(this.opacityRange);\n  }\n\n  emitOpacityChangeEvent(newOpacityRange) {\n    this.announceOpacityChangeEvent.emit(newOpacityRange);\n  }\n\n  getAnnounceOpacityChangeEventEmitter() {\n    return this.announceOpacityChangeEvent;\n  }\n\n  changeBaseLayer(baseLayerName) {\n    this.baseLayerName = baseLayerName;\n    this.baseLayer.setVisible(false);\n    if (baseLayerName === 'OSM') {\n      this.baseLayer = this.OSMLayer;\n    }\n    else {\n      this.baseLayer = this.getLayersById(baseLayerName)\n    }\n    this.baseLayer.setOpacity(this.opacityRange / 100);\n    this.baseLayer.setVisible(true);\n    this.baseLayer.setVisible(true);\n  }\n\n  setLegendAttributes(key, value) {\n    if (key = \"legendUrls\") {\n      this.legendUrls = value;\n    }\n  }\n\n  getLayersById(id: string): any {\n        return this.layers[id];\n  }\n  cleanSelection() {\n    this.selectedFeatureSource.clear();\n  }\n  addToSelection(feature) {\n    this.selectedFeatureSource.addFeature(feature);\n    let toIndex = feature.getId().indexOf('.fid')>0? feature.getId().indexOf('.fid'): (feature.getId().lastIndexOf('.')>0? feature.getId().lastIndexOf('.'):feature.getId().length);\n    let piwikFeatureSelectedLayer = feature.getId().substring(0, toIndex)\n    _paq.push(['trackEvent', 'feature_selected', piwikFeatureSelectedLayer])\n  }\n  addSelectionLayer() {\n    //initialisation de selectedFeatureSource et selectedFeatureStyle\n    this.selectedFeatureSource = new ol.source.Vector({});\n\n    var fill = new ol.style.Fill({\n      color: 'rgba(150, 6, 6, 0)'\n    });\n    var stroke = new ol.style.Stroke({\n      color: 'rgb(150, 6, 6)',\n      width: 2\n    });\n    this.selectedFeatureStyle = [\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          fill: fill,\n          stroke: stroke,\n          radius: 10\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n\n\n    let selectionLayer = new ol.layer.Vector({ //initialisation d'un layer vide, on y a ajout le feature slectionn par l'utilisateur\n      source: this.selectedFeatureSource,\n      style: this.selectedFeatureStyle,\n      zIndex: 4\n    });\n    this.map.addLayer(selectionLayer);\n\n  }\n  addVectorTileLayer(layerconfig: any, show: boolean = false) {\n    let self = this;\n    let layername = layerconfig.layername;\n    let id = layerconfig.layername;\n    let lshow = show;\n    let lconfig = layerconfig;\n    let matrixSet = \"EPSG:3857\";\n\n    if (this.layers[id] == null) {\n      var options = ol.source.WMTS.optionsFromCapabilities(this.wmtsResult, {\n        layer: layername,\n        matrixSet: matrixSet,\n        format: 'application/x-protobuf;type=mapbox-vector'\n      });\n      options.attributions = [new ol.Attribution({\n        html: '' +\n          '<a href=\"http://ch-osm.geodatasolutions.ch/aide.html#ogc-services-tos\"> GeoDataSolutions for the WMS/WFS flows</a>'\n      })\n      ];\n      var wmts = new ol.source.WMTS(options);\n      console.log(wmts.getTileUrlFunction());\n\n      self.layers[id] = new ol.layer.VectorTile({\n        opacity: 1,\n        source: new ol.source.VectorTile({\n          format: new ol.format.MVT(),\n          tileUrlFunction: wmts.getTileUrlFunction(),\n          tileGrid: wmts.getTileGrid()\n        })\n      });\n      self.layers[id].customConfig = lconfig;\n      lconfig.ol_Layer = self.layers[id];\n      self.map.addLayer(self.layers[id]);\n      self.layers[id].setVisible(lshow);\n    }\n    else {\n      this.layers[id].setVisible(show);\n    }\n  }\n  addLoading(e) {\n    this.loadingCounter++;\n    if (!e.target.loadingCounter) {\n      e.target.loadingCounter = 0;\n    }\n    e.target.loadingCounter++;\n  }\n  addLoaded(e) {\n    this.loadingCounter--;\n    e.target.loadingCounter--;\n  }\n  addLoadError(e) {\n    this.loadingCounter--;\n    e.target.loadingCounter--;\n  }\n  addWMSLayer(layerconfig: any, show: boolean = false) {\n    let id = layerconfig.layername;\n    console.log(\"addwmslayer: \"+id) ;\n    let layername = layerconfig.layername;\n    if (this.layers[id] == null) {\n\n      var layerSource = new ol.source.TileWMS(({\n        url: environment.geoserver_baseurl + '/wms?',\n        crossOrigin: 'anonymous',\n        params: { 'LAYERS': layername },\n        attributions: [new ol.Attribution({\n          html: '' +\n          '<a href=\"http://ch-osm.geodatasolutions.ch/aide.html#ogc-services-tos\"> GeoDataSolutions for the WMS/WFS flows</a>'\n        })\n        ]\n      }));\n\n      this.addLoadingListener(layerSource);\n      var maxResolution = undefined;\n      if (layerconfig.maxScaleDenominator) {\n\n        maxResolution = this.getResolutionFromScale(layerconfig.maxScaleDenominator, this.map.getView().getProjection().getUnits());\n      }\n      this.layers[id] = new ol.layer.Tile({\n        source: layerSource,\n        zIndex: 1,\n        maxResolution: maxResolution\n\n      });\n      this.layers[id].setVisible(show);\n\n      this.map.addLayer(this.layers[id]);\n    }\n    else {\n      this.layers[id].setVisible(show);\n    }\n  }\n\n  addLoadingListener(layerSource) {\n    layerSource.on('tileloadstart',\n      this.addLoading.bind(this)\n    );\n\n    layerSource.on('tileloadend',\n      this.addLoaded.bind(this)\n    );\n    layerSource.on('tileloaderror',\n      this.addLoadError.bind(this)\n    );\n  }\n  addWMTSLayer(layerconfig: any, show: boolean = false) {\n\n\n    let self = this;\n    let layername = layerconfig.layername;\n    let id = layerconfig.layername;\n    let lshow = show;\n    let lconfig = layerconfig;\n    let matrixSet = \"EPSG:3857\";\n\n    if (this.layers[id] == null) {\n      // first, set WMTS options from capabilities\n      var options = ol.source.WMTS.optionsFromCapabilities(this.wmtsResult, {\n        layer: layername,\n        matrixSet: matrixSet\n      });\n      // then rewrite some opts\n      options.urls[0] = environment.geoserver_baseurl + \"/gwc/service/wmts?'\";\n      options.attributions = [new ol.Attribution({\n        html: '' +\n        '<a href=\"http://ch-osm.geodatasolutions.ch/aide.html#ogc-services-tos\"> GeoDataSolutions for the WMS/WFS flows</a>'\n      })\n      ];\n\n      var layerSource = new ol.source.WMTS(/** @type {!olx.source.WMTSOptions} */(options));\n      this.addLoadingListener(layerSource);\n\n      var maxResolution = undefined;\n      if (layerconfig.maxScaleDenominator) {\n        maxResolution = this.getResolutionFromScale(layerconfig.maxScaleDenominator, this.map.getView().getProjection().getUnits());\n      }\n\n\n      self.layers[id] = new ol.layer.Tile({\n        opacity: 1,\n        source: layerSource,\n        maxResolution: maxResolution\n      });\n      self.layers[id].customConfig = lconfig;\n      lconfig.ol_Layer = self.layers[id];\n      self.map.addLayer(self.layers[id]);\n      self.layers[id].setVisible(lshow);\n    }\n    else {\n      this.layers[id].setVisible(show);\n    }\n  }\n\n\n\n  kmlExport(layer) {\n    var size = /** @type {ol.Size} */ (this.map.getSize());\n    var extent = this.map.getView().calculateExtent(size);\n\n    var targetDPI = 150;\n    var siszeFactor = targetDPI / 90;\n    console.log(extent);\n    let bbox = extent[0] + \",\" + extent[1] + \",\" + extent[2] + \",\" + extent[3];\n\n    let currentScale = this.getScaleFromResolution(this.map.getView().getResolution(), this.map.getView().getProjection().getUnits(), true);\n    //alert(\"L'export concerne uniquement la zone visualise\");\n    /*if (currentScale > 500000) {\n      alert(\"l'export n'est possible qu'a partir du de l'chelle 1/500 000\")\n      return;\n    }*/\n\n    let url = environment.geoserver_baseurl + \"/wms?service=wms&request=GetMap&version=1.1.1&format=application/vnd.google-earth.kml+xml&layers=\" + layer.layername /*+ \"&styles=\" + layer.selectedStyle.style*/ + \"&height=2048&width=2048&transparent=false&srs=EPSG:3857&format_options=AUTOFIT:true;KMATTR:true;KMPLACEMARK:false;KMSCORE:40;MODE:download;SUPEROVERLAY:false&bbox=\" + bbox;\n    //let url = environment.geoserver_baseurl + \"/wfs?request=GetFeature&version=2.0.0&count=50000&outputFormat=application%2Fvnd.google-earth.kml%2Bxml&typeName=\"+layer.layername;\n    //let url = environment.geoserver_baseurl + \"/wms/kml?layers=\"+layer.layername;\n\n    //piwik\n    _paq.push(['trackEvent', 'KML_download', layer.layername])\n\n    window.open(url, \"_blank\");\n  }\n  getScale() {\n\n    return this.getScaleFromResolution(this.map.getView().getResolution(), this.map.getView().getProjection().getUnits(), true);\n  }\n  shpExport(layer) {\n    var size = /** @type {ol.Size} */ (this.map.getSize());\n    var extent = this.map.getView().calculateExtent(size);\n\n    var targetDPI = 150;\n    var siszeFactor = targetDPI / 90;\n    console.log(extent);\n    let bbox = extent[0] + \",\" + extent[1] + \",\" + extent[2] + \",\" + extent[3];\n    //alert(\"L'export concerne uniquement la zone visualise\");\n    let currentScale = this.getScaleFromResolution(this.map.getView().getResolution(), this.map.getView().getProjection().getUnits(), true);\n    /*if (currentScale > 500000) {\n      alert(\"l'export n'est possible qu'a partir du de l'chelle 1/500 000\")\n      return;\n    }*/\n\n    //let url = environment.geoserver_baseurl + \"/wms?service=wms&request=GetMap&version=1.1.1&format=application/vnd.google-earth.kml+xml&layers=\" + layer.layername /*+ \"&styles=\" + layer.selectedStyle.style*/ + \"&height=2048&width=2048&transparent=false&srs=EPSG:3857&format_options=AUTOFIT:true;KMATTR:true;KMPLACEMARK:false;KMSCORE:40;MODE:download;SUPEROVERLAY:false&bbox=\" + bbox;\n    let url = environment.geoserver_baseurl + \"/wfs?request=GetFeature&version=2.0.0&count=500000&outputFormat=shape-zip&typeName=\" + layer.layername + \"&srsName=EPSG:3857&bbox=\" + bbox;\n    //let url = environment.geoserver_baseurl + \"/wms/kml?layers=\"+layer.layername;\n\n    //piwik\n    _paq.push(['trackEvent', 'SHP_download', layer.layername])\n\n    window.open(url, \"_blank\");\n  }\n\n  getBoundingBox() {\n    let format = new ol.format.WKT();\n    let extent = ol.geom.Polygon.fromExtent(this.map.getView().calculateExtent());\n    var wkt = format.writeGeometry(extent);\n    return wkt;\n  }\n\n  getBoundingBoxCorner() {\n    let format = new ol.format.WKT();\n    let extent = ol.geom.Polygon.fromExtent(this.map.getView().calculateExtent());\n    return extent.getExtent();\n  }\n\n  getResolutionFromScale(scale, units) {\n    var resolution = scale / (this.INCHES_PER_UNIT[units] * this.DOTS_PER_INCH);\n    return resolution;\n  };\n\n  getScaleFromResolution(resolution, units, opt_round) {\n    var scale = this.INCHES_PER_UNIT[units] * this.DOTS_PER_INCH * resolution;\n    if (opt_round) {\n      scale = Math.round(scale);\n    }\n    console.log(\"scale : \" + scale + \" / resolution : \" + resolution)\n    return scale;\n  };\n\n  getVisibleLayersIdList() {\n    let id_layers = \"\";\n    let separator = \"\";\n    let layers = this.map.getLayers().getArray();\n\n    for (var i = 0; i < layers.length; i++) {\n      var layer = layers[i];\n      if (layer instanceof ol.layer.Tile && layer.getSource() instanceof ol.source.TileWMS && layer.getVisible()) {\n\n        id_layers += separator + (layer.getSource()).getParams()['LAYERS'] + '';//<ol.source.TileWMS>\n        separator = \",\";\n      } else if (layer instanceof ol.layer.Tile && layer.getSource() instanceof ol.source.WMTS && layer.getVisible()) {\n        id_layers += separator + (layer.getSource()).getLayer() + '';//<ol.source.WMTS>\n        separator = \",\";\n      }\n\n    }\n    console.log(id_layers);\n    return id_layers;\n  }\n\n  getVisibleLayersIdArrayList() {\n    let id_layers = [];\n    let layers = this.map.getLayers().getArray();\n\n    for (var i = 0; i < layers.length; i++) {\n      var layer = layers[i];\n      if (layer instanceof ol.layer.Tile && layer.getSource() instanceof ol.source.TileWMS && layer.getVisible()) {\n        id_layers.push((layer.getSource()).getParams()['LAYERS']);//<ol.source.TileWMS>\n      } else if (layer instanceof ol.layer.Tile && layer.getSource() instanceof ol.source.WMTS && layer.getVisible()) {\n        id_layers.push((layer.getSource()).getLayer());\n      }\n    }\n    return id_layers;\n  }\n\n  getNumberOfVisibleLayers(){\n    return this.getVisibleLayersIdArrayList().length;\n  }\n\n  getZoomFromScale(scale) {\n    var resolution = this.getResolutionFromScale(scale, this.map.getView().getProjection().getUnits());\n    var zoom = Math.ceil(this.map.getView().getZoomForResolution(resolution)); // Zoom level rounded up\n    return zoom;\n  }\n\n  //Find the Layer of one object (useful for the list of nearby features, and for the style of main_info)\n  getLayerOfOneFeature(feature){\n    for (let i in this.config.LAYERS){\n      for (let j in this.config.LAYERS[i].features){\n        if (feature.getId().startsWith(this.config.LAYERS[i].features[j].layername.replace('magosm:',\"\"))){\n          return this.config.LAYERS[i].features[j];\n        }\n      }\n    }\n  }\n\n  isInRange(id){\n    if (this.layers[id]) {\n      var maxResolution=this.layers[id].getMaxResolution();\n      var minResolution=this.layers[id].getMinResolution();\n      var currentResol=this.map.getView().getResolution();\n      if(maxResolution && this.map.getView().getResolution()>maxResolution){\n        return false;\n      }\n      if(minResolution && this.map.getView().getResolution()<minResolution){\n        return false;\n      }\n      return true;\n    }\n    return false;\n\n  }\n  isVisible(id) {\n    if (this.layers[id]) {\n      return this.layers[id].getVisible();\n    }\n    return false;\n\n  }\n  addLayer(id: string, url: string, show: boolean = false) {\n    if (this.layers[id] == null) {\n      var vectorSource = new ol.source.Vector({\n        //projection : 'EPSG:3857',\n        //overlaps:false,\n        format: new ol.format.GeoJSON({\n          //defaultDataProjection: 'EPSG:4326'\n          //defaultDataProjection: 'EPSG:2154'\n        }),\n        url: url\n      });\n      this.layers[id] = new ol.layer.Vector({\n        source: vectorSource\n      });\n\n      var listenerKey = vectorSource.on('change', (function (e) {\n        if (vectorSource.getState() == 'ready') {\n          ol.Observable.unByKey(listenerKey);\n          this.layers[id].setVisible(show);\n        }\n      }).bind(this));\n\n\n      this.map.addLayer(this.layers[id]);\n    }\n    else {\n      this.layers[id].setVisible(show);\n    }\n\n  }\n\n  addShapefileLayer(id: string, bufferOrUrl: ArrayBuffer | string, show: boolean = true) {\n    if (this.layers[id] == null) {\n      return shapefile.read(bufferOrUrl).then(collection => {\n        const vectorSource = new ol.source.Vector({\n          features: (new ol.format.GeoJSON()).readFeatures(collection)\n        });\n        this.layers[id] = new ol.layer.Vector({\n          source: vectorSource\n        });\n\n        const listenerKey = vectorSource.on('change', (function (e) {\n          if (vectorSource.getState() == 'ready') {\n            ol.Observable.unByKey(listenerKey);\n            this.layers[id].setVisible(show);\n          }\n        }).bind(this));\n        this.map.addLayer(this.layers[id]);\n      })\n    } else {\n      this.layers[id].setVisible(show);\n      return Promise.resolve();\n    }\n  }\n\n  public getBaseLayerName() {\n    return this.baseLayerName;\n  }\n\n  public getOpacityRange() {\n    return this.opacityRange;\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///// Partie ddie au suivi de changement /////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  public addChanges(changesList : Array<Change>): any{\n    let featureLayers = new Map();\n    let alreadyTested = new Array<number>();\n    this.changesLayersArray.forEach(layer => {\n        featureLayers.set(layer.get('id'), []);\n    });\n    changesList.forEach(element => {\n      let osmId = element.osmId;\n      if (alreadyTested.indexOf(osmId) < 0){\n        let featuresWithSameOsmId = changesList.filter(x => x.osmId === osmId);\n        if (featuresWithSameOsmId.length > 1){\n          element = this.getChangesMergeForOneFeature(featuresWithSameOsmId);\n        }\n        let newFeature = this.setFeature(element);\n        let changeListByType=featureLayers.get(element.changeType);\n        if(!changeListByType){\n          console.error(element.changeType+ \" not found in list.voir element suivant:\");\n          console.log(element);\n        }else{\n          changeListByType.push(newFeature);\n        }\n        \n        alreadyTested.push(osmId); \n      } \n    });\n    // On a complt un Map de 8 tableaux qui contiennent chacun les objets pour chaque type de changement.\n    this.numberOfChangeByType = new Map<ChangeType,number>();\n    this.changesLayersArray.forEach(layer => {\n        let id = layer.get('id');\n        layer.getSource().clear();\n        layer.getSource().addFeatures(featureLayers.get(id));\n        this.numberOfChangeByType.set(layer.get('changetype'), featureLayers.get(id).length);\n    });\n    this.refreshHeatMap();\n  };\n\n  public refreshHeatMap(){\n    let features : Array<any> = new Array<any>();\n    this.changesLayersArray.forEach(layer => {\n      if (layer.getVisible()){\n        features = features.concat(layer.getSource().getFeatures());\n      }\n    });\n    this.heatMapLayer.getSource().clear();\n    this.heatMapLayer.getSource().refresh();\n    this.heatMapLayer.getSource().addFeatures(features);\n    if (features.length < 50){\n      this.changesLayersGroup.setMaxResolution(10000);\n    }\n    else{\n      this.changesLayersGroup.setMaxResolution(this.map.getView().getResolutionForZoom(10));\n    }\n  }\n\n  public setFeature(change : Change){\n    let changeType:number = change.changeType;\n    //Choix de la gomtrie. On prend theGeomNew sauf s'il est vide, auquel cas theGeomOld ne l'est pas, donc on le slectionne\n    let the_geom = change.theGeomNew;\n    if (the_geom == null){\n      the_geom = change.theGeomOld;\n    }\n\n    var newFeature = (new ol.format.GeoJSON()).readFeature(the_geom);\n    // var geom =newFeature.getGeometry()\n    // newFeature.setGeometry(geom.simplify(5));\n    newFeature.set('changeType', changeType);\n    newFeature.set('osmId', change.osmId);\n    newFeature.set('geom_type', change.type);\n\n    return newFeature;\n  }\n\n\n  initLayers(changeTypesList : Array<ChangeType>){\n    this.changesLayersArray = new Array<any>();\n    this.changeTypeArrayList = changeTypesList;\n      //On cre un Array contenant les layers que l'on place dans un LayerGroup que l'on associe  la map.\n    changeTypesList.forEach(element => {\n      var newVector = new ol.layer.Vector({\n        source: new ol.source.Vector({attributions: [\n          new ol.Attribution({\n            html: '' +\n                '<a href=\"http://magosm.magellium.com/\"> Magellium pour les changements</a>'\n          })\n        ]\n        }),\n        zIndex: 10+element.id,\n        id : element.id,\n        title : element.name,\n        changetype : element,\n        style : this.mainStyleFunction.bind(this),\n      });\n      this.changesLayersArray.push(newVector);\n    })\n    this.changesLayersGroup = new ol.layer.Group({\n      layers:this.changesLayersArray,\n      maxResolution : this.map.getView().getResolutionForZoom(10)\n    });\n    this.map.addLayer(this.changesLayersGroup);\n  }\n\n  initHeatMap(){\n    /// Initialisation de la HeatMap : bas sur https://stackoverflow.com/questions/56780705/creating-heatmap-in-openlayers-with-vector-source-containing-linestrings\n    this.heatMapLayer = new ol.layer.Heatmap({\n      source : new ol.source.Vector({attributions: [\n        new ol.Attribution({\n          html: '' +\n              '<a href=\"http://magosm.magellium.com/\"> Magellium pour les changements</a>'\n          })\n        ]\n      }),\n      zIndex: 2,\n      title : 'Carte de chaleur',\n      minResolution : this.map.getView().getResolutionForZoom(12),\n      radius : 2,\n      blur : 10,\n    });\n\n  var defaultStyleFunction = this.heatMapLayer.getStyleFunction();\n  this.heatMapLayer.setStyle(function(feature, resolution){\n    var style = defaultStyleFunction(feature, resolution);\n    var geom = feature.getGeometry();\n    var geomType = geom.getType();\n    switch(geomType){\n      case \"Polygon\":\n        style[0].setGeometry(geom.getInteriorPoint());\n        break;\n      case \"MultiPolygon\":\n        style[0].setGeometry(geom.getInteriorPoints()[0]);\n        break;\n      case \"LineString\":\n        style[0].setGeometry(new ol.geom.Point(geom.getCoordinateAt(0.5)));\n        break;\n      case \"MultiLineString\":\n        let middlePointNumber =  Math.round((geom.getCoordinates().length)/2);\n        style[0].setGeometry(new ol.geom.Point(geom.getCoordinates()[middlePointNumber][0]));\n        break;\n      case \"Point\":\n        style[0].setGeometry(geom);\n        break;   \n    }\n    return style;\n  })\n    //this.changesLayer.set(\"Carte de chaleur\", this.heatMapLayer);\n    this.map.addLayer(this.heatMapLayer);\n  }\n\n  public initInteractions(){\n    var self = this;\n    this.mapFeatureSelectedInteractionOnClick = new ol.interaction.Select({\n      condition: ol.events.condition.click,\n      style : function(feature,resolution){\n        return self.mainStyleFunction(feature, resolution, true);},\n      hitTolerance : 2,\n      filter: function(feature, layer){return self.heatMapFilter (layer);},\n    })\n    this.map.addInteraction(this.mapFeatureSelectedInteractionOnClick);\n  }\n\n  public clearSelection(){\n    this.mapFeatureSelectedInteractionOnClick.getFeatures().clear();\n  }\n\n  public addFeatureToSelection(feature){\n    this.clearSelection();\n    this.mapFeatureSelectedInteractionOnClick.getFeatures().push(feature);\n  }\n\n  public getChangesMergeForOneFeature(changes : Array<Change>): Change{\n    let changesOrderByTimestamp = changes.sort(function(a,b){ return a.timestamp == b.timestamp ? 0 : +(a.timestamp > b.timestamp) || -1; })\n    while (changesOrderByTimestamp.length > 1){\n      let change1 = changesOrderByTimestamp.pop();\n      let change2 = changesOrderByTimestamp.pop();\n      changesOrderByTimestamp.push(this.mergeTwoChanges(change1, change2));\n    }\n    return changesOrderByTimestamp[0];\n\n  }\n\n  public mergeTwoChanges(change1 : Change, change2 : Change): Change{\n    let firstChange : Change;\n    let secondChange : Change;\n    let newChange : Change = new Change();\n    if (change1.timestamp < change2.timestamp){\n      firstChange = change1;\n      secondChange = change2;\n    } else {\n      firstChange = change2;\n      secondChange = change1;\n    }\n    newChange.timestamp = secondChange.timestamp;\n    newChange.osmId=firstChange.osmId;\n    newChange.type= firstChange.type;\n    newChange.versionOld = firstChange.versionOld;\n    newChange.versionNew = secondChange.versionNew;\n    newChange.tagsOld = firstChange.tagsOld;\n    newChange.tagsNew = secondChange.tagsNew;\n    newChange.theGeomOld = firstChange.theGeomOld;\n    newChange.theGeomNew = secondChange.theGeomNew; // Attention, dans ce cas, si on a une Cration puis une Suppression, on n'a aucune gomtrie !\n    switch(firstChange.changeType){\n      case 1:\n        if ([5,6].indexOf(secondChange.changeType)> -1 ){\n          newChange.changeType = 7;\n          newChange.theGeomNew = secondChange.theGeomOld; // C'est pourquoi on rattrape le tout ici\n          newChange.tagsNew = secondChange.tagsOld;\n          newChange.versionNew = secondChange.versionOld;\n        } else {\n          newChange.changeType = 1;\n        }\n        break;\n      case 2: \n        if ([5,6].indexOf(secondChange.changeType)> -1 ){\n          newChange.changeType = 7;\n        } else {\n          newChange.changeType = 2;\n        } \n        break;\n      case 3:\n        newChange.changeType = 3;\n        if ([34,5,6].indexOf(secondChange.changeType)> -1){\n          newChange.changeType = secondChange.changeType;\n        }\n        if (secondChange.changeType == 4){\n          newChange.changeType = 34;\n        }\n        break;\n      case 4:\n        newChange.changeType = 34;\n        if ([4,5,6].indexOf(secondChange.changeType)> -1){\n          newChange.changeType = secondChange.changeType;\n        }\n        break;\n      case 34:\n        newChange.changeType=34;\n        if ([5,6].indexOf(secondChange.changeType)>-1){\n          newChange.changeType = secondChange.changeType;\n        }\n        break;\n      case 5:\n        newChange.changeType = 7;\n        break;\n      case 6:\n        break;\n      case 7:\n        newChange.changeType = secondChange.changeType;   \n    }\n    // if (newChange.theGeomNew == null && newChange.theGeomOld == null){\n    //   console.log(newChange.osmId);\n    // }\n    return newChange;\n  }\n\n  //Cela permet de rutiliser l'affichage lors du passage de la souris ou de la slection :\n  //Voir : https://stackoverflow.com/questions/35184546/openlayers3-same-style-for-selected-features-only-one-changed-property\n  public mainStyleFunction(feature, resolution : number, selected : boolean, changeTypeId? : number, small? : boolean ){\n    let maxResol = this.map.getView().getResolutionForZoom(10);\n    let style = new ol.style.Style({});\n\n    //Rcuprer la conf pour les couleurs\n    var changeType = changeTypeId ? changeTypeId : feature.get('changeType');\n    let color : Color = this.changeTypeArrayList.filter(x => x.id === changeType)[0].color;\n    let fillcolor = [color.R, color.G, color.B, 0.2];\n    let strokecolor = [color.R, color.G, color.B, 1];\n\n\n    var fill = new ol.style.Fill({color: fillcolor});\n    style.setZIndex(1);\n    if (small || resolution < this.changesLayersGroup.getMaxResolution()){    \n      if (feature.getGeometry().getType() == 'Point'){\n        var pointStroke = new ol.style.Stroke({color: strokecolor, width : selected ? 10 : 3});\n        let circle=new ol.style.Circle({radius:1, stroke: pointStroke, fill:fill});\n        style.setImage(circle);\n\n        if (resolution<10){\n          style.getImage().setRadius(small ? 2*(1+1/resolution) : 4*(1+1/resolution));\n        }\n        else{\n          style.getImage().setRadius(1);\n        }\n      } \n      else {\n        var stroke = new ol.style.Stroke({color: strokecolor, width : selected ? 10 : 5});\n        style.setFill(fill);\n        style.setStroke(stroke);\n    }\n      // if (selected){\n      //   style.setMaxResolution(this.map.getView().getResolutionForZoom(10));\n      // }\n    }\n    return [style];\n  }\n\n  public heatMapFilter(layer){\n    return layer.get('title')!=\"Carte de chaleur\";\n  }\n\n  public getOsmTypeOfFeature(osmId : number, geometryType : string){\n    switch(geometryType){\n      case 'Point':\n        return 'node';\n        break;\n      case 'Line':\n      case 'Polygon':\n        if (osmId>0){\n          return 'way';\n        } else {\n          return 'relation'\n        }\n        break;\n    }\n  }\n\n  // Centre sur la gom lie  la ligne du bouton cliqu\n  centerItemGeom(geom) {\n\n      let polygone : Array<Number> = [];\n      if (geom && geom.length > 2 ) {\n        geom.forEach((element, index) => {\n          if (index % 2 == 0){            \n            polygone.push( ol.proj.transform([geom[index], geom[index+1]], 'EPSG:3857', config.PROJECTION_CODE));\n          }\n        });\n        let polygon = new ol.geom.Polygon([polygone]);\n        this.map.getView().fit(polygon, {});\n        this.map.getView().setZoom(19);\n    } else {\n      alert(\"Cet objet ne contient pas de gomtrie permettant le centrage sur la carte.\");\n    }\n  }\n}","import { Injectable } from '@angular/core';\nimport { MapService } from 'app/service/map.service';\nimport { NearbyFeaturesList } from 'app/model/NearbyFeaturesClasses/NearbyFeaturesList';\nimport { NearbyFeaturesBelongingToOneLayer } from 'app/model/NearbyFeaturesClasses/NearbyFeaturesBelongingToOneLayer'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NearbyFeaturesService {\n  constructor(private mapService: MapService) { }\n  getNearbyFeaturesList(features,selectedFeature){\n    var nearbyFeaturesList = new NearbyFeaturesList;\n    for (let j=0;j<features.length;j++){\n      if (features[j]!=selectedFeature){ // Don't display the selectedFeature.\n        this.addOneFeature(features[j],nearbyFeaturesList);\n      }\n    }\n    return nearbyFeaturesList;\n  }\n\n  addOneFeature(feature,nearbyFeaturesList){\n    var layer = this.mapService.getLayerOfOneFeature(feature);\n    var nearbyFeaturesListFromThisLayer = nearbyFeaturesList.list.filter(x => x.layer === layer);\n    if (nearbyFeaturesListFromThisLayer.length == 0){ // If the object NearbyFeaturesBelongingToOneLayer for this layer doesn't exist yet, create it\n      nearbyFeaturesList.list.push(new NearbyFeaturesBelongingToOneLayer(layer, feature))\n    }\n    else{\n      nearbyFeaturesListFromThisLayer[0].featuresList.push(feature); //If the object already exists, add push the feature in it.\n    }\n  }\n\n}\n","import { ElementRef, Injectable } from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaginationService {\n\n    public static UNSORTED : number = 0;\n    public static SORT_ASC : number = 1;\n    public static SORT_DESC : number = -1;\n    \n    // les donnes du tableau\n    public data : Array<any>;\n\n    // index de la page ( 0........ n)\n    public pageIndex: number = 0;\n    public pageSize: number = 10;\n    public totalElement: number = 0;\n    // public totalPages: number = 0;\n\n    public sorter : Array<any> = [] ;\n\n    public pageSizeArray : Array<any> = [10,20,50];\n\n    // barre de navigation des pages\n    // indicateur entre 1 .......n (donc diffrents de pageIndex)\n    public previousPage : ElementRef;\n    public pageItem1 : ElementRef;\n    public pageItem2 : ElementRef;\n    public pageItem3 : ElementRef;\n    public nextPage : ElementRef;\n    public numberPerPage : ElementRef;\n    public rangePage: ElementRef; \n    \n    constructor() { }\n\n    initializePagination() {\n        this.setPageIndex(0);\n        this.setPageSize(0);\n        this.setTotalElement(0);\n    }\n\n    public initializeElementRef(previousPage : ElementRef, pageItem1 : ElementRef, pageItem2 : ElementRef, pageItem3 : ElementRef, \n                      nextPage : ElementRef, numberPerPage : ElementRef, rangePage: ElementRef){\n        if (!this.previousPage){\n            this.previousPage = previousPage;\n            this.pageItem1 = pageItem1;\n            this.pageItem2 = pageItem2;\n            this.pageItem3 = pageItem3;\n            this.nextPage = nextPage;\n            this.numberPerPage = numberPerPage;\n            this.rangePage = rangePage;\n        }\n    }\n\n    public setData (data : Array<any>){\n        this.data = data;\n    }\n\n    public setPageSize (pageSize : number){\n        this.pageSize = pageSize;\n        // on relance la requte de chargement du tableau\n        this.actualizePagination();\n    }\n    public getPageSize (): number{\n        return this.pageSize;\n    }\n    \n    public getPageSizeArray (): Array<number>{\n        return this.pageSizeArray;\n    }\n    \n    public setPageIndex (pageIndex : number){\n        this.pageIndex  = pageIndex;\n        // on relance la requte de chargement du tableau\n        this.pageIndex = this.pageIndex > this.getLastPageIndex()-1 ? (this.getLastPageIndex()-1 > 0 ? this.getLastPageIndex()-1 : 0) : this.pageIndex;\n        this.actualizePagination();\n        console.log(\" => Allez  la page : \" + (this.getPageIndex()));\n        this.setHighLight();\n    }\n\n    public getPageIndex() : number{\n        return this.pageIndex;\n    }\n    public setTotalElement(totalElement: number){\n        this.totalElement = totalElement;\n    }\n    public getTotalElement(): number{\n        return this.totalElement;\n    }\n\n    public setSort(headerKey : string, dir : number){\n        this.sorter[headerKey] = dir;\n\n    }\n    public getSort() : Array<any>{\n       return  this.sorter;\n    }\n\n    public setSortColumn(headerKey : string) : number{\n        let sorterDir = this.sorter[headerKey];\n\n        if (sorterDir === PaginationService.UNSORTED){\n        sorterDir = PaginationService.SORT_ASC;\n        } else if (sorterDir === PaginationService.SORT_ASC){\n        sorterDir = PaginationService.SORT_DESC;\n        } else {\n        sorterDir = PaginationService.UNSORTED;\n        }\n\n        Object.keys(this.sorter).forEach(element => {\n        this.setSort(element, PaginationService.UNSORTED);\n        });\n        \n        this.setSort(headerKey, sorterDir);\n        \n        return sorterDir;\n    }\n\n\n    goToPreviousPage(){\n        let previousPage = this.getPageIndex() -1;\n        previousPage = (previousPage>=0?previousPage:0);\n        this.setPageIndex(previousPage);      \n    }\n\n    goToNextPage(){\n        let nextPage = this.getPageIndex() + 1;\n        this.setPageIndex(nextPage);\n    }\n\n    resetPageIndex() {\n        this.setPageIndex(0);\n        this.setTotalElement(0);\n        this.actualizeButtonPagination();\n    }\n    \n    resetPagination(){\n        this.previousPage = null;\n        this.pageItem1 = null;\n        this.pageItem2 = null;\n        this.pageItem3 = null;\n        this.nextPage = null;\n        this.rangePage = null;\n        this.resetPageIndex();\n    }\n\n    public actualizePagination(){\n        // si les lments sur initialiss dans l'IHM, on met  jour la pagination\n        if (this.previousPage){\n            this.actualizeButtonPagination();\n            this.actualizeRangePage();\n        }\n    }\n\n    public actualizeButtonPagination(){\n        if (this.previousPage){\n        \n            let pageArray = [1, 2, 3];\n                \n            this.previousPage.nativeElement.parentElement.classList.remove('disabled'); \n            this.nextPage.nativeElement.parentElement.classList.remove('disabled'); \n            this.pageItem1.nativeElement.parentElement.classList.remove('disabled');   \n            this.pageItem2.nativeElement.parentElement.classList.remove('disabled');  \n            this.pageItem3.nativeElement.parentElement.classList.remove('disabled');  \n\n            if (pageArray[0] == 1 && pageArray[0] == this.getPageIndex()+1 ){\n                this.previousPage.nativeElement.parentElement.classList.add('disabled'); \n            } else if (this.getPageIndex() >= this.getLastPageIndex()-1){\n                this.nextPage.nativeElement.parentElement.classList.add('disabled'); \n                if (this.getPageIndex()>2){\n                    pageArray=[this.getPageIndex()-1, this.getPageIndex(), this.getPageIndex()+1];    \n                } \n            } else if (this.getPageIndex() == this.getLastPageIndex()-1 ){        \n                pageArray=[this.getPageIndex()-1, this.getPageIndex(), this.getPageIndex()+1];    \n            } else {            \n                pageArray=[this.getPageIndex(), this.getPageIndex()+1, this.getPageIndex()+2];    \n            }\n            \n            this.pageItem1.nativeElement.innerText = pageArray[0];\n            this.pageItem2.nativeElement.innerText = pageArray[1];\n            this.pageItem3.nativeElement.innerText = pageArray[2];\n\n            if (pageArray[0] > (this.getLastPageIndex())){\n                this.pageItem1.nativeElement.parentElement.classList.add('disabled'); \n            }\n            if (pageArray[1] > (this.getLastPageIndex())){\n                this.pageItem2.nativeElement.parentElement.classList.add('disabled'); \n            }\n            if (pageArray[2] > (this.getLastPageIndex())){\n                this.pageItem3.nativeElement.parentElement.classList.add('disabled');  \n            }\n        }\n    }\n    \n    public actualizeRangePage(){\n        this.rangePage.nativeElement.innerText = \"N/A\";\n        if (this.data && this.data.length>0){\n            let fisrtRangeElement = this.getPageIndex() * parseInt(this.numberPerPage.nativeElement.value) ;\n            let lastRangeElement = fisrtRangeElement+1 +  + parseInt( this.numberPerPage.nativeElement.value); \n            lastRangeElement = (lastRangeElement > this.getTotalElement() ? this.getTotalElement():lastRangeElement);\n            \n            this.rangePage.nativeElement.innerText = (fisrtRangeElement+1) + \" - \" + lastRangeElement +\" | Total: \" + this.getTotalElement() ;\n        } \n    }\n\n    public getLastPageIndex(){\n        let nberPerPage = this.numberPerPage? parseInt(this.numberPerPage.nativeElement.value): this.pageSizeArray[0];\n        let lastPageIndex = Math.round( this.getTotalElement() / nberPerPage );\n        if ( this.getTotalElement() - (Math.round(this.getTotalElement() / nberPerPage) * nberPerPage)>0){\n            lastPageIndex += 1;\n        } \n\n        return lastPageIndex;\n    }\n\n    public setHighLight(){\n        if (this.previousPage){\n            let buttons = document.getElementsByClassName('page-link');\n\n            // on supprime la prcdente surbrillance\n            for (var i = 0; i < buttons.length; i++) {\n                buttons[i].classList.remove('active');\n            }\n\n            if (this.getPageIndex()==0){\n                buttons[1].classList.add('active');\n            } else if (this.getPageIndex() == this.getLastPageIndex()-1){\n                buttons[this.getLastPageIndex()].classList.add('active');\n            } else{            \n                buttons[2].classList.add('active');  \n            }\n        }\n    }\n}","import { Injectable } from '@angular/core';\nimport { LabelType, Options } from 'ng5-slider';\nimport { Change } from 'app/model/ChangesClasses/Change';\nimport { ChangeType } from 'app/model/ChangesClasses/ChangeType';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SliderService {\n\n  public options : Options;\n  public stepsArray;\n  public ticksArray;\n  public minValue;\n  public maxValue;\n  public background : SafeStyle;\n\n  public getMinValue(){\n    return this.minValue;\n  }\n  public getMaxValue(){\n    return this.maxValue;\n  }\n  public getOptions(){\n    return this.options;\n  }\n  constructor(private sanitizer : DomSanitizer) { }\n\n  public initSlider(beginDate, endDate, featureChangesList, changeType){\n    this.background=this.sanitizer.bypassSecurityTrustStyle('rgba(100,100,100)');\n\n    this.stepsArray = this.getStepsArray(beginDate, endDate);\n    this.ticksArray = this.getTicksArray(featureChangesList, this.stepsArray);\n    this.minValue = beginDate.getTime();\n    this.maxValue = endDate.getTime();\n    this.setOptions(this.stepsArray, this.ticksArray, changeType);\n\n  }\n  public setOptions(stepsArray, ticksArray, changeType){\n    var dateOptions = { month: 'numeric', day: 'numeric' };\n    this.options = {\n      stepsArray : stepsArray.map((date : number) => {return {value : date, legend : \"<b [style.background-color]='background'>\"+new Date(date).toLocaleDateString('fr-FR', dateOptions)+\"</b>\"}}),\n      translate: this.translate,\n      noSwitching: true,\n      showTicks: true,\n      ticksArray : ticksArray,\n      getTickColor: (value: number): string => {\n        if (value == 6) {\n          return 'blue';\n        }\n        if (value == 2){\n          return 'red'\n        }\n        return 'red';\n      },\n    };\n  }\n\n  public getStepsArray(beginDate :Date, endDate :Date) : any[]{\n    if (endDate.getTime() < beginDate.getTime()){\n      return [];\n    }\n    else {\n      var stepsArray = [];\n      var date = beginDate;\n      while (date.getTime() <= endDate.getTime()+1000){ //1000 to add one seconds : 23h59m59s --> 00h00m00s\n       stepsArray.push(date.getTime());\n       date = new Date(date.getTime() + 1000*60*60*24); // = 24h = 1 day\n      }\n      return stepsArray;\n    }\n  }\n\n  public translate(value: number, label: LabelType) : string{\n    var dateOptions = { month: 'numeric', day: 'numeric' };\n    return new Date(value).toLocaleDateString('fr-FR', dateOptions);\n  }\n\n  public getTicksArray(changesList : Array<Change>, stepsArray : any[]) : Array<number>{\n    var ticksArray = [];\n    changesList.forEach((change : Change) => {\n      var timestamp = new Date(change.timestamp);\n      timestamp.setUTCHours(0);\n      timestamp.setUTCMinutes(0);\n      timestamp.setUTCSeconds(0);\n      ticksArray.push(stepsArray.indexOf(timestamp.getTime()));\n    });\n    return ticksArray;\n  }\n\n  public getRGBA(changeType : ChangeType){\n    return \"rgba(\"+changeType.color.R+\",\"+changeType.color.G+\",\"+changeType.color.B+\")\"\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { MapService } from './map.service';\nimport { UserContext } from '../model/UserContext';\nimport { ConfigService } from './config.service';\nimport { Observable } from 'rxjs';\nimport { nextTick } from 'q';\n\ndeclare var ol;\ndeclare var _paq: any;\n\n@Injectable()\nexport class UserContextService {\n\n  public context: UserContext;\n  private defaultUserContext: UserContext;\n\n  constructor(\n    private configService: ConfigService,\n    private mapService: MapService,\n    private location: Location,\n    private route: ActivatedRoute\n  ) {\n    this.setContext();\n\n  }\n\n  setPermalink(){\n    console.log(\"setPermalink\")\n    this.context = new UserContext();\n    this.context.initFromCurrentView(this.mapService);\n    let pLnk: string = this.context.getContextAsPermalink();\n    this.location.go(pLnk);\n    let piwikVlay = pLnk.substring(pLnk.indexOf(\"vLay=\")+5);\n    (!piwikVlay || piwikVlay ===\"\")?  piwikVlay = \"none\":\"\",\n    _paq.push(['trackEvent', 'permalien' , piwikVlay])\n  }\n\n  loadUserContextFromPermalink(): UserContext{\n      return this.context;\n  }\n\n  public setContext():Observable<UserContext>{\n    var obs = new Observable<UserContext>(resolve => {\n      this.configService.getConfig().subscribe(config => {\n        this.defaultUserContext=config.DEFAULTUSERCONTEXT[0];\n\n        this.context = new UserContext();\n        this.context.initFromRoute(this.route);\n        if(!this.context.isValid()){\n          this.context = this.defaultUserContext;\n        }\n        resolve.next(this.context);\n      });\n    })\n    return obs;\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<img\\nsrc=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-load-spinner',\n  templateUrl: './load-spinner.component.html',\n  styleUrls: ['./load-spinner.component.css']\n})\nexport class LoadSpinnerComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  integration: false,\n  dev: true,\n  geoserver_baseurl: \"https://ch-osm-services.geodatasolutions.ch/geoserver\",\n  services_baseurl: \"https://ch-osm-services.geodatasolutions.ch/services-webapp-magosm/\",\n  searchChangesTimeoutValue: 30000\n};\n","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { environment } from './environments/environment';\nimport { AppModule } from './app/app.module';\n\nif (environment.production) {\n  enableProdMode();\n  if(window){\n    window.console.log=function(){};\n  }\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n"],"sourceRoot":""}